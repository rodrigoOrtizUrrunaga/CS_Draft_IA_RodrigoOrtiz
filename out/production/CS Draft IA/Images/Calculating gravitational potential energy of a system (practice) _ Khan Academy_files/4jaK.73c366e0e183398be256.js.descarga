(window.webpackJsonp=window.webpackJsonp||[]).push([["4jaK"],{B4xi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_LAST_SECOND_WATCHED=t.UPDATE_TASK_STATUS=t.UPDATE_QUIZ_SCORE=t.UPDATE_LATEST_SCORE=t.UPDATE_BEST_SCORE=t.UPDATE_STATUS=t.UPDATE_RECOMMENDATIONS=t.UPDATE_PROGRESS=t.UPDATE_FPM_MASTERY_COMPLETE=t.UPDATE_FPM_MASTERY=t.LOAD_USER_INFO=t.CLEAR_RECOMMENDATIONS=t.CLEAR_RECOMMENDATION=t.SET_CURRENT_TOPIC=void 0;t.SET_CURRENT_TOPIC="SET_CURRENT_TOPIC";t.CLEAR_RECOMMENDATION="CLEAR_RECOMMENDATION";t.CLEAR_RECOMMENDATIONS="CLEAR_RECOMMENDATIONS";t.LOAD_USER_INFO="LOAD_USER_INFO";t.UPDATE_FPM_MASTERY="UPDATE_FPM_MASTERY";t.UPDATE_FPM_MASTERY_COMPLETE="UPDATE_FPM_MASTERY_COMPLETE";t.UPDATE_PROGRESS="UPDATE_PROGRESS";t.UPDATE_RECOMMENDATIONS="UPDATE_RECOMMENDATIONS";t.UPDATE_STATUS="UPDATE_STATUS";t.UPDATE_BEST_SCORE="UPDATE_BEST_SCORE";t.UPDATE_LATEST_SCORE="UPDATE_LATEST_SCORE";t.UPDATE_QUIZ_SCORE="UPDATE_QUIZ_SCORE";t.UPDATE_TASK_STATUS="UPDATE_TASK_STATUS";t.UPDATE_LAST_SECOND_WATCHED="UPDATE_LAST_SECOND_WATCHED"},"FQT/":function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.mergeStatusMaps=function(e,t){const a={};for(const r of Object.keys((0,s.default)({},e,t)))a[r]=n(e[r],t[r]);return a},t.furthestProgress=n;var s=r(a("pVnL"));function n(e,t){return t=t||"unstarted",o[e=e||"unstarted"]>o[t]?e:t}const o={unstarted:0,started:1,complete:2}},Jayu:function(e,t,a){"use strict";var r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a("ANjH"),n=r(a("kDsU")),o=a("e5gs");const u=(0,a("0zMT").createCompose)({reduxDevtoolsOptions:{name:"User Info"}}),c=(0,o.handleSideEffects)(o.defaultCallbacks);var i=(0,s.createStore)(n.default,n.defaultState,u((0,s.applyMiddleware)((e=>t=>a=>{const r=t(a);return c(t,a,e.getState()),r}))));t.default=i},e5gs:function(e,t,a){"use strict";var r=a("TqRt"),s=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCallbacks=t.handleSideEffects=void 0;var n,o=r(a("pVnL")),u=r(a("VkAN")),c=r(a("lTCR")),i=r(a("o1mU")),d=r(a("mXPZ")),E=s(a("B4xi")),p=a("pCog");t.handleSideEffects=e=>(t,a,r)=>{switch(a.type){case E.SET_CURRENT_TOPIC:e.onSetCurrentTopic&&e.onSetCurrentTopic(t,a.topicId,a.masteryEnabled)}};const T=(0,c.default)(n||(n=(0,u.default)(["\n    query getFpmMasteryForTopic($topicId: String!) {\n        user {\n            id\n            curationItemProgress(topicId: $topicId) {\n                masteryMap {\n                    progressKey\n                    status\n                }\n                currentMastery {\n                    percentage\n                    pointsEarned\n                    pointsAvailable\n                }\n            }\n        }\n    }\n"]))),l={onSetCurrentTopic:(e,t,a)=>{a&&d.default.hasProfile&&(0,i.default)(T,{variables:{topicId:t}}).then((({data:t})=>{const{curationItemProgress:a}=t.user,r={masteryMap:a.masteryMap.reduce(((e,{progressKey:t,status:a})=>(0,o.default)({},e,{[t]:a})),{}),masteryPercentage:a.currentMastery.percentage,masteryPointsEarned:a.currentMastery.pointsEarned,masteryPointsAvailable:a.currentMastery.pointsAvailable};e((0,p.updateFpmMastery)(r))})).then((()=>{e((0,p.updateFpmMasteryComplete)())}))}};t.defaultCallbacks=l},kDsU:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.defaultState=void 0;var s=r(a("pVnL")),n=a("B4xi"),o=a("nA/X"),u=a("FQT/");function c(e,t,a){return{percentage:e,pointsEarned:t,pointsAvailable:a}}const i={currentTopic:null,bestScoreMap:{},latestScoreMap:{},masteryMap:{},unitMastery:{percentage:0,pointsEarned:0,pointsAvailable:0},subjectMastery:{percentage:0,pointsEarned:0,pointsAvailable:0},masteryUpdateComplete:!1,quizScores:{},recommendations:[],statusMap:{},taskInProgressMap:{},lastSecondWatchedMap:{}};t.defaultState=i;var d=(e,t)=>{if(!e)return i;switch(t.type){case n.UPDATE_PROGRESS:{const a=t.fpmPromotions||{},r=(0,o.getUpdatedMasteryPoints)(e.unitMastery,e.masteryMap,a),n=(0,o.getUpdatedMasteryPoints)(e.subjectMastery,e.masteryMap,a),u=(0,s.default)({},e.masteryMap);return Object.keys(e.masteryMap).forEach((e=>{u[e]=a[e]||u[e]})),(0,s.default)({},e,{masteryMap:u,subjectMastery:n,unitMastery:r})}case n.SET_CURRENT_TOPIC:return(0,s.default)({},e,{currentTopic:t.topicId});case n.UPDATE_FPM_MASTERY_COMPLETE:return(0,s.default)({},e,{masteryUpdateComplete:!0});case n.UPDATE_FPM_MASTERY:return(0,s.default)({},e,{masteryMap:t.masteryMap,unitMastery:"number"==typeof t.masteryPercentage?c(t.masteryPercentage,t.masteryPointsEarned||0,t.masteryPointsAvailable||0):e.unitMastery});case n.UPDATE_STATUS:{const a=e.statusMap[t.progressKey],r=(0,u.furthestProgress)(a,t.status);return r===a?e:(0,s.default)({},e,{statusMap:(0,s.default)({},e.statusMap,{[t.progressKey]:r})})}case n.UPDATE_TASK_STATUS:return(0,s.default)({},e,{taskInProgressMap:(0,s.default)({},e.taskInProgressMap,{[t.taskKey]:t.inProgress})});case n.UPDATE_BEST_SCORE:{let{bestScore:a}=t;const r=a.numCorrect/a.numAttempted,n=e.bestScoreMap[t.progressKey];return n&&n.numCorrect/n.numAttempted>=r&&(a=n),(0,s.default)({},e,{bestScoreMap:(0,s.default)({},e.bestScoreMap,{[t.progressKey]:a})})}case n.UPDATE_LATEST_SCORE:{const{latestScore:a}=t;return(0,s.default)({},e,{latestScoreMap:(0,s.default)({},e.latestScoreMap,{[t.progressKey]:a})})}case n.UPDATE_QUIZ_SCORE:return(0,s.default)({},e,{quizScores:(0,s.default)({},e.quizScores,{[t.quizKey]:t.quizScore})});case n.UPDATE_RECOMMENDATIONS:return(0,s.default)({},e,{recommendations:t.recommendations});case n.CLEAR_RECOMMENDATION:{const a=t;return(0,s.default)({},e,{recommendations:e.recommendations.filter((({contentId:e,kind:t})=>t!==a.kind||e!==a.contentId))})}case n.CLEAR_RECOMMENDATIONS:{const a=t;return(0,s.default)({},e,{recommendations:e.recommendations.filter((({sourceId:e})=>e!==a.sourceId))})}case n.LOAD_USER_INFO:const a=t.userInfo.masteryMap||e.masteryMap;return(0,s.default)({},e,{masteryMap:a,unitMastery:c(null!=t.userInfo.masteryPercentage?t.userInfo.masteryPercentage:e.unitMastery.percentage,null!=t.userInfo.masteryPointsEarned?t.userInfo.masteryPointsEarned:e.unitMastery.pointsEarned,null!=t.userInfo.masteryPointsAvailable?t.userInfo.masteryPointsAvailable:e.unitMastery.pointsAvailable),subjectMastery:null!=t.userInfo.subjectMasteryPercentage&&null!=t.userInfo.subjectMasteryPointsEarned&&null!=t.userInfo.subjectMasteryPointsAvailable?c(t.userInfo.subjectMasteryPercentage,t.userInfo.subjectMasteryPointsEarned,t.userInfo.subjectMasteryPointsAvailable):e.subjectMastery,quizScores:(0,s.default)({},t.userInfo.quizScores,e.quizScores),recommendations:t.userInfo.recommendations||e.recommendations,statusMap:(0,u.mergeStatusMaps)(t.userInfo.statusMap||{},e.statusMap),taskInProgressMap:(0,s.default)({},t.userInfo.taskInProgressMap,e.taskInProgressMap),bestScoreMap:(0,s.default)({},t.userInfo.bestScoreMap,e.bestScoreMap),latestScoreMap:(0,s.default)({},t.userInfo.latestScoreMap,e.latestScoreMap)});case n.UPDATE_LAST_SECOND_WATCHED:return void 0===t.lastSecondWatched||t.lastSecondWatched===e.lastSecondWatchedMap[t.readableId]?e:(0,s.default)({},e,{lastSecondWatchedMap:(0,s.default)({},e.lastSecondWatchedMap,{[t.readableId]:t.lastSecondWatched})});default:return e}};t.default=d},pCog:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.updateRecommendations=t.updateProgress=t.updateFpmMasteryComplete=t.updateFpmMastery=t.reportQuizCompletion=t.startQuiz=t.retryQuiz=t.clearForItem=t.clearForTopic=t.setCurrentTopic=void 0;var s,n=r(a("VkAN")),o=r(a("lTCR")),u=a("skGw"),c=a("B4xi"),i=a("ZC1Y"),d=a("o1mU");t.setCurrentTopic=(e,t)=>({type:c.SET_CURRENT_TOPIC,topicId:e,masteryEnabled:t});t.clearForTopic=(e,t)=>{const a=(0,u.encodeParams)({topicId:e,sourceId:t});return(0,u.khanFetch)("/api/internal/user/recommendations/clear_for_source?".concat(a),{method:"POST"}),{type:c.CLEAR_RECOMMENDATIONS,sourceId:t}};const E=(0,o.default)(s||(s=(0,n.default)(["\n    mutation clearRecommendationForContentItemWeb(\n        $contentDescriptor: String!\n        $unitId: String!\n    ) {\n        clearRecommendation(\n            contentDescriptor: $contentDescriptor\n            unitId: $unitId\n        ) {\n            wasSuccessful\n        }\n    }\n"])));t.clearForItem=(e,t)=>((0,d.apolloMutate)(E,{variables:{unitId:t,contentDescriptor:(0,i.getContentDescriptor)(e)}}),{type:c.CLEAR_RECOMMENDATION,contentId:e.contentId,kind:e.kind});t.retryQuiz=e=>({type:c.UPDATE_TASK_STATUS,taskKey:e,inProgress:!1});t.startQuiz=e=>({type:c.UPDATE_TASK_STATUS,taskKey:e,inProgress:!0});t.reportQuizCompletion=(e,t)=>({type:c.UPDATE_QUIZ_SCORE,quizKey:e,quizScore:{completedDate:new Date,numCorrect:t.filter((e=>e.correct)).length,numAttempted:t.length}});t.updateFpmMastery=({masteryMap:e,masteryPercentage:t,masteryPointsEarned:a,masteryPointsAvailable:r})=>({type:c.UPDATE_FPM_MASTERY,masteryMap:e,masteryPercentage:t,masteryPointsEarned:a,masteryPointsAvailable:r});t.updateFpmMasteryComplete=()=>({type:c.UPDATE_FPM_MASTERY_COMPLETE});t.updateProgress=e=>({type:c.UPDATE_PROGRESS,fpmPromotions:e});t.updateRecommendations=e=>({type:c.UPDATE_RECOMMENDATIONS,recommendations:e})}}]);
//# sourceMappingURL=../../sourcemaps/en/4jaK.73c366e0e183398be256.js.map