(window.webpackJsonp=window.webpackJsonp||[]).push([["3oXq"],{"+lle":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("wk+a")),d=o(n("oLyU")),p=s(n("HEOz"));const c="start-ref-",h="end-ref-",f={display:"inline-block",width:0,visibility:"hidden"},g={display:"inline",whiteSpace:"nowrap"},m={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},y={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"};class v extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"getRefContent",(()=>this.props.refContent))}render(){return r.createElement("span",{style:f},p.doNotTranslate("_"))}}(0,i.default)(v,"propTypes",{refContent:l.default.node.isRequired});class b extends r.Component{render(){return r.createElement("span",{style:f},p.doNotTranslate("_"))}}const x={newline:u.default.defaultRules.newline,paragraph:u.default.defaultRules.paragraph,escape:u.default.defaultRules.escape,passageFootnote:{order:u.default.defaultRules.escape.order+.1,match:u.default.inlineRegex(/^\^/),parse:(e,t,n)=>{const s=n.lastFootnote.id+1,o={id:s,text:1===s?"*":""+s};return"*"===n.lastFootnote.text&&(n.lastFootnote.text=""+n.lastFootnote.id),n.lastFootnote=o,o},react:(e,t,n)=>r.createElement("sup",{key:n.key},e.text)},refStart:{order:u.default.defaultRules.escape.order+.2,match:function(e,t){const n=/^\{\{/.exec(e);if(n){let t=2,s=0;for(;t<e.length;){const n=e.slice(t,t+2);if("{{"===n)s++,t++;else if("}}"===n){if(!(s>0))break;s--,t++}t++}const o=e.slice(2,t);return[n[0],o]}return null},parse:(e,t,n)=>{if(!n.useRefs)return{ref:null,refContent:null};const s=n.lastRef+1;n.lastRef=s,n.currentRef.push(s);return{ref:s,refContent:t("(“"+e[1]+"”)\n\n",d.default.defaults({useRefs:!1},C))}},react:(e,t,n)=>{if(null==e.ref)return null;const s=t(e.refContent,{});return r.createElement(v,{ref:c+e.ref,key:c+e.ref,refContent:s})}},refEnd:{order:u.default.defaultRules.escape.order+.3,match:u.default.inlineRegex(/^\}\}/),parse:(e,t,n)=>{if(!n.useRefs)return{ref:null};return{ref:n.currentRef.pop()||null}},react:(e,t,n)=>null!=e.ref?r.createElement(b,{ref:h+e.ref,key:h+e.ref}):null},squareLabel:{order:u.default.defaultRules.escape.order+.4,match:u.default.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:(e,t,n)=>(n.firstQuestionRef||(n.firstQuestionRef=e[1]),{content:e[1],space:e[2].length>0}),react:(e,t,n)=>[r.createElement("span",{key:"visual-square",className:"perseus-passage-square-label",style:g,"aria-hidden":"true"},r.createElement("span",{style:m},e.content)),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},p.$_("[Marker for question %(number)s]",{number:e.content})),e.space?" ":null]},circleLabel:{order:u.default.defaultRules.escape.order+.5,match:u.default.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:(e,t,n)=>({content:e[1],space:e[2].length>0}),react:(e,t,n)=>[r.createElement("span",{key:"visual-circle",className:"perseus-passage-circle-label",style:g,"aria-hidden":!0},r.createElement("span",{style:y},e.content)),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},p.$_("[Circle marker %(number)s]",{number:e.content})),e.space?" ":null]},squareBracketRef:{order:u.default.defaultRules.escape.order+.6,match:u.default.inlineRegex(/^\[(\d+)\]( *)/),parse:(e,t,n)=>(n.firstSentenceRef||(n.firstSentenceRef=e[1]),{content:e[1],space:e[2].length>0}),react:(e,t,n)=>[r.createElement("span",{key:"visual-brackets",className:"perseus-passage-bracket-label","aria-hidden":"true"},"[",e.content,"]"),r.createElement("span",{key:"alt-text",className:"perseus-sr-only"},p.$_("[Sentence %(number)s]",{number:e.content})),e.space?" ":null]},highlight:{order:u.default.defaultRules.escape.order+.7,match:u.default.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(e,t,n)=>[r.createElement("span",{key:0,className:"perseus-highlight"},e.content)]},reviewHighlight:{order:u.default.defaultRules.escape.order+.7,match:u.default.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(e,t,n)=>[r.createElement("span",{key:0,className:"perseus-review-highlight"},e.content)]},strong:u.default.defaultRules.strong,u:u.default.defaultRules.u,em:u.default.defaultRules.em,del:u.default.defaultRules.del,text:(0,a.default)({},u.default.defaultRules.text,{react:(e,t,n)=>r.createElement("span",{key:n.key},e.content)})},C={currentRef:[],useRefs:!0,lastRef:0,lastFootnote:{id:0,text:""}},k=u.default.parserFor(x);var E={parse:(e,t)=>{t=t||{};return k(e+"\n\n",d.default.extend(t,C))},output:u.default.reactFor(u.default.ruleOutput(x,"react")),START_REF_PREFIX:c,END_REF_PREFIX:h,_rulesForTesting:x};t.default=E},"/Qgg":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=o(n("TSYQ")),l=s(n("q1tI")),u=o(n("17x9")),d=o(n("oLyU")),p=n("j8wP"),c=s(n("+jAD")),h=o(n("Atlv")),f=n("zahm");class g extends l.Component{constructor(...e){super(...e),(0,i.default)(this,"change",((...e)=>c.change.apply(this,e))),(0,i.default)(this,"getUserInput",(()=>this.refs.renderer.getUserInput())),(0,i.default)(this,"getSerializedState",(()=>this.refs.renderer.getSerializedState())),(0,i.default)(this,"restoreSerializedState",((e,t)=>(this.refs.renderer.restoreSerializedState(e,t),null))),(0,i.default)(this,"simpleValidate",(e=>this.refs.renderer.score())),(0,i.default)(this,"getInputPaths",(()=>this.refs.renderer.getInputPaths())),(0,i.default)(this,"setInputValue",((e,t,n)=>this.refs.renderer.setInputValue(e,t,n))),(0,i.default)(this,"getAcceptableFormatsForInputPath",(e=>this.refs.renderer.getAcceptableFormatsForInputPath(e))),(0,i.default)(this,"getRenderer",(()=>this.refs.renderer)),(0,i.default)(this,"focus",(()=>this.refs.renderer.focus())),(0,i.default)(this,"focusInputPath",(e=>{this.refs.renderer.focusPath(e)})),(0,i.default)(this,"blurInputPath",(e=>{this.refs.renderer.blurPath(e)})),(0,i.default)(this,"showRationalesForCurrentlySelectedChoices",(()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices()}))}componentDidMount(){this.forceUpdate()}render(){const e=d.default.extend({},p.Options.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}}),t=d.default.indexOf(this.props.findWidgets("group"),this),n=this.props.apiOptions.groupAnnotator(t,this.props.widgetId),s=this.refs.renderer&&this.refs.renderer.score(),o=s&&"invalid"!==s.type,i=s&&"invalid"===s.type;return l.createElement("div",{className:(0,r.default)({"perseus-group":!0,"perseus-group-valid-answer":o,"perseus-group-invalid-answer":i})},n,l.createElement(h.default,(0,a.default)({},this.props,{ref:"renderer",apiOptions:e,findExternalWidgets:this.props.findWidgets,reviewMode:!!this.props.reviewModeRubric,onInteractWithWidget:e=>{this.refs.renderer&&this.change("widgets",this.refs.renderer.props.widgets)},linterContext:this.props.linterContext})),this.props.icon&&l.createElement("div",{className:"group-icon"},this.props.icon))}}(0,i.default)(g,"propTypes",(0,a.default)({},c.propTypes,{content:u.default.string,widgets:u.default.object,images:u.default.object,icon:u.default.object,reviewModeRubric:u.default.object,linterContext:f.linterContextProps})),(0,i.default)(g,"defaultProps",{content:"",widgets:{},images:{},icon:null,linterContext:f.linterContextDefault});var m={name:"group",displayName:"Group (SAT only)",widget:g,traverseChildWidgets:function(e,t){return d.default.extend({},e,t(e))},hidden:!1,isLintable:!0};t.default=m},"1I17":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("17x9")),l=o(n("JtQr")),u=o(n("KSWw")),d=o(n("HQqP")),p=s(n("HEOz"));const{layout:c}=u.default,h=d.default.parse,f=d.default.ParseError;class g extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{parsedSmiles:null,error:null}),(0,a.default)(this,"stateFromSmiles",(e=>{try{this.setState({parsedSmiles:h(e),error:null})}catch(e){if(!(e instanceof f))throw e;this.setState({error:e.message})}})),(0,a.default)(this,"setCanvasBounds",((e,t)=>{const n=Math.max.apply(Math,t.map((e=>e.pos?e.pos[0]:-1/0))),s=Math.max.apply(Math,t.map((e=>e.pos?e.pos[1]:-1/0))),o=Math.min.apply(Math,t.map((e=>e.pos?e.pos[0]:1/0))),a=Math.min.apply(Math,t.map((e=>e.pos?e.pos[1]:1/0))),i=n-o+60,r=s-a+60;return e.width=i,e.height=r,[30-o,30-a]})),(0,a.default)(this,"canvasRender",(()=>{if(this.state.error||!this.state.parsedSmiles)return;const e=c(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,n=this.setCanvasBounds(t,e),s=t.getContext("2d");s.clearRect(0,0,t.width,t.height),s.save(),s.translate(n[0],n[1]),(0,l.default)(s,e),s.restore()}))}UNSAFE_componentWillMount(){this.stateFromSmiles(this.props.smiles)}componentDidMount(){this.canvasRender()}UNSAFE_componentWillReceiveProps(e){this.stateFromSmiles(e.smiles)}componentDidUpdate(){this.canvasRender()}render(){let e=i.createElement("canvas",{className:"molecule-canvas",id:this.props.id+"-molecule",ref:"canvas"},p.$_("A molecular structure drawing. SMILES notation: %(content)s",{content:this.props.smiles}));return this.state.error&&(e=i.createElement("div",{className:"error"},this.state.error)),i.createElement("div",{className:"molecule-canvas"},e)}}(0,a.default)(g,"propTypes",{id:r.default.string.isRequired,rotationAngle:r.default.number,smiles:r.default.string});class m extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"simpleValidate",(()=>({type:"points",earned:0,total:0,message:null}))),(0,a.default)(this,"getUserInput",(()=>[])),(0,a.default)(this,"validate",((e,t)=>({type:"points",earned:0,total:0,message:null})))}render(){return i.createElement(g,{id:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}}(0,a.default)(m,"propTypes",{rotationAngle:r.default.number,smiles:r.default.string,widgetId:r.default.string}),(0,a.default)(m,"defaultProps",{rotationAngle:0});var y={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!0,widget:m,molecule:g};t.default=y},"473Y":function(e,t,n){"use strict";var s=n("TqRt"),o=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("q1tI")),i=o(n("HEOz")),r=s(n("UDUP")),l=s(n("fQFx")),u=n("OgJR"),d=s(n("czma"));class p extends a.PureComponent{_handleAddHighlight(e){this.props.onAddHighlight(e);const t=document.getSelection();t&&t.collapseToEnd()}_selectionIsValid(e){if(!e)return!1;const{contentNode:t}=this.props,n=new Range;n.selectNodeContents(t);const s=new Range;s.setStart(e.focusNode,e.focusOffset),s.collapse(!0);return(0,u.rangesOverlap)(n,s)}render(){return a.createElement(d.default,{buildHighlight:this.props.buildHighlight,enabled:this.props.editable},((e,t)=>a.createElement("div",null,a.createElement(r.default,{editable:this.props.editable&&!this._selectionIsValid(e),highlights:this.props.highlights,offsetParent:this.props.offsetParent,onRemoveHighlight:this.props.onRemoveHighlight,zIndexes:this.props.zIndexes}),this._selectionIsValid(e)&&!t&&a.createElement(l.default,{label:i._("Add highlight"),onClick:()=>this._handleAddHighlight(e.proposedHighlight),focusNode:e.focusNode,focusOffset:e.focusOffset,offsetParent:this.props.offsetParent}))))}}var c=p;t.default=c},"4s5V":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=n("mR6N"),l=s(n("q1tI")),u=o(n("oLyU")),d=n("6OHE"),p=o(n("6wxr")),c=o(n("MG0i")),h=n("/4Qb"),f=o(n("Atlv"));class g extends l.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{isInputFocused:!1})}focusInput(){this._input&&this._input.focus()}handleClick(e){const{checked:t,onChange:n}=this.props;e.preventDefault(),this.focusInput(),n(!t)}handleKeyDown(e){const{onFocusPrevAnswer:t,onFocusNextAnswer:n}=this.props;switch(e.key){case"ArrowUp":e.preventDefault(),t();break;case"ArrowDown":e.preventDefault(),n()}}handleInputChange(e){e.preventDefault()}handleInputFocus(){this.setState({isInputFocused:!0})}handleInputBlur(){this.setState({isInputFocused:!1})}renderCheckmark(){const{checked:e}=this.props;return l.createElement("span",{className:(0,r.css)(y.checkmarkContainer)},e&&l.createElement(p.default,{icon:h.iconCheckMedium,size:16,color:d.colors.gray17}))}render(){const{content:e,checked:t,groupName:n,index:s,inputType:o}=this.props,{isInputFocused:a}=this.state,i="".concat(n,"-").concat(s);return l.createElement("div",{className:(0,r.css)(y.answerChoice,a&&y.answerFocused),onClick:e=>this.handleClick(e),onKeyDown:e=>this.handleKeyDown(e)},l.createElement("span",{className:(0,r.css)(y.answerInputWrapper)},l.createElement("input",{className:(0,r.css)(c.default.perseusSrOnly),checked:t,name:n,id:i,type:o,onChange:e=>this.handleInputChange(e),onFocus:()=>this.handleInputFocus(),onBlur:()=>this.handleInputBlur(),ref:e=>this._input=e}),this.renderCheckmark()),l.createElement("label",{htmlFor:i},l.createElement(f.default,{content:e})))}}class m extends l.Component{constructor(e){super(e),this._choices=[],this.state={groupName:u.default.uniqueId("answer_choices_")}}focusAnswer(e=0){const t=this.props.choices.length;e<0?e+=t:e>=t&&(e-=t);const n=this._choices[e];n&&n.focusInput()}onAnswerChange(e,t){const{choices:n,multipleSelect:s,onChange:o}=this.props,a=[];for(let o=0;o<n.length;o++)a.push(s?o===e?t:n[o].checked:o===e&&t);o(a)}onFocusAnswer(e){this.focusAnswer(e)}render(){const{choices:e,multipleSelect:t}=this.props,{groupName:n}=this.state;return l.createElement("fieldset",null,e.map(((e,s)=>l.createElement(g,(0,a.default)({},e,{key:e.content,groupName:n,index:s,inputType:t?"checkbox":"radio",onChange:e=>this.onAnswerChange(s,e),onFocusPrevAnswer:()=>this.onFocusAnswer(s-1),onFocusNextAnswer:()=>this.onFocusAnswer(s+1),ref:e=>this._choices[s]=e})))))}}t.default=m;const y=r.StyleSheet.create({answerChoice:{display:"flex",alignItems:"center",userSelect:"none",padding:"10px 16px 10px 0px",fontWeight:"bold",border:"solid 2px transparent",borderRadius:2,":active":{backgroundColor:"rgba(33, 36, 44, 0.08)"}},answerFocused:{borderColor:"#1865f2",":active":{borderColor:"transparent"}},answerInputWrapper:{marginRight:8},checkmarkContainer:{display:"flex",position:"relative",width:16,height:16,marginLeft:8}})},"7O7Y":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("i8i4")),d=o(n("oLyU")),p=n("eAf/"),c=s(n("+jAD")),h=n("j8wP"),f=o(n("p8fL")),g=o(n("Giaf")),m=o(n("M++g")),y=o(n("7xiW")),v=o(n("uBl0")),b=o(n("yfnS")),x=o(n("XwLL")),C=o(n("qoj5")),k=s(n("HEOz"));const{assert:E}=f.default,{seededRNG:w}=v.default,{Path:M,Arc:T,Circle:S,Label:P,Line:I,MovablePoint:_,MovableLine:N}=g.default;class A extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"_renderThresholdLine",(()=>{const e=[0,this._range()[1][1]],t=d.default.map(e,(e=>[this.state.threshold,e]));return r.createElement(N,{onMove:this.handleMouseInteraction},d.default.map(t,((e,t)=>r.createElement(_,{key:t,static:!0,coord:e,normalStyle:{stroke:"none",fill:"none"}}))))})),(0,i.default)(this,"_renderCircle",(()=>{const e=this.props.data,t=d.default.reduce(e,((e,t)=>e+t),0),n=d.default.reduce(e,((e,t,n)=>null!=this.state.threshold&&n<=this.state.threshold?e+t:e),0),s=n/t,o=1e-5,a=[this.props.box[0]-30,30],i=this._range()[0],l=Math.min(Math.max(this.state.threshold,i[0]),i[1]).toFixed(2);return[s>0&&(()=>{const e={key:"below",center:a,radius:20,startAngle:0,endAngle:s<1?360*s:359.99999,sector:1!==s,unscaled:!0,style:{fill:b.default.LIGHT_RED,stroke:b.default.RED}};return r.createElement(T,e)})(),s<1&&(()=>{const e={key:"above",center:a,radius:20,startAngle:s>0?360*s:o,endAngle:360,sector:0!==s,unscaled:!0,style:{fill:b.default.LIGHT_BLUE,stroke:b.default.BLUE}};return r.createElement(T,e)})(),(()=>{const e={key:"label",coord:[a[0],a[1]+30],text:n+" of "+t+" results below "+l+"%",direction:"center",tex:!1,unscaled:!0,style:{fontSize:"12px"}};return r.createElement(P,e)})()]})),(0,i.default)(this,"_renderData",(()=>{const e=this.props.data;this._range();return d.default.map(e,((e,t)=>{if(!e)return;const n=null!=this.state.threshold&&t<=this.state.threshold,s={fill:n?b.default.LIGHT_RED:b.default.LIGHT_BLUE,stroke:n?b.default.RED:b.default.BLUE},o=[[t,0],[t,e],[t+1,e],[t+1,0]];return r.createElement(M,{key:t,coords:o,style:s})}))})),(0,i.default)(this,"_setupGraphie",((e,t)=>{const n=t.data,s=t.range,o=t.scale,a=s[0][1]-s[0][0],i=s[1][1]-0,r=Math.ceil(i/20);if(d.default.each(d.default.range(0,s[1][1],r),(t=>{n&&e.label([s[0][0],t],x.default.roundToApprox(t,2),"left",!0),e.line([s[0][0],t],[s[0][1],t],{stroke:"#000",strokeWidth:1,opacity:.3})})),n){const t=15,n=Math.ceil(a/t);d.default.each(d.default.range(s[0][0],s[0][1],n),(t=>{e.label([t,0],p.number.round(t,2),"below",!0);e.line([t,0],[t,-8/o[1]],{stroke:"#000",strokeWidth:1})}))}const l=[s[0][0],0],u=[s[0][0],s[1][1]];e.line(l,u,{stroke:"#000",strokeWidth:2,opacity:1});const c=s[0][0]+a/2,h=n?25:0;e.label([c,-h/o[1]],t.xAxisLabel,"below",!1).css("font-weight","bold");const f=0+i/2,g=n?55:28;e.label([s[0][0]-g/o[0],f],t.yAxisLabel,"center",!1).css("font-weight","bold").css("-webkit-transform","rotate(-90deg)")})),(0,i.default)(this,"handleMouseInteraction",(e=>{this.setState({threshold:e[0]})})),(0,i.default)(this,"_range",(e=>(e=e||this.props).data?this._getRangeForData(e.data):[[0,100],[-1,10]])),(0,i.default)(this,"_getRangeForData",(e=>{const t=d.default.indexOf(e,d.default.find(e,(e=>e>0))),n=Math.max(0,t-10),s=d.default.lastIndexOf(e,d.default.last(d.default.filter(e,(e=>e>0))));return[[n,Math.min(101,s+1+10)],[-1,d.default.max(e)]]})),(0,i.default)(this,"_getInitialThreshold",(e=>{const t=e[0];return t[0]+(t[1]-t[0])/3})),(0,i.default)(this,"state",{threshold:this._getInitialThreshold(this._range())})}UNSAFE_componentWillReceiveProps(e){const t=this._range(),n=this._range(e);v.default.deepEq(t,n)||this.setState({threshold:this._getInitialThreshold(n)})}render(){const e=this.props.data,t=this._range(),n={xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,box:this.props.box,range:t,data:e,scale:[v.default.scaleFromExtent(t[0],this.props.box[0]),v.default.scaleFromExtent(t[1],this.props.box[1])]},s=[t[0][0],0],o=[t[0][1],0];return r.createElement(g.default,{box:n.box,range:n.range,options:n,setup:this._setupGraphie,onMouseMove:this.handleMouseInteraction,onMouseDown:this.handleMouseInteraction,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable},r.createElement(I,{start:s,end:o,style:{stroke:"#000",strokeWidth:1,opacity:1}}),e&&this._renderData(),e&&this._renderCircle(),e&&this._renderThresholdLine())}}(0,i.default)(A,"propTypes",{data:l.default.arrayOf(l.default.number),xAxisLabel:l.default.string,yAxisLabel:l.default.string,box:l.default.arrayOf(l.default.number)}),(0,i.default)(A,"defaultProps",{data:null,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",box:[400,400]});class R extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{invalidInput:!1}),(0,i.default)(this,"calculateDisplayProportion",(()=>{const e=this.props.userProportion;return"percentage"===this.props.proportionOrPercentage?Math.round(100*e):e})),(0,i.default)(this,"change",((...e)=>c.change.apply(this,e))),(0,i.default)(this,"checkProportionValidity",(e=>e>=0&&"proportion"===this.props.proportionOrPercentage&&e<=1||"percentage"===this.props.proportionOrPercentage&&e<=100)),(0,i.default)(this,"handleUserProportionChange",((e,t)=>{let n;n="percentage"===this.props.proportionOrPercentage?e/100:e,null!=n&&(n=Math.min(1,Math.max(0,n))),this.props.onChange({userProportion:n},t)})),(0,i.default)(this,"handleSampleSizeChange",((e,t)=>{null!=e&&(e=Math.min(1e3,Math.max(0,Math.floor(e)))),this.props.onChange({sampleSize:e},t)})),(0,i.default)(this,"handleRunSimulation",(()=>{null!=this.props.numTrials&&null!=this.props.userProportion&&null!=this.props.sampleSize?(this.setState({invalidInput:!1}),this.props.onChange({data:this.generateData()}),this.props.trackInteraction()):this.setState({invalidInput:!0})})),(0,i.default)(this,"generateData",(e=>((e,t,n)=>{const s=()=>this.generateNumber()<n,o=d.default.times(101,(()=>0));return d.default.times(t,(()=>{const t=d.default.times(e,s),n=d.default.filter(t,d.default.identity).length,a=Math.floor(100*n/e);o[a]++})),o})((e=e||this.props).sampleSize,e.numTrials,e.userProportion))),(0,i.default)(this,"getInputPaths",(()=>[["userProportion"],["sampleSize"]])),(0,i.default)(this,"focus",(()=>{const e=d.default.head(this.getInputPaths());return this.focusInputPath(e),!0})),(0,i.default)(this,"focusInputPath",(e=>{E(e.length>0);const t=d.default.head(e);this.refs[t].focus()})),(0,i.default)(this,"blurInputPath",(e=>{E(e.length>0);const t=d.default.head(e);this.refs[t].blur()})),(0,i.default)(this,"getDOMNodeForPath",(e=>{E(e.length>0);const t=d.default.head(e);return u.default.findDOMNode(this.refs[t])})),(0,i.default)(this,"getGrammarTypeForPath",(e=>(E(e.length>0),"number"))),(0,i.default)(this,"setInputValue",((e,t,n)=>{E(e.length>0);const s=d.default.head(e);this["handle"+(s.charAt(0).toUpperCase()+s.slice(1))+"Change"](t,n)})),(0,i.default)(this,"getUserInput",(()=>null)),(0,i.default)(this,"simpleValidate",(e=>R.validate(this.getUserInput(),e)))}UNSAFE_componentWillMount(){null!=this.props.randomSeed&&(this.generateNumber=v.default.seededRNG(this.props.randomSeed))}UNSAFE_componentWillReceiveProps(e){e.randomSeed!==this.props.randomSeed&&(this.generateNumber=v.default.seededRNG(e.randomSeed))}render(){const e={marginLeft:"5px"},t="0px 0px 0px 2px rgba(255, 165, 0, 1)",n=d.default.extend({},e,{WebkitBoxShadow:t,MozBoxShadow:t,boxShadow:t,transition:"all 0.15s"}),s=d.default.extend({},e,{transition:"all 0.15s"}),o=this.state.invalidInput?n:s,a=this.props.apiOptions.staticRender?y.default:m.default,i=r.createElement("div",null,r.createElement(a,{ref:"userProportion",style:o,value:this.calculateDisplayProportion(),checkValidity:this.checkProportionValidity,disabled:this.props.apiOptions.readOnly,onChange:this.handleUserProportionChange,onFocus:()=>this.props.onFocus(["userProportion"]),onBlur:()=>this.props.onBlur(["userProportion"])}),r.createElement(C.default,null,r.createElement("p",null,k._("This controls the proportion or percentage that will be used in your simulation.")))),l=r.createElement("div",null,r.createElement(a,{ref:"sampleSize",style:o,value:this.props.sampleSize,checkValidity:e=>e>=0,disabled:this.props.apiOptions.readOnly,onChange:this.handleSampleSizeChange,onFocus:()=>this.props.onFocus(["sampleSize"]),onBlur:()=>this.props.onBlur(["sampleSize"])}),r.createElement(C.default,null,r.createElement("p",null,k._("This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated.")))),u=r.createElement("div",{style:{textAlign:"right"}},r.createElement("b",null,this.props.numTrials),r.createElement(C.default,null,r.createElement("p",null,k._("This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times.")))),p=[{title:this.props.proportionLabel+":",value:i},{title:k._("Sample size:"),value:l},{title:k._("Number of trials:"),value:u}],c=r.createElement("button",{className:"simple-button",style:{margin:"20px 0"},disabled:this.props.apiOptions.readOnly,onClick:this.handleRunSimulation},k._("Run simulation")),h={paddingBottom:this.props.data?40:0},f=r.createElement("div",{style:h},r.createElement(A,{data:this.props.data,xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}));return r.createElement("div",null,(e=>{const t=r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,k._("Parameter")),r.createElement("th",null,k._("Value")))),n=r.createElement("tbody",null,d.default.map(e,((e,t)=>r.createElement("tr",{key:t},r.createElement("td",null,e.title),r.createElement("td",null,e.value)))));return r.createElement("table",null,t,n)})(p),c,f)}}(0,i.default)(R,"propTypes",(0,a.default)({},c.propTypes,{apiOptions:h.Options.propTypes,data:l.default.arrayOf(l.default.number),numTrials:l.default.number,proportionLabel:l.default.string,proportionOrPercentage:l.default.string,randomSeed:l.default.number,sampleSize:l.default.number,trackInteraction:l.default.func.isRequired,userProportion:l.default.number,xAxisLabel:l.default.string,yAxisLabel:l.default.string})),(0,i.default)(R,"defaultProps",{data:null,userProportion:null,sampleSize:null,numTrials:null,randomSeed:0,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion",apiOptions:h.Options.defaults}),d.default.extend(R,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var O={name:"simulator",displayName:"Simulator",widget:R,transform:e=>{const t=d.default.clone(e);return t.randomSeed=e.problemNum,t},hidden:!0};t.default=O},BCuI:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("oLyU")),d=n("j8wP"),p=s(n("+jAD")),c=n("/4Qb"),h=o(n("APgo")),f=o(n("Atlv")),g=o(n("uBl0")),m=n("zahm");class y extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{visible:1}),(0,i.default)(this,"change",((...e)=>p.change.apply(this,e))),(0,i.default)(this,"_handleInteraction",(e=>{const t=parseInt(e.split(" ")[1]);if(t===this.state.visible-1){const e=this.refs.renderer.getWidgetInstance("group "+t);e.showRationalesForCurrentlySelectedChoices();const n=e.simpleValidate();"points"===n.type&&n.total===n.earned&&(this.setState({visible:this.state.visible+1}),this.props.trackInteraction({visible:this.state.visible+1}))}}))}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){const e=r.createElement(h.default,(0,a.default)({},c.iconOk,{style:{color:"green"}})),t=u.default.chain(this.props.json).first(this.state.visible).map(((e,t)=>"[[".concat(g.default.snowman," group ").concat(t,"]]"))).join("\n\n").value(),n={};return u.default.each(this.props.json,((t,s)=>{const o="group ".concat(s);n[o]={type:"group",graded:!0,version:{major:0,minor:0},options:u.default.extend({},t,{icon:s<this.state.visible-1?e:null})}})),r.createElement("div",{className:"perseus-sequence"},r.createElement(f.default,{ref:"renderer",content:t,widgets:n,onInteractWithWidget:this._handleInteraction,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext}))}}(0,i.default)(y,"propTypes",(0,a.default)({},p.propTypes,{apiOptions:d.Options.propTypes,json:l.default.arrayOf(l.default.shape({content:l.default.string,images:l.default.objectOf(l.default.any),widgets:l.default.objectOf(l.default.any)})),trackInteraction:l.default.func.isRequired,linterContext:m.linterContextProps})),(0,i.default)(y,"defaultProps",{json:[{content:"",widgets:{},images:{}}],linterContext:m.linterContextDefault});var v={name:"sequence",displayName:"Graded Sequence",widget:y,traverseChildWidgets:function(e,t){let n=e.json;u.default.isArray(n)||(n=[n]);const s=u.default.map(n,(e=>t(e)));return u.default.extend({},e,{json:s})},tracking:"all",hidden:!0,isLintable:!0};t.default=v},FGkX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function s(e){let t=0;for(let n=e.length-1;n>=0;n--){if("0"!=e.charAt(n))return t;t++}return t}function o(e){let t=!0,n=!1,s=!1,o="",a="",i="",r=0,l=0,u=!0;for(let d=0;d<e.length;d++){const p=e.charAt(d);if(p>="1"&&p<="9")i+=o+p,o="",s=!0,n||(l++,r++),t=!1;else if("0"==p)n?s?(i+=o+p,o=""):(a+=p,r--):(l++,s?(a+=p,r++,o+=p):a+=p),t=!1;else if(n||"."!=p)if("e"==p||"E"==p&&d+1<e.length){const t=parseInt(e.substring(d+1,e.length));r+=t,l+=t,d=e.length}else!t||"+"!=p&&"-"!=p||"-"==p&&(u=!u);else i+=o,o="",n=!0,t=!1}return""==i||u}function a(e){let t=!0,n=!1,s=!1,o="",a="",i="",r=0,l=0,u=!0;for(let d=0;d<e.length;d++){const p=e.charAt(d);if(p>="1"&&p<="9")i+=o+p,o="",s=!0,n||(l++,r++),t=!1;else if("0"==p)n?s?(i+=o+p,o=""):(a+=p,r--):(l++,s?(a+=p,r++,o+=p):a+=p),t=!1;else if(n||"."!=p)if("e"==p||"E"==p&&d+1<e.length){const t=parseInt(e.substring(d+1,e.length));r+=t,l+=t,d=e.length}else!t||"+"!=p&&"-"!=p||"-"==p&&(u=!u);else i+=o,o="",n=!0,t=!1}return""==i?a:i}function i(e){let t=!0,n=!1,s=!1,o="",a="",i="",r=0,l=0,u=!0;for(let d=0;d<e.length;d++){const p=e.charAt(d);if(p>="1"&&p<="9")i+=o+p,o="",s=!0,n||(l++,r++),t=!1;else if("0"==p)n?s?(i+=o+p,o=""):(a+=p,r--):(l++,s?(a+=p,r++,o+=p):a+=p),t=!1;else if(n||"."!=p)if("e"==p||"E"==p&&d+1<e.length){const t=parseInt(e.substring(d+1,e.length));r+=t,l+=t,d=e.length}else!t||"+"!=p&&"-"!=p||"-"==p&&(u=!u);else i+=o,o="",n=!0,t=!1}return""==i?l:r}function r(e,t){const n=e.length-t-1;if(n<0)return"";if(n>=e.length-1)return e;const s=e.charAt(n+1),o=e.charAt(n);let a=!1;if(s>"5")a=!0;else if("5"==s){for(let t=n+2;t<e.length;t++)"0"!=e.charAt(t)&&(a=!0);o%2==1&&(a=!0)}let i="";for(let t=n;t>=0;t--){const n=e.charAt(t);if(a){let e;if("9"==n)e="0";else{switch(n){case"0":e="1";break;case"1":e="2";break;case"2":e="3";break;case"3":e="4";break;case"4":e="5";break;case"5":e="6";break;case"6":e="7";break;case"7":e="8";break;case"8":e="9"}a=!1}i=e+i}else i=n+i}return a&&(i="1"+i),i}var l={SignificantFigures:class{constructor(e){this.order=i(e),this.mantissa=a(e),this.positive=o(e),this.sigFigs=this.mantissa.length,this.sigDecs=this.order-this.mantissa.length}},displaySigFigs:function(e,t,n,l){const u=""+e;let d,p,c,h=i(u),f=a(u),g=o(u),m=!1;if(0==e||""==f||"0"==f){f="";for(let e=0;e<t;e++)f+="0";h=t+n,n<0&&-n>=t&&(m=!0)}else{if(p=h-f.length-n,c=t-f.length,d=Math.min(c,p),d<0){let e=r(f,-d);e.length>f.length+d&&(h++,p>c&&(e=r(e,1))),f=e}else if(d>0)for(let e=0;e<d;e++)f+="0";""!=f&&"0"!=f||(f="0",g=!0,h=1+n,0!=h&&(m=!0))}let y="";if(g||(y+="-"),l||f.length>20||h>4||h<-2||h-f.length>0&&s(f)>0||m)y+=f.charAt(0),f.length>1&&(y+="."+f.substring(1,f.length)),h-1!=0&&(y+=" x 10^"+(h-1));else{let e="",t="",n=!0;if(h>0)if(f.length>h)e=f.substring(0,h),t=f.substring(h,f.length);else{e=f,n=0!=s(f);for(let t=0;t<h-f.length;t++)e+="0"}else{for(let e=0;e<-h;e++)t+="0";t+=f}y+=(""==e?"0":e)+(n?".":"")+t}return y}};t.default=l},FGwj:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=o(n("pVnL")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("fhzG")),d=o(n("i8i4")),p=o(n("oLyU")),c=o(n("rGVj")),h=n("reBI"),f=n("eAf/"),g=n("4PhQ"),m=o(n("jH0K")),y=o(n("APgo")),v=o(n("M++g")),b=o(n("7xiW")),x=o(n("FvPh")),C=o(n("eMwK")),k=n("j8wP"),E=n("/4Qb"),w=o(n("uBl0")),M=o(n("XwLL")),T=o(n("yfnS")),S=o(n("p8fL")),P=s(n("HEOz"));const{deepEq:I,getGridStep:_,captureScratchpadTouchStart:N}=w.default,{assert:A}=S.default,{keypadElementPropType:R}=h.propTypes,O={url:null};const D={apiOptions:k.Options.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}};function L(e){return e.constraints.fixed?T.default.DYNAMIC:T.default.INTERACTIVE}function F(e){return String(M.default.roundTo(9,e))}function U(e){return[r.createElement(x.default,{key:"("},"("),F(e[0]),r.createElement(x.default,{key:","},", {}"),F(e[1]),r.createElement(x.default,{key:")"},")")]}function q(e,t){return e=p.default.clone(e).sort(f.point.compare),t=p.default.clone(t).sort(f.point.compare),p.default.all(p.default.map(e,(function(e,n){const s=t[n];return f.point.equal(e,s)})))}const H=e=>e.customKeypad?C.default:e.staticRender?b.default:v.default,G={apply:function(e){return z[e.type].isValid(e)?z[e.type].apply(e):p.default.identity},append:function(e,t){const n=G._appendAndCollapseLastTwo(e,t);return G._collapseFinalNoOps(n)},_collapseFinalNoOps:function(e){return e.length&&G.isNoOp(p.default.last(e))?p.default.initial(e):e},_appendAndCollapseLastTwo:function(e,t){if(!e.length)return[t];const n=G.collapse(p.default.last(e),t);return p.default.initial(e).concat(n)},isNoOp:function(e){return z[e.type].isNoOp(e)},collapse:function(e,t){return e.type!==t.type?[e,t]:G.isEmpty(e)&&G.isEmpty(t)?[]:G.isValid(e)&&G.isValid(t)?G._collapseValidMonotypedTransforms(e,t):[e,t]},isValid:function(e){return z[e.type].isValid(e)},isEmpty:function(e){return z[e.type].isEmpty(e)},_collapseValidMonotypedTransforms:function(e,t){let n=z[e.type].collapse(e,t);return n?(p.default.isArray(n)||(n=[n]),p.default.each(n,(function(t){t.type=e.type})),n):[e,t]},toTeX:function(e){return z[e.type].toTeX(e)},ListItem:(0,u.default)({displayName:"ListItem",render:function(){if("dynamic"===this.props.mode)return r.createElement("div",null,G.toTeX(this.props.transform));if("interactive"===this.props.mode){const e=z[this.props.transform.type].Input;return r.createElement(e,(0,i.default)({ref:"transform",onChange:this.handleChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions},this.props.transform))}throw new g.KAError("Invalid mode: "+this.props.mode,g.Errors.Internal)},value:function(){return"interactive"===this.props.mode?p.default.extend({type:this.props.transform.type},this.refs.transform.value()):this.props.transform},handleChange:p.default.debounce((function(e){this.props.onChange(this.value(),e)}),300),_getComponentAtPath:function(e){const t=this.refs.transform,n=p.default.head(e);return t.refs[n]},focus:function(){const e=this.refs.transform,t=p.default.head(e.getInputPaths());t&&this.focusInputPath(t)},focusInputPath:function(e){this._getComponentAtPath(e).focus()},blurInputPath:function(e){this._getComponentAtPath(e).blur()},getDOMNodeForPath:function(e){return d.default.findDOMNode(this._getComponentAtPath(e))},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){t.length&&(t=parseFloat(t),isNaN(t))||this.refs.transform.setInputValue(e,t,n)},getInputPaths:function(){return"dynamic"===this.props.mode?[]:this.refs.transform.getInputPaths()}})},z={translation:{verbName:P._("Translate"),nounName:P._("Translation"),lowerNounName:P._("translation"),apply:function(e){return function(t){return f.vector.add(t,e.vector)}},isValid:function(e){return p.default.isFinite(e.vector[0])&&p.default.isFinite(e.vector[1])},isEmpty:function(e){return null===e.vector[0]&&null===e.vector[1]},isNoOp:function(e){return f.vector.equal(e.vector,[0,0])},collapse:function(e,t){return{vector:f.vector.add(e.vector,t.vector)}},toTeX:function(e){return P.$_("Translation by %(vector)s",{vector:(t=e.vector,[r.createElement(x.default,{key:"<"},P.doNotTranslate("\\langle")),F(t[0]),r.createElement(x.default,{key:","},", {}"),F(t[1]),r.createElement(x.default,{key:">"},P.doNotTranslate("\\rangle"))])});var t},Input:class extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{vector:this.props.vector||[null,null]}),(0,a.default)(this,"value",(()=>({vector:[this.refs.x.getValue(),this.refs.y.getValue()]}))),(0,a.default)(this,"setInputValue",((e,t,n)=>{const s=p.default.first(e),o=p.default.clone(this.state.vector);"x"===s?o[0]=t:"y"===s&&(o[1]=t),this.setState({vector:o},(()=>{this.props.onChange(n)}))})),(0,a.default)(this,"getInputPaths",(()=>[["x"],["y"]]))}componentDidUpdate(e){I(this.props,e)||this.setState({vector:this.props.vector})}render(){const e=H(this.props.apiOptions),t=[r.createElement(x.default,{key:"<"},P.doNotTranslate("\\langle")),r.createElement(e,{key:"vec_x",ref:"x",placeholder:0,value:this.state.vector[0],useArrowKeys:!0,onChange:e=>{const t=this.state.vector[1];this.setState({vector:[e,t]},(()=>{this.props.onChange()}))},onFocus:p.default.partial(this.props.onFocus,"x"),onBlur:p.default.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:","},", {}"),r.createElement(e,{key:"vec_y",ref:"y",placeholder:0,value:this.state.vector[1],useArrowKeys:!0,onChange:e=>{const t=this.state.vector[0];this.setState({vector:[t,e]},(()=>{this.props.onChange()}))},onFocus:p.default.partial(this.props.onFocus,"y"),onBlur:p.default.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:">"},P.doNotTranslate("\\rangle"))];return r.createElement("div",null,P.$_("Translation by %(vector)s",{vector:t}))}}},rotation:{verbName:P._("Rotate"),nounName:P._("Rotation"),lowerNounName:P._("rotation"),apply:function(e){return function(t){return f.point.rotateDeg(t,e.angleDeg,e.center)}},isValid:function(e){return p.default.isFinite(e.angleDeg)&&p.default.isFinite(e.center[0])&&p.default.isFinite(e.center[1])},isEmpty:function(e){return null===e.angleDeg&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return f.number.equal(e.angleDeg,0)},collapse:function(e,t){return!!f.point.equal(e.center,t.center)&&{center:e.center,angleDeg:e.angleDeg+t.angleDeg}},toTeX:function(e){return P.$_("Rotation by %(degrees)s about %(point)s",{degrees:(t=e.angleDeg,F(t)+"°"),point:U(e.center)});var t},Input:class extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{center:this.props.center||[null,null],angleDeg:this.props.angleDeg||null}),(0,a.default)(this,"value",(()=>({angleDeg:this.refs.angleDeg.getValue(),center:[this.refs.centerX.getValue(),this.refs.centerY.getValue()]}))),(0,a.default)(this,"setInputValue",((e,t,n)=>{const s=p.default.first(e);let o=p.default.clone(this.state.angleDeg);const a=p.default.clone(this.state.center);"angleDeg"===s?o=t:"centerX"===s?a[0]=t:"centerY"===s&&(a[1]=t),this.setState({angleDeg:o,center:a},(()=>{this.props.onChange(n)}))})),(0,a.default)(this,"getInputPaths",(()=>[["centerX"],["centerY"],["angleDeg"]]))}componentDidUpdate(e){I(this.props,e)||this.setState({center:this.props.center,angleDeg:this.props.angleDeg})}render(){const e=H(this.props.apiOptions),t=[r.createElement(x.default,{key:"("},"("),r.createElement(e,{key:"X",ref:"centerX",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:e=>{const t=this.state.center[1];this.setState({center:[e,t]},(()=>{this.props.onChange()}))},onFocus:p.default.partial(this.props.onFocus,"centerX"),onBlur:p.default.partial(this.props.onBlur,"centerX"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:","},", {}"),r.createElement(e,{key:"Y",ref:"centerY",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:e=>{const t=this.state.center[0];this.setState({center:[t,e]},(()=>{this.props.onChange()}))},onFocus:p.default.partial(this.props.onFocus,"centerY"),onBlur:p.default.partial(this.props.onBlur,"centerY"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:")"},")")],n=[r.createElement(e,{key:"deg",ref:"angleDeg",placeholder:0,value:this.state.angleDeg,useArrowKeys:!0,onChange:e=>{this.setState({angleDeg:e},(()=>{this.props.onChange()}))},onFocus:p.default.partial(this.props.onFocus,"angleDeg"),onBlur:p.default.partial(this.props.onBlur,"angleDeg"),keypadElement:this.props.keypadElement}),"°"],s=P.$_("Rotation about %(point)s by %(degrees)s",{point:t,degrees:n});return r.createElement("div",null,s)}}},reflection:{verbName:P._("Reflect"),nounName:P._("Reflection"),lowerNounName:P._("reflection"),apply:function(e){return function(t){return f.point.reflectOverLine(t,e.line)}},isValid:function(e){return p.default.all(p.default.flatten(e.line),p.default.isFinite)&&!f.point.equal(e.line[0],e.line[1])},isEmpty:function(e){return p.default.all(p.default.flatten(e.line),p.default.isNull)},isNoOp:function(e){return!1},collapse:function(e,t){return!!f.line.equal(e.line,t.line)&&[]},toTeX:function(e){const t=e.line[0],n=e.line[1];return P.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:U(t),point2:U(n)})},Input:class extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{line:this.props.line||[[null,null],[null,null]]}),(0,a.default)(this,"changePoint",((e,t,n,s)=>{const o=p.default.map(this.state.line,p.default.clone);o[e][t]=n,this.setState({line:o},(()=>{this.props.onChange(s)}))})),(0,a.default)(this,"value",(()=>({line:[[this.refs.x1.getValue(),this.refs.y1.getValue()],[this.refs.x2.getValue(),this.refs.y2.getValue()]]}))),(0,a.default)(this,"setInputValue",((e,t,n)=>{const s=p.default.first(e);let o,a;"x"===s[0]?o=0:"y"===s[0]&&(o=1),"1"===s[1]?a=0:"2"===s[1]&&(a=1),this.changePoint(a,o,t,n)})),(0,a.default)(this,"getInputPaths",(()=>[["x1"],["y1"],["x2"],["y2"]]))}componentDidUpdate(e){I(this.props,e)||this.setState({line:this.props.line})}render(){const e=H(this.props.apiOptions),t=[r.createElement(x.default,{key:"("},"("),r.createElement(e,{key:"x1",ref:"x1",value:this.state.line[0][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,0),onFocus:p.default.partial(this.props.onFocus,"x1"),onBlur:p.default.partial(this.props.onBlur,"x1"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:","},", {}"),r.createElement(e,{key:"y1",ref:"y1",value:this.state.line[0][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,1),onFocus:p.default.partial(this.props.onFocus,"y1"),onBlur:p.default.partial(this.props.onBlur,"y1"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:")"},")")],n=[r.createElement(x.default,{key:"("},"("),r.createElement(e,{key:"x2",ref:"x2",value:this.state.line[1][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,0),onFocus:p.default.partial(this.props.onFocus,"x2"),onBlur:p.default.partial(this.props.onBlur,"x2"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:","},", {}"),r.createElement(e,{key:"y2",ref:"y2",value:this.state.line[1][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,1),onFocus:p.default.partial(this.props.onFocus,"y2"),onBlur:p.default.partial(this.props.onBlur,"y2"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:")"},")")];return r.createElement("div",null,P.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:t,point2:n}))}}},dilation:{verbName:P._("Dilate"),nounName:P._("Dilation"),lowerNounName:P._("dilation"),apply:function(e){return function(t){return function(e,t,n){const s=f.vector.subtract(e,t),o=f.vector.scale(s,n);return f.vector.add(t,o)}(t,e.center,e.scale)}},isValid:function(e){return p.default.isFinite(e.scale)&&p.default.isFinite(e.center[0])&&p.default.isFinite(e.center[1])},isEmpty:function(e){return null===e.scale&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return f.number.equal(e.scale,1)},collapse:function(e,t){return!!f.point.equal(e.center,t.center)&&{center:e.center,scale:e.scale*t.scale}},toTeX:function(e){const t=function(e){const t=M.default.toFraction(e,f.number.DEFAULT_TOLERANCE);return 1===t[1]?F(e):F(t[0])+"/"+F(t[1])}(e.scale);return P.$_("Dilation of scale %(scale)s about %(point)s",{scale:t,point:U(e.center)})},Input:class extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{center:this.props.center||[null,null],scale:this.props.scale||null}),(0,a.default)(this,"value",(()=>({scale:this.refs.scale.getValue(),center:[this.refs.x.getValue(),this.refs.y.getValue()]}))),(0,a.default)(this,"setInputValue",((e,t,n)=>{const s=p.default.first(e);let o=this.state.scale;const a=p.default.clone(this.state.center);"x"===s?a[0]=t:"y"===s?a[1]=t:"scale"===s&&(o=t),this.setState({scale:o,center:a},(()=>{this.props.onChange(n)}))})),(0,a.default)(this,"getInputPaths",(()=>[["x"],["y"],["scale"]]))}componentDidUpdate(e){I(this.props,e)||this.setState({center:this.props.center,scale:this.props.scale})}render(){const e=H(this.props.apiOptions),t=[r.createElement(x.default,{key:"("},"("),r.createElement(e,{key:"point_x",ref:"x",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:e=>{const t=this.state.center[1];this.setState({center:[e,t]},(()=>{this.props.onChange()}))},onFocus:p.default.partial(this.props.onFocus,"x"),onBlur:p.default.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:","},", {}"),r.createElement(e,{key:"point_y",ref:"y",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:e=>{const t=this.state.center[0];this.setState({center:[t,e]},(()=>{this.props.onChange()}))},onFocus:p.default.partial(this.props.onFocus,"y"),onBlur:p.default.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),r.createElement(x.default,{key:")"},")")],n=r.createElement(e,{ref:"scale",placeholder:1,value:this.state.scale,useArrowKeys:!0,onChange:e=>{this.setState({scale:e},(()=>{this.props.onChange()}))},onFocus:p.default.partial(this.props.onFocus,"scale"),onBlur:p.default.partial(this.props.onBlur,"scale"),keypadElement:this.props.keypadElement});return r.createElement("div",null,P.$_("Dilation about %(point)s by %(scale)s",{point:t,scale:n}))}}}},B={getPointCountForType:function(e){const t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new g.KAError("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t),g.Errors.Internal);const n=p.default.map(t.shape.coords,(function(o){let a=!1,i=o;const r=e.addMovablePoint({coord:o,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:function(e,o){a||(i=r.coord,a=!0);let l=f.vector.subtract([e,o],r.coord);t.onMove&&(l=t.onMove(l[0],l[1])),t.translatable&&p.default.each(n,(function(e){e!==r&&e.setCoord(f.vector.add(e.coord,l))}));const u=r.coord,d=f.vector.add(r.coord,l);return r.coord=d,s.update(),r.coord=u,d},onMoveEnd:function(){if(t.onMoveEnd&&a){a=!1;const e=f.vector.subtract(r.coord,i);t.onMoveEnd(e[0],e[1])}s.update()}});return r.bounded=!0,r})),s=B.addShape(e,t,n),o=s.remove;return s.remove=function(){o.apply(s),p.default.invoke(n,"remove")},s},addShape:function(e,t,n){n=n||t.shape.coords;const s=B._typesOf(t.shape),o=t.shape.options||B.defaultOptions(s),a=B._mapTypes(s,n,(function(n,s,a){const i=p.default.extend({},t,o[a]);return B._addType(e,n,s,i)})),i=p.default.filter(p.default.pluck(a,"update"),p.default.identity),r=p.default.filter(p.default.pluck(a,"remove"),p.default.identity),l=function(){return p.default.map(a,(function(e){return e.getOptions?e.getOptions():{}}))};return{type:s,points:n,update:function(){p.default.invoke(i,"call")},remove:function(){p.default.invoke(r,"call")},toJSON:function(){const e=p.default.map(n,(function(e){return p.default.isArray(e)?e:e.coord}));return{type:s,coords:e,options:l()}},getOptions:l}},equal:function(e,t){const n=B._typesOf(e),s=B._typesOf(t);if(n.length!==s.length)return!1;const o=B._mapTypes(n,e.coords,B._combine),a=B._mapTypes(s,t.coords,B._combine);return p.default.all(p.default.map(o,(function(e,t){const n=a[t];return e.type===n.type&&B._forType(e.type).equal(e.coords,n.coords)})))},_typesOf:function(e){let t=e.type;return p.default.isArray(t)||(t=[t]),p.default.map(t,(function(e){return"polygon"===e?"polygon-3":e}))},defaultOptions:function(e){return p.default.map(e,(function(e){const t=B._forType(e).defaultOptions;return p.default.extend({},t)}))},_forType:function(e){const t=e.split("-")[0];return B[t]},_mapTypes:function(e,t,n,s){return p.default.map(e,(function(e,o){const a=B.getPointCountForType(e),i=p.default.first(t,a);return t=p.default.rest(t,a),n.call(s,e,i,o)}))},_addType:function(e,t,n,s){const o=p.default.isArray(n[0])?{coordA:n[0],coordZ:n[1]}:{pointA:n[0],pointZ:n[1]};if("polygon"===(t=t.split("-")[0])){const t=e.addMovablePolygon(p.default.extend({},s,{fixed:!s.editable,snapX:s.snap&&s.snap[0]||0,snapY:s.snap&&s.snap[1]||0,points:n,constrainToGraph:!1}));return{update:t.transform.bind(t),remove:t.remove.bind(t)}}if("line"===t||"lineSegment"===t){const n=e.addMovableLineSegment(p.default.extend({},s,o,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:n.transform.bind(n,!0),remove:n.remove.bind(n)}}if("angle"===t){const t=!!s.editable&&null,o=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:n,normalStyle:s.normalStyle,reflex:s.reflex});return p.default.isArray(n[0])||s.editable||(n[0].remove(),n[2].remove()),{update:o.update.bind(o,t),remove:o.remove.bind(o),getOptions:function(){return{reflex:o.isReflex()}}}}if("circle"===t){let t={remove:p.default.identity};const o=function(){const o=n[0].coord||n[0],a=n[1].coord||n[1],i=f.point.distanceToPoint(o,a);t.remove(),t=e.circle(o,i,p.default.extend({stroke:T.default.DYNAMIC,"stroke-width":2},s.normalStyle))};return o(),n[1].remove&&!s.editable&&n[1].remove(),{update:o,remove:function(){t.remove()}}}if("point"===t)return{update:null,remove:null};throw new g.KAError("Invalid shape type "+t,g.Errors.Internal)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:q},line:{equal:f.line.equal},lineSegment:{equal:q},angle:{equal:function(e,t){if(!f.point.equal(e[1],t[1]))return!1;const n=[e[1],e[0]],s=[e[1],e[2]],o=[t[1],t[0]],a=[t[1],t[2]],i=f.ray.equal(n,o)&&f.ray.equal(s,a),r=f.ray.equal(n,a)&&f.ray.equal(s,o);return i||r},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){const n=f.point.distanceToPoint(e[0],e[1]),s=f.point.distanceToPoint(t[0],t[1]);return f.point.equal(e[0],t[0])&&f.number.equal(n,s)}},point:{equal:f.point.equal}},V=G.ListItem;class W extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"_transformationRefs",(()=>p.default.times(this.props.transformations.length,(e=>this.refs["transformation"+e])))),(0,a.default)(this,"value",(()=>p.default.invoke(this._transformationRefs(),"value"))),(0,a.default)(this,"handleChange",((e,t)=>{this.props.onChange(this.value(),t)})),(0,a.default)(this,"focusLast",(()=>{const e=this._transformationRefs();0!==e.length&&p.default.last(e).focus()}))}render(){if("static"===this.props.mode)return r.createElement("span",null);const e=p.default.map(this.props.transformations,(function(e,t){return r.createElement(V,{ref:"transformation"+t,key:"transformation"+t,transform:e,mode:this.props.mode,onChange:this.handleChange,onFocus:p.default.partial(this.props.onFocus,""+t),onBlur:p.default.partial(this.props.onBlur,""+t),keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions})}),this);return r.createElement("div",{className:"perseus-transformation-list"},e)}}class j extends r.Component{render(){const e=this.props.toggled?"simple-button exercise-orange toggled highlighted-tool-button":"simple-button";return r.createElement("button",{type:"button",className:e,disabled:this.props.disabled,onClick:this.props.onClick,onTouchStart:N},this.props.children)}}class Y extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{selected:null}),(0,a.default)(this,"changeSelected",(e=>{this.props.removeTool(this.state.selected),e&&e!==this.state.selected?(this.props.addTool(e),this.setState({selected:e})):this.setState({selected:null})}))}render(){const e=p.default.map(z,(function(e,t){if(this.props.enabled[t])return r.createElement(j,{key:t,disabled:this.props.apiOptions.readOnly,toggled:this.state.selected===t,onClick:this.changeSelected.bind(this,t)},e.verbName)}),this);return r.createElement("div",{className:"transformer-tools-bar"},r.createElement("span",{className:"simple-button-group"},e),r.createElement("button",{className:"transformer-undo-button simple-button",type:"button",disabled:this.props.apiOptions.readOnly,onClick:this.props.onUndoClick,onTouchStart:N},r.createElement(y.default,E.iconUndo)," "+P._("Undo")),r.createElement("div",{className:"clear"}))}}class X extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"changeSelected",(e=>{e&&this.props.addTool(e)}))}render(){const e=p.default.map(z,(function(e,t){if(this.props.enabled[t])return r.createElement(j,{key:t,toggled:!1,disabled:this.props.apiOptions.readOnly,onClick:this.changeSelected.bind(this,t)},r.createElement(y.default,E.iconPlus)," ",e.nounName)}),this);return r.createElement("div",{className:"transformer-tools-bar"},e,r.createElement("button",{className:"transformer-undo-button simple-button",type:"button",onClick:this.props.onUndoClick,disabled:this.props.apiOptions.readOnly,onTouchStart:N},r.createElement(y.default,E.iconUndo)," "+P._("Undo")),r.createElement("div",{className:"clear"}))}}const K=(0,u.default)({displayName:"Transformer",propTypes:{apiOptions:k.Options.propTypes,keypadElement:R,trackInteraction:l.default.func.isRequired},getDefaultProps:function(){return p.default.defaults({transformations:[]},D)},render:function(){const e=p.default.extend(function(e,t){const n=(e=e||{}).labels||["x","y"],s=e.range||[[-10,10],[-10,10]],o=e.step||[1,1];return{box:[t,t],labels:n,range:s,step:o,gridStep:e.gridStep||_(s,o,t),valid:!0,backgroundImage:O,markings:"grid",showProtractor:!1}}(this.props.graph,400),this.props.graph),t="interactive"===this.props.graphMode,n=t?Y:X,s=r.createElement("div",{style:{width:e.box[0]}},r.createElement(n,{ref:"toolsBar",enabled:(o=this.props.tools,a="enabled",p.default.object(p.default.map(o,(function(e,t){return[t,e[a]]})))),apiOptions:this.props.apiOptions,addTool:this.addTool,removeTool:this.removeTool,onUndoClick:this.handleUndoClick}));var o,a;return r.createElement("div",{className:"perseus-widget perseus-widget-transformer"},r.createElement(m.default,{ref:"graph",box:e.box,range:e.range,labels:e.labels,step:e.step,gridStep:e.gridStep,markings:e.markings,backgroundImage:e.backgroundImage,showProtractor:e.showProtractor,onGraphieUpdated:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!t&&P._("Add transformations below:"),"static"===this.props.graphMode&&[r.createElement("br",{key:"static-br"}),r.createElement("em",{key:"static-nomove"}," ",P._("Note: For this question, the shape will not move.")," ")],t&&s,r.createElement(W,{ref:"transformationList",mode:this.props.listMode,transformations:this.props.transformations,onChange:this.setTransformationProps,onFocus:this._handleFocus,onBlur:this._handleBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions}),!t&&s)},componentDidMount:function(){this.setupGraphie(this.graphie())},componentDidUpdate:function(e){this.shouldSetupGraphie(this.props,e)?this.refs.graph.reset():I(this.props.transformations,this.transformations)||this.setTransformations(this.props.transformations)},shouldSetupGraphie:function(e,t){return!I(t.starting,e.starting)||(t.graphMode!==e.graphMode||(t.listMode!==e.listMode||(t.drawSolutionShape!==e.drawSolutionShape||(!(!e.drawSolutionShape||I(t.correct.shape,e.correct.shape))||!I(this.tools,e.tools)))))},graphie:function(){return this.refs.graph.graphie()},setupGraphie:function(e){this.props.drawSolutionShape&&this.props.correct.shape&&this.props.correct.shape.coords&&B.addShape(e,{fixed:!0,shape:this.props.correct.shape,normalStyle:{stroke:T.default.GRAY,"stroke-dasharray":"","stroke-width":2}}),this.currentTool=null,this.refs.toolsBar.changeSelected(null),this.addTransformerShape(this.props.starting.shape,!1),this.setTransformations(this.props.transformations),this.tools={translation:p.default.clone(this.props.tools.translation),rotation:p.default.clone(this.props.tools.rotation),reflection:p.default.clone(this.props.tools.reflection),dilation:p.default.clone(this.props.tools.dilation)}},setTransformations:function(e){this.resetCoords(),this.transformations=p.default.clone(e),p.default.each(this.transformations,this.applyTransform)},addTransformerShape:function(e,t){const n=this,s=this.graphie();this.shape=B.addMovableShape(s,{shape:e,editable:!1,showPoints:"static"!==this.props.graphMode,translatable:t,onMove:function(e,t){return e=M.default.roundToNearest(s.snap[0],e),t=M.default.roundToNearest(s.snap[1],t),n.addTransform({type:"translation",vector:[e,t]}),[e,t]},normalPointStyle:{fill:t?T.default.INTERACTIVE:T.default.DYNAMIC,stroke:t?T.default.INTERACTIVE:T.default.DYNAMIC},highlightPointStyle:{fill:T.default.INTERACTING,stroke:T.default.INTERACTING}})},addTool:function(e){const t=this;if("interactive"===this.props.graphMode)if("translation"===e)this.currentTool=this.addTranslationTool();else if("rotation"===e)this.currentTool=this.addRotationTool();else if("reflection"===e)this.currentTool=this.addReflectionTool();else{if("dilation"!==e)throw new g.KAError("Invalid tool id: "+e,g.Errors.Internal);this.currentTool=this.addDilationTool()}else{let n;if("translation"===e)n={type:e,vector:[null,null]};else if("rotation"===e)n={type:e,center:[null,null],angleDeg:null};else if("reflection"===e)n={type:e,line:[[null,null],[null,null]]};else{if("dilation"!==e)throw new g.KAError("Invalid tool id: "+e,g.Errors.Internal);n={type:e,center:[null,null],scale:null}}this.doTransform(n,(function(){t.refs.transformationList.focusLast()}))}},removeTool:function(e){this.currentTool&&this.currentTool.remove(),this.currentTool=null},addTranslationTool:function(){const e=this;return this.shape.remove(),this.addTransformerShape(this.shape.toJSON(),!0),{remove:function(){e.shape.remove(),e.addTransformerShape(e.shape.toJSON(),!1)}}},snapCoord:function(e){const t=this.graphie();return p.default.map(e,(function(e,n){return M.default.roundToNearest(t.snap[n],e)}))},normalizeReflectionCoords:function(e){const t=this.snapCoord(f.line.midpoint(e)),n=f.vector.polarDegFromCart(f.vector.subtract(e[0],e[1])),s=[1,M.default.roundToNearest(45,n[1])],o=f.vector.cartFromPolarDeg(s);return p.default.map([-1,1],(function(e){const n=f.vector.add(t,f.vector.scale(o,e*this.scaleToCurrentRange(2)));return this.snapCoord(n)}),this)},addReflectionTool:function(){const e=this.props.tools.reflection;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),s=function(){t.changeTool("reflection",{coords:p.default.pluck(a,"coord")})},o=this.normalizeReflectionCoords(e.coords),a=p.default.map(o,(function(e){return n.addMovablePoint({coord:e,visible:!1})}),this);let i;const r=L(e);n.style({},(function(){i=n.addMovableLineSegment({fixed:e.constraints.fixed,constraints:e.constraints,pointA:a[0],pointZ:a[1],snapX:n.snap[0],snapY:n.snap[1],extendLine:!0,normalStyle:{stroke:r,"stroke-width":2,"stroke-dasharray":"- "},highlightStyle:{stroke:T.default.INTERACTING,"stroke-width":2,"stroke-dasharray":"- "},movePointsWithLine:!0,onMoveEnd:s})}));const l=n.addReflectButton({fixed:e.constraints.fixed,line:i,size:this.scaleToCurrentRange(1),onClick:function(){t.doTransform({type:"reflection",line:p.default.pluck(a,"coord")}),u&&(u.setCoord(f.vector.add(l.coord,f.vector.subtract(l.coord,u.coord))),u.update())},normalStyle:{stroke:r,"stroke-width":2,fill:r},highlightStyle:{stroke:T.default.INTERACTING,"stroke-width":3,fill:T.default.INTERACTING},onMoveEnd:s});let u=null;if(!e.constraints.fixed){const e=f.vector.polarDegFromCart(f.vector.subtract(a[1].coord,a[0].coord))[1]+90;u=n.addRotateHandle({center:l,radius:this.scaleToCurrentRange(2),angleDeg:e,width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),lengthAngle:17,onMove:function(e){return M.default.roundToNearest(45,e)},onMoveEnd:s})}return(0,c.default)(i).on("move",(function(){l.update(),(0,c.default)(l).trigger("move")})),u&&(0,c.default)(u).on("move",(function(){const e=t.snapCoord(u.coord),n=f.vector.subtract(e,l.coord),s=l.isFlipped()?1:0;a[s].setCoord(f.vector.add(l.coord,f.vector.rotateDeg(n,90))),a[1-s].setCoord(f.vector.add(l.coord,f.vector.rotateDeg(n,-90))),i.transform(!0),l.update()})),{remove:function(){l.remove(),u&&u.remove(),i.remove(),a[0].remove(),a[1].remove()}}},scaleToCurrentRange:function(e){return function(e,t){const n=t[0][1]-t[0][0],s=t[1][1]-t[1][0];return e*Math.max(n,s)/20}(e,this.refs.graph.props.range)},addRotationTool:function(){const e=this.props.tools.rotation;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),s=L(e);return this.rotatePoint=n.addMovablePoint({constraints:e.constraints,coord:e.coord,snapX:n.snap[0],snapY:n.snap[1],normalStyle:{"stroke-dasharray":"",stroke:s,fill:s},highlightStyle:{"stroke-dasharray":"",stroke:T.default.INTERACTING,fill:T.default.INTERACTING}}),this.rotateHandle=n.addRotateHandle({center:this.rotatePoint,radius:this.scaleToCurrentRange(1.5),width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),onMove:function(e,n){const s=t.getRotationTransformFromAngle(t.rotatePoint.coord,e-n);return t.doTransform(s),n+s.angleDeg}}),this.rotatePoint.onMoveEnd=function(e,n){t.changeTool("rotation",{coord:[e,n]})},{remove:function(){t.rotateHandle.remove(),t.rotatePoint.remove()}}},addDilationTool:function(){const e=this.props.tools.dilation;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),s=L(e);t.dilationCircle=n.addCircleGraph({centerConstraints:e.constraints,center:e.coord,radius:t.scaleToCurrentRange(2),snapX:n.snap[0],snapY:n.snap[1],minRadius:t.scaleToCurrentRange(1),snapRadius:t.scaleToCurrentRange(.5),onResize:function(e,n){t.doTransform({type:"dilation",center:t.dilationCircle.centerPoint.coord,scale:e/n})},circleNormalStyle:{stroke:s,"stroke-width":2,"stroke-dasharray":"- ","fill-opacity":0},circleHighlightStyle:{stroke:T.default.INTERACTING,"stroke-width":2,"stroke-dasharray":"",fill:T.default.INTERACTING,"fill-opacity":.05},centerNormalStyle:{stroke:s,fill:s,"stroke-width":2,"stroke-dasharray":""},centerHighlightStyle:{stroke:s,fill:s,"stroke-width":2,"stroke-dasharray":""}});const o=this.dilationCircle.centerPoint.onMoveEnd;return this.dilationCircle.centerPoint.onMoveEnd=function(){o&&o.apply(this,p.default.toArray(arguments)),t.changeTool("dilation",{coord:t.dilationCircle.centerPoint.coord})},{remove:function(){t.dilationCircle.remove()}}},getRotationTransformFromAngle:function(e,t){(t=(t+360)%360)>180&&(t-=360);return{type:"rotation",center:e,angleDeg:15*Math.round(t/15)}},doTransform:function(e,t){this.applyTransform(e),this.addTransform(e,t)},applyTransform:function(e){if("static"!==this.props.graphMode){const t=G.apply(e);this.applyCoordTransformation(t)}},applyCoordTransformation:function(e){p.default.each(this.shape.points,(function(t){const n=e(t.coord);t.setCoord(n)})),this.shape.update()},resetCoords:function(){const e=this.props.starting.shape.coords;p.default.each(this.shape.points,(function(t,n){t.setCoord(e[n])})),this.shape.update()},handleUndoClick:function(){this.refs.toolsBar.changeSelected(null),this.props.transformations.length&&this.props.onChange({transformations:p.default.initial(this.props.transformations)})},setTransformationProps:function(e,t){this.props.onChange({transformations:e},t)},addTransform:function(e,t){this.transformations=G.append(this.transformations,e),this.props.onChange({transformations:p.default.clone(this.transformations)},t)},changeTool:function(e,t){const n=p.default.clone(this.props.tools);n[e]=p.default.extend({},this.props.tools[e],t),this.tools[e]=p.default.clone(n[e]),this.props.onChange({tools:n}),this.props.trackInteraction()},simpleValidate:function(e){return K.validate(this.getUserInput(),e)},getCoords:function(){const e=this.props.starting.shape.coords,t=this.props.transformations;return p.default.reduce(t,(function(e,t){return p.default.map(e,G.apply(t))}),e)},getEditorJSON:function(){const e=p.default.pick(this.props,"grading","starting","graphMode","listMode","tools","drawSolutionShape","gradeEmpty");return e.graph=this.refs.graph.toJSON(),e.version=1.2,e.answer=this.getUserInput(),e},getUserInput:function(){return{transformations:this.props.transformations,shape:{type:this.shape.type,coords:this.getCoords(),options:this.shape.getOptions()}}},_handleFocus:function(){const e=Array.prototype.slice.call(arguments);this.props.onFocus(e)},_handleBlur:function(){const e=Array.prototype.slice.call(arguments);this.props.onBlur(e)},_getTransformationForID:function(e){const t=["transformationList","transformation"+e];let n=this;return p.default.each(t,(e=>{n=n.refs[e]})),n},getInputPaths:function(){if("static"===this.props.listMode)return[];let e=[];return p.default.each(this.props.transformations,((t,n)=>{const s=this._getTransformationForID(n).getInputPaths(),o=p.default.map(s,(e=>[""+n].concat(e)));e=e.concat(o)})),e},_passToInner:function(e,t){if(!t||!t.length)return;const n=p.default.rest(t),s=[n].concat(p.default.rest(arguments,2)),o=p.default.head(t),a=this._getTransformationForID(o);return a[e].apply(a,s)},focus:function(){const e=this.getInputPaths();return e.length>0&&(this.focusInputPath(e[0]),!0)},focusInputPath:function(e){return 0!==e.length&&(A(e.length>=2),this._passToInner("focusInputPath",e))},blurInputPath:function(e){return 0!==e.length&&(A(e.length>=2),this._passToInner("blurInputPath",e))},setInputValue:function(e,t,n){return A(e.length>=2),this._passToInner("setInputValue",e,t,n)},getDOMNodeForPath:function(e){return A(e.length>=2),this._passToInner("getDOMNodeForPath",e)},getGrammarTypeForPath:function(e){return A(e.length>=2),this._passToInner("getGrammarTypeForPath",e)}});p.default.extend(K,{validate:function(e,t){for(const n in z)if(t.tools[n].required){if(!p.default.any(p.default.map(e.transformations,(function(e){return e.type===n&&!G.isEmpty(e)&&!G.isNoOp(e)}))))return{type:"invalid",message:P._("Your transformation must use a %(type)s.",{type:z[n].lowerNounName})}}return B.equal(e.shape,t.correct.shape)?{type:"points",earned:1,total:1,message:null}:!t.gradeEmpty&&I(e.shape.coords,t.starting.shape.coords)?{type:"invalid",message:P._("Use the interactive graph to define a correct transformation.")}:{type:"points",earned:0,total:1,message:null}}});var Q={name:"transformer",displayName:"Transformer",widget:K};t.default=Q},GbkG:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("fhzG")),d=o(n("oLyU")),p=o(n("rGVj")),c=n("eAf/"),h=o(n("bHYm")),f=o(n("yPu2")),g=o(n("uBl0")),m=o(n("ydm1")),y=o(n("Giaf")),v=o(n("T2HF")),b=o(n("yfnS")),x=n("NUXr"),C=n("UcaO"),k=s(n("+jAD")),E=o(n("INEF"));const{GrapherUtil:w,typeToButton:M,functionForType:T,DEFAULT_GRAPHER_PROPS:S}=E.default,P=y.default.MovablePoint,I=y.default.MovableLine;const _={padding:"5px 5px"};class N extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"_coords",(e=>{const t=(e=e||this.props).graph,n=e.model&&w.maybePointsFromNormalized(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||n||null})),(0,i.default)(this,"_asymptote",(e=>(e=e||this.props).asymptote)),(0,i.default)(this,"change",((...e)=>k.change.apply(this,e))),(0,i.default)(this,"renderPlot",(()=>{const e=this.props.model,t=this.props.graph.range[0],n=(0,a.default)({stroke:this.props.isMobile?b.default.BLUE_C:b.default.DYNAMIC},this.props.isMobile?{"stroke-width":3}:{}),s=e.getCoefficients(this._coords(),this._asymptote());if(!s)return;const o=e.getPropsForCoeffs(s,t);return r.createElement(e.Movable,(0,a.default)({},o,{key:this.props.model.url,range:t,style:n}))})),(0,i.default)(this,"renderAsymptote",(()=>{const e=this.props.model,t=this.props.graph,n=this._asymptote(),s={strokeDasharray:"- "};return n&&r.createElement(I,{onMove:(e,t)=>{const n=c.vector.subtract(e,t),s=d.default.map(this._asymptote(),(e=>c.vector.add(e,n)));this.props.onChange({asymptote:s})},constraints:[h.default.MovableLine.constraints.bound(),h.default.MovableLine.constraints.snap(),(n,s)=>{const o=c.vector.subtract(n,s),a=d.default.map(this._asymptote(),(e=>c.vector.add(e,o)));return!e.extraAsymptoteConstraint||e.extraAsymptoteConstraint(n,s,this._coords(),a,t)}],normalStyle:s,highlightStyle:s},d.default.map(n,((e,t)=>r.createElement(P,{key:"asymptoteCoord-".concat(t),coord:e,static:!0,draw:null,extendLine:!0,showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile}))))}))}render(){const e=d.default.map(this._coords(),((e,t)=>r.createElement(P,{key:t,coord:e,static:this.props.static,constraints:[h.default.MovablePoint.constraints.bound(),h.default.MovablePoint.constraints.snap(),e=>{const n=d.default.all(this._coords(),((n,s)=>t===s||!n||!c.number.equal(e[0],n[0])));if(!n)return!1;if(this.props.model&&this.props.model.extraCoordConstraint){const n=this.props.model.extraCoordConstraint,s=d.default.clone(this._coords()),o=d.default.clone(s[t]);return s[t]=e,n(e,o,s,this._asymptote(),this.props.graph)}return n}],onMove:(e,n)=>{let s;const o=this._asymptote();s=o&&this.props.model.allowReflectOverAsymptote&&function(e,t,n){const s=(e,t,n)=>(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]);return s(n[0],n[1],t)>0!=s(n[0],n[1],e)>0}(e,n,o)?d.default.map(this._coords(),(e=>c.point.reflectOverLine(e,o))):d.default.clone(this._coords()),s[t]=e,this.props.onChange({coords:s})},showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile}))),t=this.props.graph.box,n=this.props.graph.backgroundImage;let s=null;if(n.url){const e=t[0]/C.interactiveSizes.defaultBoxSize;s=r.createElement(f.default,{src:n.url,width:n.width,height:n.height,scale:e})}return r.createElement("div",{className:"perseus-widget perseus-widget-grapher",style:{width:t[0],height:this.props.flexibleType?"auto":t[1],boxSizing:"initial"}},r.createElement("div",{className:"graphie-container above-scratchpad",style:{width:t[0],height:t[1]}},s,r.createElement(y.default,(0,a.default)({},this.props.graph,{setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&e)))}}(0,i.default)(N,"propTypes",(0,a.default)({},k.propTypes,{flexibleType:l.default.bool,graph:l.default.any,hideHairlines:l.default.func,isMobile:l.default.bool,model:l.default.any,onChange:l.default.func,setDrawingAreaAvailable:l.default.func,showHairlines:l.default.func,showTooltips:l.default.bool,static:l.default.bool})),(0,i.default)(N,"defaultProps",{graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1});const A=(0,u.default)({displayName:"Grapher",propTypes:{apiOptions:l.default.any,availableTypes:l.default.arrayOf(l.default.any),containerSizeClass:x.containerSizeClassPropType.isRequired,graph:l.default.any,markings:l.default.string,onChange:l.default.func,plot:l.default.any,static:l.default.bool,trackInteraction:l.default.func.isRequired},getDefaultProps:function(){return S},render:function(){const e=this.props.plot.type,t=this.props.plot.coords,n=this.props.plot.asymptote,s=r.createElement("div",{style:_,className:"above-scratchpad"},r.createElement(m.default,{value:e,allowEmpty:!0,buttons:d.default.map(this.props.availableTypes,M),onChange:this.handleActiveTypeChange})),o=(0,x.getInteractiveBoxFromSizeClass)(this.props.containerSizeClass),i=(0,a.default)({},this.props.graph,w.getGridAndSnapSteps(this.props.graph,o[0]),{gridConfig:this._getGridConfig((0,a.default)({},this.props.graph,{box:o},w.getGridAndSnapSteps(this.props.graph,o[0])))}),l={graph:{box:o,range:i.range,step:i.step,snapStep:i.snapStep,backgroundImage:i.backgroundImage,options:i,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:e&&T(e),coords:t,asymptote:n,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return r.createElement("div",null,r.createElement(N,l),this.props.availableTypes.length>1&&s)},handlePlotChanges:function(e){const t=d.default.extend({},this.props.plot,e);this.props.onChange({plot:t}),this.props.trackInteraction()},handleActiveTypeChange:function(e){const t=this.props.graph,n=d.default.extend({},this.props.plot,w.defaultPlotProps(e,t));this.props.onChange({plot:n})},_getGridConfig:function(e){return d.default.map(e.step,(function(t,n){return g.default.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])}))},_calculateMobileTickStep(e,t,n){const s=g.default.constrainedTickStepsFromTickSteps(t,n);return s[0]=s[0]/e[0],s[1]=s[1]/e[1],s},_setupGraphie:function(e,t){const n=this.props.apiOptions.isMobile;if("graph"===t.markings?(e.graphInit({range:t.range,scale:d.default.pluck(t.gridConfig,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:n?this._calculateMobileTickStep(t.gridStep,t.step,t.range):d.default.pluck(t.gridConfig,"tickStep"),labelStep:1,unityLabels:d.default.pluck(t.gridConfig,"unityLabel"),isMobile:n}),e.label([0,t.range[1][1]],t.labels[1],n?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],n?"above left":"right")):"grid"===t.markings?e.graphInit({range:t.range,scale:d.default.pluck(t.gridConfig,"scale"),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:n}):"none"===t.markings&&e.init({range:t.range,scale:d.default.pluck(t.gridConfig,"scale")}),this.props.apiOptions.isMobile){const t={normalStyle:{strokeWidth:1}};this.horizHairline=new v.default(e,[0,0],[0,0],t),this.horizHairline.attr({stroke:b.default.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new v.default(e,[0,0],[0,0],t),this.vertHairline.attr({stroke:b.default.INTERACTIVE}),this.vertHairline.hide()}},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())},simpleValidate:function(e){return w.validate(this.getUserInput(),e)},getUserInput:function(){return A.getUserInputFromProps(this.props)},focus:p.default.noop}),R=e=>{const t={availableTypes:e.availableTypes,graph:e.graph};if(1===t.availableTypes.length){const e=t.graph,n=w.chooseType(t.availableTypes);t.plot=w.defaultPlotProps(n,e)}return t};d.default.extend(A,{validate:function(e,t){return w.validate(e,t)},getUserInputFromProps:function(e){return e.plot}});var O={name:"grapher",displayName:"Grapher",widget:A,transform:R,staticTransform:e=>d.default.extend({},R(e),{availableTypes:[e.correct.type],plot:e.correct})};t.default=O},HQqP:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("pVnL"));const a=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),i=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");function r(e){this.message=e}function l(e,t,n){const s=t[0],a=t.slice(1);let i;i=Array.isArray(e)?[].concat(e):(0,o.default)({},e||{});let r=n;return a.length>0&&(r=l(i[s],a,n)),i[s]=r,i}function u(e,t){if(0===t.length)return e;if(""===e)throw new r("Mismatched parentheses");const n=e[0],s=e.slice(1);return u(s,"("===n?t.concat(n):")"===n?t.slice(1):t)}function d(e,t){const n=e[0],s=e.slice(1);if("("===n){let e=(0,o.default)({},t,{parens:t.parens+"("});e=function(e,t){const n=t.reduce((function(e,t){return e[t]}),e);return l(e,t,n+1)}(t,["idx",t.idx.length-1,1]);let n=-1;t.idx[t.idx.length-1][0]%2==0&&(n=0);const a=c(s,(0,o.default)({},e,{idx:e.idx.concat([[n,0]]),parens:e.parens.concat("(")})),i=c(u(s,["("]),e);return[a].concat(i)}if(")"===n){if("("!==t.parens[t.parens.length-1])throw new r("Mismatched parentheses");return null}throw new r("Invalid bare character: "+n)}function p(e,t){const n=function(e,t){let n=null,s=null;if("["===e[0]){const t=e.indexOf("]");if(-1===t)return["",e];n=e.slice(1,t),s=e.slice(t+1)}else n=i.exec(e)[1],s=e.slice(n.length);return[n,s]}(e),s=n[0];if(""===s)return["error","Unable to parse bracketed atom."];const o=n[1],a=l(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]);let r=c(o,l(a,["bond","bondType"],"single"));!Array.isArray(r)&&r&&(r=[r]);const u={type:"atom",symbol:s,bonds:r,idx:a.idx};return t.bond?{type:"bond",bondType:t.bond.bondType,to:u}:u}function c(e,t){if(!function(e){return a.test(e)}(e))throw new r("Invalid input.");return e&&0!==e.length?(n=e,i.test(n)?p(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):function(e){return"="===e||"#"===e}(e[0])?function(e,t){const n=e[0],s=e.slice(1);if("="===n)return c(s,l(t,["bond","bondType"],"double"));if("#"===n)return c(s,l(t,["bond","bondType"],"triple"));throw new r("Invalid character: "+n)}(e,t):d(e,t)):null;var n}var h={parse:c,ParseError:r};t.default=h},INEF:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("oLyU")),i=s(n("q1tI")),r=o(n("uBl0")),l=o(n("Giaf")),u=n("eAf/");const d={url:null};function p(e){let t=e[0],n=e[1],s=e[2];const o=e[3];t<0&&(t*=-1,n*=-1,s*=-1);const a=2*Math.PI;for(n<0&&(n*=-1,s*=-1,s+=a/2);s>0;)s-=a;for(;s<0;)s+=a;return[t,n,s,o]}function c(e){let t=e[0],n=e[1],s=e[2];const o=e[3];t<0&&(t*=-1,n*=-1,s*=-1);const a=Math.PI;for(n<0&&(n*=-1,s*=-1,s+=a/2);s>0;)s-=a;for(;s<0;)s+=a;return[t,n,s,o]}const h={areEqual:function(e,t){return r.default.deepEq(e,t)},Movable:l.default.Plot,getPropsForCoeffs:function(e){return{fn:a.default.partial(this.getFunctionForCoeffs,e)}}},f=a.default.extend({},h,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],s=n[0]-t[0],o=n[1]-t[1];if(0===s)return;const a=o/s;return[a,n[1]-a*n[0]]},getFunctionForCoeffs:function(e,t){return e[0]*t+e[1]},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1];return"y = "+n.toFixed(3)+"x + "+s.toFixed(3)}}),g=a.default.extend({},h,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],Movable:l.default.Parabola,getCoefficients:function(e){const t=e[0],n=e[1],s=t[0],o=t[1],a=(n[1]-o)/((n[0]-s)*(n[0]-s));return[a,-2*s*a,a*s*s+o]},getFunctionForCoeffs:function(e,t){return(e[0]*t+e[1])*t+e[2]},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2]}},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1],o=t[2];return"y = "+n.toFixed(3)+"x^2 + "+s.toFixed(3)+"x + "+o.toFixed(3)}}),m=a.default.extend({},h,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],Movable:l.default.Sinusoid,getCoefficients:function(e){const t=e[0],n=e[1],s=n[1]-t[1],o=Math.PI/(2*(n[0]-t[0]));return[s,o,t[0]*o,t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],s=e[1],o=e[2],a=e[3];return n*Math.sin(s*t-o)+a},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2],d:e[3]}},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1],o=t[2],a=t[3];return"y = "+n.toFixed(3)+" sin("+s.toFixed(3)+"x - "+o.toFixed(3)+") + "+a.toFixed(3)},areEqual:function(e,t){return r.default.deepEq(p(e),p(t))}}),y=a.default.extend({},h,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],s=n[1]-t[1],o=Math.PI/(4*(n[0]-t[0]));return[s,o,t[0]*o,t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],s=e[1],o=e[2],a=e[3];return n*Math.tan(s*t-o)+a},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1],o=t[2],a=t[3];return"y = "+n.toFixed(3)+" sin("+s.toFixed(3)+"x - "+o.toFixed(3)+") + "+a.toFixed(3)},areEqual:function(e,t){return r.default.deepEq(c(e),c(t))}}),v=a.default.extend({},h,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function(e,t,n,s,o){const i=a.default.head(s)[1];return a.default.all(n,(e=>e[1]!==i))},extraAsymptoteConstraint:function(e,t,n,s,o){const i=e[1];if(a.default.all(n,(e=>e[1]>i))||a.default.all(n,(e=>e[1]<i)))return[t[0],i];const r=t[1];if(a.default.all(n,(e=>e[1]>r))){const e=a.default.min(a.default.map(n,(e=>e[1])));return[t[0],e-o.snapStep[1]]}const l=a.default.max(a.default.map(n,(e=>e[1])));return[t[0],l+o.snapStep[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){const n=e[0],s=e[1],o=a.default.head(t)[1],i=Math.log((n[1]-o)/(s[1]-o))/(n[0]-s[0]);return[(n[1]-o)/Math.exp(i*n[0]),i,o]},getFunctionForCoeffs:function(e,t){const n=e[0],s=e[1],o=e[2];return n*Math.exp(s*t)+o},getEquationString:function(e,t){if(!t)return null;const n=this.getCoefficients(e,t),s=n[0],o=n[1],a=n[2];return"y = "+s.toFixed(3)+"e^("+o.toFixed(3)+"x) + "+a.toFixed(3)}}),b=a.default.extend({},h,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function(e,t,n,s,o){const i=a.default.head(s)[0];return a.default.all(n,(e=>e[0]!==i))&&n[0][1]!==n[1][1]},extraAsymptoteConstraint:function(e,t,n,s,o){const i=e[0];if(a.default.all(n,(e=>e[0]>i))||a.default.all(n,(e=>e[0]<i)))return[i,t[1]];const r=t[0];if(a.default.all(n,(e=>e[0]>r))){return[a.default.min(a.default.map(n,(e=>e[0])))-o.snapStep[0],t[1]]}return[a.default.max(a.default.map(n,(e=>e[0])))+o.snapStep[0],t[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){const n=e=>[e[1],e[0]],s=v.getCoefficients(a.default.map(e,n),a.default.map(t,n)),o=-s[2]/s[0],i=1/s[0];return[1/s[1],i,o]},getFunctionForCoeffs:function(e,t,n){const s=e[0],o=e[1],a=e[2];return s*Math.log(o*t+a)},getEquationString:function(e,t){if(!t)return null;const n=this.getCoefficients(e,t),s=n[0],o=n[1],a=n[2];return"y = ln("+s.toFixed(3)+"x + "+o.toFixed(3)+") + "+a.toFixed(3)}}),x=a.default.extend({},h,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],s=n[0]-t[0],o=n[1]-t[1];if(0===s)return;let a=Math.abs(o/s);n[1]<t[1]&&(a*=-1);return[a,t[0],t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],s=e[1],o=e[2];return n*Math.abs(t-s)+o},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],s=t[1],o=t[2];return"y = "+n.toFixed(3)+"| x - "+s.toFixed(3)+"| + "+o.toFixed(3)}}),C={linear:f,quadratic:g,sinusoid:m,tangent:y,exponential:v,logarithm:b,absolute_value:x},k=a.default.keys(C);function E(e){return C[e]}const w={validate:function(e,t){if(e.type!==t.correct.type)return{type:"points",earned:0,total:1,message:null};if(null==e.coords)return{type:"invalid",message:null};const n=E(e.type),s=n.getCoefficients(e.coords,e.asymptote),o=n.getCoefficients(t.correct.coords,t.correct.asymptote);return null==s||null==o?{type:"invalid",message:null}:n.areEqual(s,o)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}},getEquationString:function(e){const t=e.plot;if(t.type&&t.coords){return E(t.type).getEquationString(t.coords,t.asymptote)||""}return""},pointsFromNormalized:function(e,t,n,s){return a.default.map(e,(function(e){const o=a.default.map(e,(function(e,s){const o=t[s],a=n[s],i=function(e,t){return Math.floor((e[1]-e[0])/t)}(o,a),r=Math.round(e*i);return o[0]+a*r}));return u.point.roundTo(o,s)}))},maybePointsFromNormalized:function(e,t,n,s){return e?this.pointsFromNormalized(e,t,n,s):e},defaultPlotProps:function(e,t){const n=E(e),s=r.default.snapStepFromGridStep([1,1]);return{type:e,asymptote:this.maybePointsFromNormalized(n.defaultAsymptote,t.range,t.step,s),coords:null}},chooseType:a.default.first,getGridAndSnapSteps:function(e,t){const n=e.gridStep||r.default.getGridStep(e.range,e.step,t);return{gridStep:n,snapStep:e.snapStep||r.default.snapStepFromGridStep(n)}}},M={};M.graph={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:d,markings:"graph",rulerLabel:"",rulerTicks:10,valid:!0,showTooltips:!1},M.plot=w.defaultPlotProps("linear",M.graph),M.availableTypes=[M.plot.type];var T={GrapherUtil:w,allTypes:k,typeToButton:function(e){const t=e.charAt(0).toUpperCase()+e.substring(1);return{value:e,title:t,content:i.createElement("img",{src:E(e).url,alt:t})}},functionForType:E,DEFAULT_GRAPHER_PROPS:M,DEFAULT_BACKGROUND_IMAGE:d};t.default=T},JtQr:function(e,t,n){"use strict";function s(e,t){const n=new Path2D;e.lineWidth=r.lineWidth,e.strokeStyle=r.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const o={text:function(e,t){null!==t.value&&(e.fillStyle=r.fgColor,e.font=r.font,e.fillText(t.value,t.pos[0]-r.fontSizePx/2+1,t.pos[1]+r.fontSizePx/2))},"line:single":s,"line:double":function(e,t){let n=new Path2D;e.lineWidth=5*r.lineWidth,e.strokeStyle=r.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=3*r.lineWidth,e.strokeStyle=r.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)},"line:triple":function(e,t){let n=new Path2D;e.lineWidth=7*r.lineWidth,e.strokeStyle=r.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=5*r.lineWidth,e.strokeStyle=r.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),s(e,t)}};const a={"line:single":0,"line:double":0,"line:triple":0,text:1};function i(e,t){return a[e.type]-a[t.type]}const r={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1};r.font=r.fontSizePx+"px sans";var l=function(e,t){t.sort(i).forEach(function(e){return function(t){o[t.type](e,t)}}(e))};t.default=l},Jxul:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("oLyU")),d=o(n("rGVj")),p=n("MRvb"),c=n("PDH5"),h=n("mR6N"),f=o(n("8Kom")),g=s(n("+jAD")),m=o(n("uBl0"));const{updateQueryString:y}=m.default;class v extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"handleMessageEvent",(e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(u.default.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})})),(0,i.default)(this,"change",((...e)=>g.change.apply(this,e))),(0,i.default)(this,"simpleValidate",(e=>v.validate({status:this.props.status,message:this.props.message},e)))}static validate(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}componentDidMount(){(0,d.default)(window).on("message",this.handleMessageEvent)}componentWillUnmount(){(0,d.default)(window).off("message",this.handleMessageEvent)}render(){if(!this.props.programID)return r.createElement("div",null);let e,t=!1,n=function(e){const t="/computer-programming/program/"+"".concat(e,"/embedded?embed=yes&author=no");return(0,c.isFileProtocol)(f.default.protocol)?"https://khanacademy.org".concat(t):(0,p.toAbsoluteUrl)(t)}(this.props.programID);const s={height:this.props.height,width:"100%"};if(this.props.showEditor?(n+="&editor=yes",e="perseus-scratchpad-editor"):(n+="&editor=no&width=".concat(688),e="perseus-scratchpad","webpage"!==this.props.programType&&(t=!0)),this.props.showButtons?(n+="&buttons=yes",s.height+=67):n+="&buttons=no",this.props.settings){const e={};u.default.each(this.props.settings,(function(t){t.name&&t.value&&(e[t.name]=t.value)})),n=y(n,"settings",JSON.stringify(e))}const o=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return r.createElement("div",{className:(0,h.css)(b.widthOverride,t&&b.container)},r.createElement("iframe",{sandbox:o,src:n,style:s,className:e,allowFullScreen:!0}))}}(0,i.default)(v,"propTypes",(0,a.default)({},g.propTypes,{programID:l.default.string,programType:l.default.oneOf(["pjs","sql","webpage"]),width:l.default.number,height:l.default.number,settings:l.default.array,showEditor:l.default.bool,showButtons:l.default.bool,status:l.default.oneOf(["incomplete","incorrect","correct"]),message:l.default.string})),(0,i.default)(v,"defaultProps",{showEditor:!1,showButtons:!1,status:"incomplete",message:null});const b=h.StyleSheet.create({widthOverride:{width:820},container:{margin:"auto"}});var x={name:"cs-program",displayName:"CS Program",supportedAlignments:["block","full-width"],widget:v,hidden:!0};t.default=x},"K/mI":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("i8i4")),l=o(n("oLyU")),u=o(n("rGVj")),d=o(n("mbWs")),p=o(n("emzA")),c=s(n("HEOz")),h=n("j8wP"),f=s(n("+jAD")),g=o(n("7xiW")),m=o(n("FGkX"));const{SignificantFigures:y,displaySigFigs:v}=m.default,b=function(e){return new y(e).sigFigs};class x extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"_errorTimeout",null),(0,a.default)(this,"_showError",(()=>{if(""===this.props.value)return;const e=(0,u.default)(r.default.findDOMNode(this.refs.error));e.is(":visible")||e.css({top:50,opacity:.1}).show().animate({top:0,opacity:1},300)})),(0,a.default)(this,"_hideError",(()=>{const e=(0,u.default)(r.default.findDOMNode(this.refs.error));e.is(":visible")&&e.animate({top:50,opacity:.1},300,(function(){(0,u.default)(this).hide()}))})),(0,a.default)(this,"change",((...e)=>f.change.apply(this,e))),(0,a.default)(this,"handleBlur",(()=>{this.props.onBlur([]),clearTimeout(this._errorTimeout),d.default.unitParse(this.props.value).parsed||this._showError()})),(0,a.default)(this,"handleChange",(e=>{this._hideError(),this.props.onChange({value:e.target.value})})),(0,a.default)(this,"simpleValidate",((e,t)=>(t=t||function(){},x.validate(this.getUserInput(),e)))),(0,a.default)(this,"getUserInput",(()=>this.props.value)),(0,a.default)(this,"getInputPaths",(()=>[[]])),(0,a.default)(this,"focusInputPath",(e=>{const t=r.default.findDOMNode(this.refs.input);t&&t.focus()})),(0,a.default)(this,"handleFocus",(()=>{this.props.onFocus([])})),(0,a.default)(this,"blurInputPath",(e=>{const t=r.default.findDOMNode(this.refs.input);t&&t.blur()})),(0,a.default)(this,"setInputValue",((e,t,n)=>{this.props.onChange({value:t},n)})),(0,a.default)(this,"getDOMNodeForPath",(()=>r.default.findDOMNode(this.refs.input))),(0,a.default)(this,"getGrammarTypeForPath",(e=>"unit"))}static validate(e,t){const n=d.default.unitParse(t.value).expr,s=d.default.unitParse(e);if(!s.parsed)return{type:"invalid",message:c._("I couldn't understand those units.")};let o=null;const a=t.sigfigs,i=b(s.coefficient)===a;let r,u;i||(o=c._("Check your significant figures."));try{const e=new d.default.Var("x"),t=new d.default.Eq(n.simplify(),"=",new d.default.Mul(e,s.expr.simplify())).solveLinearEquationForVariable(e);r=Number(t.eval()).toPrecision(a)===Number(1).toPrecision(a)}catch(e){r=!1}r||(o=c._("That answer is numerically incorrect."));const p=C(s.expr.simplify()),h=C(n.simplify());u="all"===t.accepting?d.default.compare(p,h).equal:(0,l.default)(t.acceptingUnits).any((e=>{const t=C(d.default.unitParse(e).unit.simplify());return d.default.compare(t,p).equal})),u||(o=c._("Check your units."));return{type:"points",earned:u&&r&&i?1:0,total:1,message:o}}render(){const e=this.props.apiOptions.staticRender?i.createElement(g.default,{onChange:this.handleChange,ref:"input",className:h.ClassNames.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur}):i.createElement("input",{onChange:this.handleChange,ref:"input",className:h.ClassNames.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur});return i.createElement("div",{className:"old-unit-input"},e,i.createElement("div",{ref:"error",className:"error",style:{display:"none"}},c._("I don't understand that")))}componentDidUpdate(){clearTimeout(this._errorTimeout),d.default.unitParse(this.props.value).parsed?this._hideError():this._errorTimeout=setTimeout(this._showError,2e3)}componentWillUnmount(){clearTimeout(this._errorTimeout)}}(0,a.default)(x,"defaultProps",{apiOptions:h.Options.defaults,value:""});const C=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()};var k={name:"unit-input",displayName:"Unit",defaultAlignment:"inline-block",widget:x,transform:e=>(0,p.default)(e).del(["value"]).freeze(),version:{major:0,minor:1},countSigfigs:b,sigfigPrint:function(e,t){return v(e,t,-10,!1)},hidden:!0};t.default=k},KSWw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function s(e,t,n,s){let o=e.symbol;if("C"===o&&1!==Object.keys(t).length&&(o=null),"1,0"===e.idx){const t=[0,0];return e.pos=t,e.baseAngle=-30+s,{type:"text",value:o,pos:t,idx:e.idx}}const a=t[e.connections.find((function(e){return t[e].pos}))],i=a.connections.indexOf(e.idx);let r=60,l=120;4===a.connections.length?(l=90,r=90):(n.find((t=>"triple"===t.bondType&&t.to===e.idx))||n.find((e=>"triple"===e.bondType&&e.to===a.idx)))&&(l=0,r=0);let u=0;const d=a.idx.split(":"),p=d[d.length-1].split(",")[0];u=parseInt(p)%2!=0?a.baseAngle-(r-l*i):a.baseAngle+(r-l*i);const c=function(e,t,n){const s=e[0],o=e[1];return[s+Math.cos(2*t*Math.PI/360)*n,o+-1*Math.sin(2*t*Math.PI/360)*n]}(a.pos,u,30);return e.pos=c,e.baseAngle=u,{type:"text",value:o,pos:c,idx:e.idx}}function o(e,t){const n=function(e,t){let n=[e.pos[0],e.pos[1]],s=[t.pos[0],t.pos[1]];return"C"!==e.symbol&&(n=[t.pos[0]-.75*(t.pos[0]-e.pos[0]),t.pos[1]-.75*(t.pos[1]-e.pos[1])]),"C"!==t.symbol&&(s=[e.pos[0]-.75*(e.pos[0]-t.pos[0]),e.pos[1]-.75*(e.pos[1]-t.pos[1])]),[n,s]}(t[e.from],t[e.to]);return{type:"line:"+e.bondType,startPos:n[0],endPos:n[1]}}function a(e){return e.join(":")}function i(e,t,n){if(null===n)return[e,t];if("atom"===n.type){const s=a(n.idx);e[s]={idx:s,symbol:n.symbol,connections:[]},n.bonds&&n.bonds.forEach((function(n){const o=a(n.to.idx);e[s].connections.push(o),t.push({from:s,to:o,bondType:n.bondType}),i(e,t,n.to),e[o].connections.push(s)}))}return[e,t]}function r(e,t,n,o,a){if(0===t.length)return e;const i=t.shift(),l=n[i];return l.connections.forEach((function(e){n[e].pos||t.push(e)})),r(e.concat(s(l,n,o,a)),t,n,o,a)}function l(e,t,n){return 0===n.length?e:l(e.concat(o(n[0],t)),t,n.slice(1))}var u={layout:function(e,t){const n=i({},[],e),s=n[0],o=n[1];return l(r([],["1,0"],s,o,t),s,o)},_atomLayout:s,_bondLayout:o,_bondLength:30,_convertTree:i};t.default=u},La43:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getRelativePosition=i,t.getRelativeRect=function(e,t){return(0,o.default)({},i(e,t),{width:e.width,height:e.height})},t.getClientRectsForTextInRange=function(e){const t=[];return r(e.commonAncestorContainer,e,t),t};var o=s(n("pVnL")),a=n("OgJR");function i(e,t){return{left:e.left-t.left,top:e.top-t.top}}function r(e,t,n){const s=new Range;if(s.selectNodeContents(e),e.nodeType===Node.TEXT_NODE){const o=(0,a.intersectRanges)(t,s);o&&function(e,t,n){const s=e.parentElement,o=window.getComputedStyle(s);let a=null;if("string"==typeof o.lineHeight&&o.lineHeight.endsWith("px")){const e=parseFloat(o.lineHeight);isNaN(e)||(a=e)}const i=Array.from(t.getClientRects());for(const e of i){const t={left:e.left,top:e.top,height:e.height,width:e.width};if(null!==a){const e=a-t.height;t.top-=e,t.height=a}n.push(t)}}(e,o,n)}else if(e.nodeType===Node.ELEMENT_NODE){if(!(0,a.rangesOverlap)(t,s))return;for(const s of Array.from(e.childNodes))r(s,t,n)}}},"M++g":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("8OQS")),r=o(n("lSNA")),l=o(n("TSYQ")),u=s(n("q1tI")),d=o(n("17x9")),p=o(n("i8i4")),c=o(n("oLyU")),h=o(n("rGVj")),f=n("eAf/"),g=o(n("uBl0")),m=o(n("XwLL"));const{firstNumericalParse:y,captureScratchpadTouchStart:v}=g.default,b=m.default.toNumericString,x=m.default.getNumericFormat;class C extends u.Component{constructor(...e){super(...e),(0,r.default)(this,"state",{format:this.props.format}),(0,r.default)(this,"getValue",(()=>this.parseInputValue(p.default.findDOMNode(this.refs.input).value))),(0,r.default)(this,"getStringValue",(()=>p.default.findDOMNode(this.refs.input).value.toString())),(0,r.default)(this,"parseInputValue",(e=>{if(""===e){const e=this.props.placeholder;return c.default.isFinite(e)?+e:null}const t=y(e);return c.default.isFinite(t)?t:this.props.value})),(0,r.default)(this,"focus",(()=>{p.default.findDOMNode(this.refs.input).focus(),this._handleFocus()})),(0,r.default)(this,"blur",(()=>{p.default.findDOMNode(this.refs.input).blur(),this._handleBlur()})),(0,r.default)(this,"setSelectionRange",((e,t)=>{p.default.findDOMNode(this).setSelectionRange(e,t)})),(0,r.default)(this,"getSelectionStart",(()=>p.default.findDOMNode(this).selectionStart)),(0,r.default)(this,"getSelectionEnd",(()=>p.default.findDOMNode(this).selectionEnd)),(0,r.default)(this,"_checkValidity",(e=>{if(null==e)return!0;const t=y(e),n=this.props.checkValidity;return c.default.isFinite(t)&&n(t)})),(0,r.default)(this,"_handleChange",(e=>{const t=e.target.value,n=this.parseInputValue(t),s=x(t);this.props.onChange(n),s&&(this.props.onFormatChange(n,s),this.setState({format:s}))})),(0,r.default)(this,"_handleFocus",(()=>{this.props.onFocus&&this.props.onFocus()})),(0,r.default)(this,"_handleBlur",(e=>{e&&"keypress"===e.type&&13!==e.keyCode||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())})),(0,r.default)(this,"_onKeyDown",(e=>{if(this.props.onKeyDown&&this.props.onKeyDown(e),!this.props.useArrowKeys||!c.default.contains(["ArrowUp","ArrowDown"],e.key))return;let t=this.getValue();t===Math.floor(t)&&("ArrowUp"===e.key?t+=1:"ArrowDown"===e.key&&(t-=1),this._checkValidity(t)&&this.props.onChange(t))})),(0,r.default)(this,"_setValue",((e,t)=>{(0,h.default)(p.default.findDOMNode(this.refs.input)).val(b(e,t))}))}render(){let e=(0,l.default)({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:"mini"===this.props.size,small:"small"===this.props.size,normal:"normal"===this.props.size});null!=this.props.className&&(e=e+" "+this.props.className);const t=this.props,n=(0,i.default)(t,["onFormatChange","checkValidity","useArrowKeys"]);return u.createElement("input",(0,a.default)({},n,{className:e,type:"text",ref:"input",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:v,defaultValue:b(this.props.value,this.state.format),value:void 0}))}componentDidUpdate(e){f.number.equal(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)}}(0,r.default)(C,"propTypes",{value:d.default.number,format:d.default.string,placeholder:d.default.oneOfType([d.default.string,d.default.number]),onChange:d.default.func.isRequired,onFormatChange:d.default.func,checkValidity:d.default.func,size:d.default.string,label:d.default.oneOf(["put your labels outside your inputs!"])}),(0,r.default)(C,"defaultProps",{value:null,placeholder:null,format:null,onFormatChange:()=>null,checkValidity:()=>!0,useArrowKeys:!1});var k=C;t.default=k},OgJR:function(e,t,n){"use strict";function s(e,t,n,s){let o;return o="start"===t&&"start"===s?Range.START_TO_START:"start"===t&&"end"===s?Range.END_TO_START:"end"===t&&"start"===s?Range.START_TO_END:Range.END_TO_END,e.compareBoundaryPoints(o,n)}function o(e,t){const n=e.cloneRange();return n.setEnd(t.endContainer,t.endOffset),n}function a(e,t){return!(s(e,"end",t,"start")<0||s(t,"end",e,"start")<0)}function i(e,t,n,o,a){let i=-1,r=o,l=a,u=0;for(;r<=l;){if(u++,u>2*t.length)throw new Error("Assertion error: Binary search isn't terminating? "+"lower=".concat(r,", upper=").concat(l));const o=Math.floor((r+l)/2);if("first"===n){s(t[o],"end",e,"start")<=0?r=o+1:(i=o,l=o-1)}else{s(t[o],"start",e,"end")>=0?l=o-1:(i=o,r=o+1)}}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.spanRanges=o,t.rangesOverlap=a,t.rangeIncludes=function(e,t){return s(e,"start",t,"start")<=0&&s(e,"end",t,"end")>=0},t.intersectRanges=function(e,t){if(!a(e,t))return null;const n=s(e,"start",t,"start")>0?e:t,i=s(e,"end",t,"end")<0?e:t;return o(n,i)},t.unionRanges=function(e,t){if(!a(e,t))return null;const n=s(e,"start",t,"start")<0?e:t,i=s(e,"end",t,"end")>0?e:t;return o(n,i)},t.findFirstAndLastWordIndexes=function(e,t){const n=i(e,t,"first",0,t.length-1);if(n<0)return null;const s=i(e,t,"last",n,t.length-1);if(s<0)return null;return[n,s]}},"P++F":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("oLyU")),d=s(n("+jAD")),p=s(n("j8wP")),c=o(n("Atlv")),h=o(n("Pwnf")),f=n("JimW"),g=o(n("gE8/")),m=o(n("6RhW"));class y extends r.Component{componentDidMount(){this.props.trackInteraction()}render(){return r.createElement(f.View,{style:b.tooltipBody},r.createElement(c.default,{apiOptions:this.props.apiOptions,content:this.props.content,widgets:this.props.widgets}))}}(0,i.default)(y,"propTypes",{apiOptions:p.Options.propTypes,content:l.default.string,trackInteraction:l.default.func.isRequired,widgets:l.default.objectOf(l.default.any)});class v extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"getUserInput",(()=>({}))),(0,i.default)(this,"simpleValidate",(e=>v.validate(this.getUserInput(),e)))}render(){const e=r.createElement(y,{apiOptions:this.props.apiOptions,content:this.props.definition,key:this.props.definition,trackInteraction:this.props.trackInteraction,widgets:this.props.widgets});return r.createElement(m.default,{content:e,placement:"top"},r.createElement("span",{className:"perseus-widget-definition"},r.createElement(f.View,{style:b.definitionLink},this.props.togglePrompt)))}}(0,i.default)(v,"propTypes",(0,a.default)({},d.propTypes,{apiOptions:p.Options.propTypes,definition:l.default.string,togglePrompt:l.default.string,trackInteraction:l.default.func.isRequired,widgets:l.default.objectOf(l.default.any)})),(0,i.default)(v,"defaultProps",{togglePrompt:"define me",definition:"definition goes here"});const b={tooltipBody:{color:h.default.offBlack,display:"block",fontSize:20,fontWeight:500,lineHeight:"30px",margin:g.default.xSmall_8},definitionLink:{borderBottom:"dashed 1px ".concat(h.default.blue),color:h.default.blue,cursor:"pointer",display:"inline-block",textDecoration:"none"}};u.default.extend(v,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var x={name:"definition",displayName:"Definition",accessible:!0,defaultAlignment:"inline",widget:v,transform:u.default.identity};t.default=x},P76s:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=n("mR6N"),r=s(n("q1tI")),l=o(n("i8i4")),u=o(n("oLyU")),d=o(n("rGVj")),p=o(n("XDp7")),c=o(n("o0j1")),h=o(n("Atlv")),f=o(n("+lle")),g=n("zahm"),m=s(n("HEOz"));class y extends r.Component{measureLineHeight(){return"number"!=typeof this._cachedLineHeight&&this.forceMeasureLineHeight(),this._cachedLineHeight}forceMeasureLineHeight(){this.$body.text(" "),this._cachedLineHeight=this.$end.offset().top-this.$body.offset().top,this.$body.text("")}render(){return r.createElement("div",{className:(0,i.css)(v.measurer)},r.createElement("div",null,r.createElement("div",{ref:e=>this.$body=(0,d.default)(e),className:"paragraph"}),r.createElement("div",{ref:e=>this.$end=(0,d.default)(e)})))}}const v=i.StyleSheet.create({measurer:{position:"absolute",width:"100%",top:0,left:0}});class b extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{nLines:null,startLineNumbersAfter:0,stylesAreApplied:!1}),(0,a.default)(this,"_handleSerializedHighlightsUpdate",(e=>{this.props.onChange({highlights:e})}))}componentDidMount(){this._updateState(),this._onResize=u.default.throttle((()=>{this.shouldRenderJipt()||(this._lineHeightMeasurer.forceMeasureLineHeight(),this._updateState())}),500),window.addEventListener("resize",this._onResize),window.setTimeout((()=>{this.setState({stylesAreApplied:!0})}),0)}shouldComponentUpdate(e,t){return!u.default.isEqual(this.props,e)||!u.default.isEqual(this.state,t)}componentDidUpdate(){this._updateState()}componentWillUnmount(){window.removeEventListener("resize",this._onResize)}_updateState(){this.shouldRenderJipt()||this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})}_measureLines(){const e=(0,d.default)(l.default.findDOMNode(this.refs.content)).height(),t=this._getLineHeight();return Math.round(e/t)}_getInitialLineNumber(){let e=!0;return this.props.findWidgets(((t,n)=>"passage"===n.type&&(t===this.props.widgetId&&(e=!1),e))).map((e=>e.getLineCount())).reduce(((e,t)=>e+t),0)}_getLineHeight(){return this._lineHeightMeasurer.measureLineHeight()}getLineCount(){return null!=this.state.nLines?this.state.nLines:this._measureLines()}_getStartRefLineNumber(e){const t=f.default.START_REF_PREFIX+e,n=this.refs[t];if(!n)return null;const s=(0,d.default)(l.default.findDOMNode(n));let o=s.next();0===o.length&&(o=s);const a=o.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(a)}_getEndRefLineNumber(e){const t=f.default.END_REF_PREFIX+e,n=this.refs[t];if(!n)return null;const s=(0,d.default)(l.default.findDOMNode(n));let o=s.prev();0===o.length&&(o=s);const a=o.height(),i=o.offset().top;let r=this._convertPosToLineNumber(i+a);return 0===a&&(r+=1),this.state.startLineNumbersAfter+r}_convertPosToLineNumber(e){const t=e-(0,d.default)(l.default.findDOMNode(this.refs.content)).offset().top,n=this._getLineHeight();return Math.round(t/n)}_getRefContent(e){const t=f.default.START_REF_PREFIX+e,n=this.refs[t];return n?n.getRefContent():null}getReference(e){const t=this._getStartRefLineNumber(e),n=this._getEndRefLineNumber(e);if(null==t||null==n)return null;return{startLine:t,endLine:n,content:this._getRefContent(e)}}getUserInput(){return null}simpleValidate(e){return b.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}_renderInstructions(e){const t=e.firstQuestionRef,n=e.firstSentenceRef;let s="";t&&(s+=m._("The symbol %(questionSymbol)s indicates that question %(questionNumber)s references this portion of the passage.",{questionSymbol:"[["+t+"]]",questionNumber:t})),n&&(s+=m._(" The symbol %(sentenceSymbol)s indicates that the following sentence is referenced in a question.",{sentenceSymbol:"["+n+"]"}));const o=f.default.parse(s);return r.createElement("div",{className:"perseus-widget-passage-instructions"},f.default.output(o))}shouldRenderJipt(){return p.default.useJIPT&&-1!==this.props.passageText.indexOf("crwdns")}_renderContent(e){const t=this.state.stylesAreApplied,n=!this.props.reviewModeRubric;return r.createElement(c.default,{editable:n,enabled:t,onSerializedHighlightsUpdate:this._handleSerializedHighlightsUpdate,serializedHighlights:this.props.highlights},r.createElement("div",{ref:"content"},r.createElement(y,{ref:e=>this._lineHeightMeasurer=e}),f.default.output(e)))}_hasFootnotes(){const e=this.props.footnotes;return!/^\s*$/.test(e)}_renderFootnotes(){const e=this.props.footnotes,t=f.default.parse(e);return f.default.output(t)}render(){let e;const t=this.state.nLines;this.props.showLineNumbers&&t&&(e=u.default.range(1,t+1).map((e=>{const t=e+this.state.startLineNumbersAfter;if(4===t){const e=m._("Line ");return r.createElement("span",{key:"line-marker",className:"line-marker"},e)}return r.createElement("span",{key:e},t)})));const n={firstSentenceRef:null,firstQuestionRef:null},s=this.props.passageText.replace(/("{1})([^"]*)("{1})/g,"“$2”"),o=f.default.parse(s,n),a=/\S/.test(this.props.passageTitle);return r.createElement("div",null,r.createElement("div",{className:"perseus-widget-passage-container"},this._renderInstructions(n),r.createElement("div",{className:"perseus-widget-passage"},a&&r.createElement("h3",{className:"passage-title"},r.createElement(h.default,{content:this.props.passageTitle,linterContext:this.props.linterContext})),e&&r.createElement("div",{className:"line-numbers","aria-hidden":!0},e),!a&&r.createElement("h3",{className:"perseus-sr-only"},m._("Beginning of reading passage.")),r.createElement("div",{className:"passage-text"},this.shouldRenderJipt()?r.createElement(h.default,{content:this.props.passageText}):this._renderContent(o)),this._hasFootnotes()&&[r.createElement("h4",{key:"footnote-start",className:"perseus-sr-only"},m._("Beginning of reading passage footnotes.")),r.createElement("div",{key:"footnotes",className:"footnotes"},this._renderFootnotes())],r.createElement("div",{className:"perseus-sr-only"},m._("End of reading passage.")))))}}(0,a.default)(b,"defaultProps",{passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0,highlights:{},linterContext:g.linterContextDefault});var x={name:"passage",displayName:"Passage (SAT only)",widget:b,transform:e=>u.default.pick(e,"passageTitle","passageText","footnotes","showLineNumbers"),isLintable:!0};t.default=x},RY23:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("oLyU")),d=s(n("+jAD")),p=o(n("fUCW")),c=o(n("Atlv")),h=n("zahm");class f extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"getUserInput",(()=>p.default.getUserInput.call(this))),(0,i.default)(this,"change",((...e)=>d.change.apply(this,e))),(0,i.default)(this,"simpleValidate",(e=>f.validate(this.getUserInput(),e)))}render(){return r.createElement(c.default,{content:this.props.content,inline:!0,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext})}}(0,i.default)(f,"propTypes",(0,a.default)({},d.propTypes,{content:l.default.string,linterContext:h.linterContextProps})),(0,i.default)(f,"defaultProps",{content:"",linterContext:h.linterContextDefault}),u.default.extend(f,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var g={name:"passage-ref-target",displayName:"PassageRefTarget",defaultAlignment:"inline",widget:f,hidden:!0,transform:e=>u.default.pick(e,"content"),version:{major:0,minor:0},isLintable:!0};t.default=g},SrcR:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("oLyU")),d=s(n("HEOz")),p=s(n("+jAD")),c=o(n("fUCW"));const h={display:"table",tableLayout:"fixed"},f={display:"table-row"},g={display:"table-cell",padding:5},m={borderRadius:10,cursor:"pointer"},y={padding:5,display:"inline-block"},v={float:"right",paddingRight:5},b={plus:()=>[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]],x:()=>[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]],"plus/x":e=>e%2?b.x():b.plus()};class x extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"_flip",(()=>{this.props.onChange(!this.props.value)}))}render(){const e=this.props.value?"#55dd55":"#115511",t=u.default.extend({},m,{width:this.props.size,height:this.props.size,backgroundColor:e});return r.createElement("div",{style:t,onClick:this._flip})}}(0,i.default)(x,"propTypes",{value:l.default.bool.isRequired,size:l.default.number.isRequired});class C extends r.Component{render(){return r.createElement("div",{style:h,className:"no-select"},u.default.map(this.props.cells,((e,t)=>r.createElement("div",{key:t,style:f},u.default.map(e,((e,n)=>r.createElement("div",{key:n,style:g},r.createElement(x,{value:e,size:this.props.size,onChange:u.default.partial(this.props.onChange,t,n)}))))))))}}(0,i.default)(C,"propTypes",{cells:l.default.arrayOf(l.default.arrayOf(l.default.bool)).isRequired,size:l.default.number.isRequired});const k=(e,t,n,s)=>((e,t)=>u.default.map(e,((e,n)=>u.default.map(e,((e,s)=>t(n,s)?!e:e)))))(e,((e,o)=>{const a=e-t,i=o-n;return Math.abs(a)<=1&&Math.abs(i)<=1&&s[a+1][i+1]}));class E extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"getUserInput",(()=>c.default.getUserInput.call(this))),(0,i.default)(this,"change",((...e)=>p.change.apply(this,e))),(0,i.default)(this,"_width",(()=>0!==this.props.cells.length?this.props.cells[0].length:0)),(0,i.default)(this,"_initNextPatterns",(()=>{this._currPattern=b[this.props.flipPattern](0),this._nextPattern=b[this.props.flipPattern](1),this._patternIndex=2})),(0,i.default)(this,"_shiftPatterns",(()=>{this._currPattern=this._nextPattern,this._nextPattern=b[this.props.flipPattern](this._patternIndex),this._patternIndex++})),(0,i.default)(this,"_flipTile",((e,t)=>{const n=k(this.props.cells,e,t,this._currPattern);this._shiftPatterns(),this.change({cells:n,moveCount:this.props.moveCount+1})})),(0,i.default)(this,"_reset",(()=>{this.change({cells:this.props.startCells,moveCount:0})})),(0,i.default)(this,"simpleValidate",(e=>w(e,this.getUserInput())))}render(){const e=60*this._width();return r.createElement("div",null,r.createElement(C,{cells:this.props.cells,size:50,onChange:this._flipTile}),r.createElement("div",{style:{width:e}},r.createElement("div",{style:y},d.ngettext("Moves: %(num)s","Moves: %(num)s",this.props.moveCount)),r.createElement("div",{style:v},r.createElement("input",{type:"button",value:"Reset",onClick:this._reset,className:"simple-button"}))),r.createElement("div",{className:"clearfix"}))}componentDidMount(){this._initNextPatterns()}componentDidUpdate(e){e.flipPattern!==this.props.flipPattern&&this._initNextPatterns()}}(0,i.default)(E,"propTypes",(0,a.default)({},p.propTypes,{cells:l.default.arrayOf(l.default.arrayOf(l.default.bool)),startCells:l.default.arrayOf(l.default.arrayOf(l.default.bool)),flipPattern:l.default.string.isRequired,moveCount:l.default.number.isRequired})),(0,i.default)(E,"defaultProps",{cells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",moveCount:0});const w=function(e,t){if(u.default.all(t.cells,((t,n)=>u.default.all(t,((t,s)=>t===e.startCells[n][s])))))return{type:"invalid",message:d._("Click on the tiles to change the lights.")};return u.default.all(t.cells,(e=>u.default.all(e,(e=>e))))?{type:"points",earned:1,total:1,message:null}:e.gradeIncompleteAsWrong?{type:"points",earned:0,total:1,message:null}:{type:"invalid",message:d._("You must turn on all of the lights to continue.")}};var M={name:"lights-puzzle",displayName:"Lights Puzzle",hidden:!0,widget:E,transform:function(e){return{cells:e.startCells,startCells:e.startCells,flipPattern:e.flipPattern}}};t.default=M},UDUP:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=s(n("HEOz")),l=o(n("iUos")),u=o(n("fQFx"));class d extends i.PureComponent{constructor(...e){super(...e),(0,a.default)(this,"state",{hoveredHighlightKey:null,hoveringTooltipFor:null}),(0,a.default)(this,"_highlightRenderers",{}),(0,a.default)(this,"_handleMouseMove",(e=>{const t={left:e.clientX,top:e.clientY},n=this._getHoveredHighlightKey(t);this.setState({hoveredHighlightKey:n})}))}componentDidMount(){this._updateEditListeners(!1,this.props.editable)}UNSAFE_componentWillReceiveProps(e){this._updateEditListeners(this.props.editable,e.editable),null==this.state.hoveredHighlightKey||this.state.hoveredHighlightKey in e.highlights||this.setState({hoveredHighlightKey:null}),null==this.state.hoveringTooltipFor||this.state.hoveringTooltipFor in e.highlights||this.setState({hoveringTooltipFor:null})}componentWillUnmount(){this._updateEditListeners(this.props.editable,!1)}_updateEditListeners(e,t){!e&&t?window.addEventListener("mousemove",this._handleMouseMove):e&&!t&&(window.removeEventListener("mousemove",this._handleMouseMove),this.setState({hoveredHighlightKey:null,hoveringTooltipFor:null}))}_getHoveredHighlightKey(e){const{hoveringTooltipFor:t}=this.state;if("string"==typeof t)return t;return Object.keys(this.props.highlights).find((t=>{const n=this._highlightRenderers[t];return n&&n.isHovered(e)}))}_renderTooltip(){const{hoveredHighlightKey:e}=this.state;if(null==e)return null;const t=this.props.highlights[e];return i.createElement(u.default,{label:r._("Remove highlight"),focusNode:t.domRange.endContainer,focusOffset:t.domRange.endOffset,offsetParent:this.props.offsetParent,onClick:()=>this.props.onRemoveHighlight(e),onMouseEnter:()=>this.setState({hoveringTooltipFor:e}),onMouseLeave:()=>this.setState({hoveringTooltipFor:null})})}render(){return i.createElement("div",null,Object.keys(this.props.highlights).map((e=>i.createElement(l.default,{ref:t=>{t?this._highlightRenderers[e]=t:delete this._highlightRenderers[e]},key:e,highlight:this.props.highlights[e],highlightKey:e,offsetParent:this.props.offsetParent,zIndexes:this.props.zIndexes}))),this.props.editable&&this._renderTooltip())}}var p=d;t.default=p},VMUI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addHighlight=function(e,t){const n={};let o=t.domRange,a=t.firstWordIndex,i=t.lastWordIndex;for(const t of Object.keys(e)){const r=e[t],l=(0,s.unionRanges)(r.domRange,o);l?(o=l,a=Math.min(r.firstWordIndex,a),i=Math.max(r.lastWordIndex,i)):n[t]=r}const r={firstWordIndex:a,lastWordIndex:i,domRange:o},l=function(e){const t="".concat((new Date).getTime());if(!e.includes(t))return t;let n,s=0;do{n="".concat(t,"-").concat(s),s++}while(e.includes(n));return n}(Object.keys(n));return n[l]=r,n},t.buildHighlight=function(e,t,n){for(const t of Object.keys(e)){const o=e[t].domRange;if((0,s.rangeIncludes)(o,n))return null}const o=(0,s.findFirstAndLastWordIndexes)(n,t);if(!o)return null;const[a,i]=o,r=t[a],l=t[i];return{firstWordIndex:a,lastWordIndex:i,domRange:(0,s.spanRanges)(r,l)}},t.deserializeHighlight=function(e,t){const{firstWordIndex:n,lastWordIndex:a}=e.range,i=t[n];if(!i)throw new o.KAError("first word index ".concat(i," is out of bounds: ")+"must be 0–".concat(t.length-1," inclusive"),o.Errors.Internal);const r=t[a];if(!r)throw new o.KAError("last word index ".concat(r," is out of bounds: ")+"must be 0–".concat(t.length-1," inclusive"),o.Errors.Internal);return{firstWordIndex:n,lastWordIndex:a,domRange:(0,s.spanRanges)(i,r)}},t.serializeHighlight=function(e){const{firstWordIndex:t,lastWordIndex:n}=e;return{range:{type:"word-indexes",firstWordIndex:t,lastWordIndex:n}}};var s=n("OgJR"),o=n("4PhQ")},VO3A:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=(o(n("oLyU")),n("mR6N")),d=n("j8wP"),p=o(n("XDp7")),c=s(n("+jAD")),h=o(n("fYWP")),f=n("UcaO"),g=n("zahm"),m=s(n("HEOz"));const y=h.default.widget;class v extends r.Component{render(){const e=[];for(let t=0;t<this.props.numGroups;t++)e.push(r.createElement("div",{key:t,className:(0,u.css)(C.indicator,t===this.props.currentGroup&&C.selectedIndicator),onClick:()=>this.props.onChangeCurrentGroup(t)}));return r.createElement("div",{className:(0,u.css)(C.indicatorContainer)},e)}}(0,i.default)(v,"propTypes",{currentGroup:l.default.number.isRequired,numGroups:l.default.number.isRequired,onChangeCurrentGroup:l.default.func.isRequired});class b extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{currentGroup:0}),(0,i.default)(this,"change",((...e)=>c.change.apply(this,e))),(0,i.default)(this,"getInputPaths",(()=>this._childGroup.getInputPaths())),(0,i.default)(this,"setInputValue",((e,t,n)=>this._childGroup.setInputValue(e,t,n))),(0,i.default)(this,"getAcceptableFormatsForInputPath",(e=>this._childGroup.getAcceptableFormatsForInputPath(e))),(0,i.default)(this,"focus",(()=>this._childGroup.focus())),(0,i.default)(this,"focusInputPath",(e=>{this._childGroup.focusInputPath(e)})),(0,i.default)(this,"blurInputPath",(e=>{this._childGroup.blurInputPath(e)})),(0,i.default)(this,"handleNextQuestion",(()=>{const{currentGroup:e}=this.state;e<this.props.gradedGroups.length-1&&this.setState({currentGroup:e+1})}))}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){if(p.default.useJIPT&&this.props.gradedGroups.length>1)return r.createElement("div",{className:(0,u.css)(C.container)},this.props.gradedGroups.map(((e,t)=>r.createElement(y,(0,a.default)({key:t},this.props,e,{inGradedGroupSet:!1,linterContext:this.props.linterContext})))));const e=this.props.gradedGroups[this.state.currentGroup];if(!e)return r.createElement("span",null,m.doNotTranslate("No current group..."));const t=this.props.gradedGroups.length,n=this.state.currentGroup<t-1?this.handleNextQuestion:null;return r.createElement("div",{className:(0,u.css)(C.container)},r.createElement("div",{className:(0,u.css)(C.top)},r.createElement("div",{className:(0,u.css)(C.title)},e.title),r.createElement("div",{className:(0,u.css)(C.spacer)}),r.createElement(v,{numGroups:t,currentGroup:this.state.currentGroup,onChangeCurrentGroup:e=>this.setState({currentGroup:e})})),r.createElement(y,(0,a.default)({key:this.state.currentGroup,ref:e=>this._childGroup=e},this.props,e,{inGradedGroupSet:!0,title:null,onNextQuestion:n,linterContext:this.props.linterContext})))}}(0,i.default)(b,"propTypes",(0,a.default)({},c.propTypes,{apiOptions:d.Options.propTypes,gradedGroups:l.default.array,trackInteraction:l.default.func.isRequired,linterContext:g.linterContextProps})),(0,i.default)(b,"defaultProps",{gradedGroups:[],linterContext:g.linterContextDefault});var x={name:"graded-group-set",displayName:"Graded group set (articles only)",widget:b,traverseChildWidgets:function(e,t){return{groups:e.gradedGroups.map(t)}},hidden:!1,tracking:"all",isLintable:!0};t.default=x;const C=u.StyleSheet.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:f.gray76,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row"},indicator:{width:10,height:10,borderRadius:5,backgroundColor:f.grayLight,marginLeft:5,cursor:"pointer"},selectedIndicator:{backgroundColor:f.kaGreen},container:{borderTop:"1px solid ".concat(f.gray76),borderBottom:"1px solid ".concat(f.gray76),backgroundColor:f.tableBackgroundAccent,marginLeft:f.negativePhoneMargin,marginRight:f.negativePhoneMargin,paddingBottom:f.phoneMargin,paddingLeft:f.phoneMargin,paddingRight:f.phoneMargin,paddingTop:10,width:"auto"}})},VWbw:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=s(n("q1tI")),r=o(n("17x9")),l=o(n("fhzG")),u=o(n("oLyU")),d=o(n("rGVj")),p=o(n("eAf/")),c=o(n("9/5/")),h=n("4PhQ"),f=o(n("jH0K")),g=o(n("qoj5")),m=o(n("bHYm")),y=o(n("M++g")),v=o(n("uBl0")),b=o(n("yfnS")),x=o(n("NT9k")),C=s(n("NUXr")),k=o(n("T2HF")),E=s(n("HEOz"));const{number:w,point:M}=p.default,{containerSizeClassPropType:T,getInteractiveBoxFromSizeClass:S}=C,{DeprecationMixin:P}=v.default,I={url:null},_=v.default.eq,N=v.default.deepEq,A="unlimited";function R(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function O(e,t,n){return _(R(e,t,n),0)}function D(e){return _(e,0)?0:e>0?1:-1}function L(e,t){return null==e?t:e}function F(e,t,n){return n[0]<=Math.max(e[0],t[0])&&n[0]>=Math.min(e[0],t[0])&&n[1]<=Math.max(e[1],t[1])&&n[1]>=Math.min(e[1],t[1])}function U(e,t){const n=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],s=u.default.map(n,(function(e){return D(R.apply(void 0,e))}));if(s[0]!==s[1]&&s[2]!==s[3])return!0;for(let e=0;e<4;e++)if(0===s[e]&&F.apply(void 0,n[e]))return!0;return!1}function q(e,t){return u.default.map(u.default.zip(e,t),(function(e){return e[0]-e[1]}))}function H(e){return Math.sqrt(u.default.reduce(e,(function(e,t){return e+Math.pow(t,2)}),0))}function G(e){const t=u.default.zip(e,j(e));return u.default.map(t,(function(e){return H(q.apply(void 0,e))}))}function z(e){const t=u.default.zip(j(e,-1),e,j(e,1)),n=u.default.map(t,(function(e){const t=q(e[1],e[0]),n=q(e[2],e[1]),s=Math.acos((o=t,a=n,u.default.reduce(u.default.zip(o,a),(function(e,t){return e+t[0]*t[1]}),0)/(H(t)*H(n))));var o,a;return D(R.apply(void 0,e))>0?s:-s})),s=u.default.reduce(n,(function(e,t){return e+t}),0);return u.default.map(n,(function(e){return s>0?Math.PI-e:Math.PI+e}))}function B(e,t,n){if(e.length!==t.length)return!1;const s=e.length,o=z(e),a=z(t),i=G(e),r=G(t);for(let e=0;e<2*s;e++){let t=a.slice(),l=r.slice();if(e>=s&&(t.reverse(),l.reverse(),l=j(l,1)),t=j(t,e),l=j(l,e),N(o,t)){const e=u.default.zip(i,l),t=u.default.map(e,(function(e){return e[0]/e[1]})),s=u.default.all(t,(function(e){return _(t[0],e)})),o=u.default.all(e,(function(e){return w.equal(e[0],e[1],n)}));if(s&&o)return!0}}return!1}function V(e,t){return e<t||_(e,t)}function W(e){let t=e[0],n=e[1],s=e[2];const o=e[3];t<0&&(t*=-1,n*=-1,s*=-1);const a=2*Math.PI;for(n<0&&(n*=-1,s*=-1,s+=a/2);s>0;)s-=a;for(;s<0;)s+=a;return[t,n,s,o]}function j(e,t){return t=void 0===t?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function Y(e){return e.replace(/(?:^|-)(.)/g,(function(e,t){return t.toUpperCase()}))}function X(e,t){if(_(e[0],t[0]))return"x = "+e[0].toFixed(3);const n=(t[1]-e[1])/(t[0]-e[0]),s=e[1]-n*e[0];return"y = "+n.toFixed(3)+"x + "+s.toFixed(3)}const K=(0,l.default)({displayName:"InteractiveGraph",propTypes:{containerSizeClass:T.isRequired,trackInteraction:r.default.func.isRequired},getDefaultProps:function(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:I,markings:"graph",showTooltips:!1,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,graph:{type:"linear"}}},getInitialState:function(){return{shouldShowInstructions:this._getShouldShowInstructions()}},UNSAFE_componentWillMount(){P.UNSAFE_componentWillMount.call(this)},componentDidMount:function(){this.setGraphie(this.refs.graph.graphie())},UNSAFE_componentWillReceiveProps:function(e){this.isClickToAddPoints()!==this.isClickToAddPoints(e)&&(this.shouldResetGraphie=!0,this.setState({shouldShowInstructions:this._getShouldShowInstructions(e)})),this.props.backgroundImage.url===e.backgroundImage.url&&this.props.backgroundImage===e.backgroundImage&&this.props.containerSizeClass===e.containerSizeClass||(this.shouldResetGraphie=!0)},componentDidUpdate:function(e,t){const n=e.graph.type,s=this.props.graph.type;n===s&&e.graph.allowReflexAngles===this.props.graph.allowReflexAngles&&e.graph.angleOffsetDeg===this.props.graph.angleOffsetDeg&&e.graph.numPoints===this.props.graph.numPoints&&e.graph.numSides===this.props.graph.numSides&&e.graph.numSegments===this.props.graph.numSegments&&e.graph.showAngles===this.props.graph.showAngles&&e.graph.showSides===this.props.graph.showSides&&e.graph.snapTo===this.props.graph.snapTo&&e.graph.snapDegrees===this.props.graph.snapDegrees||(this["remove"+Y(n)+"Controls"](),this["add"+Y(s)+"Controls"]()),this.shouldResetGraphie&&this.resetGraphie()},_getShouldShowInstructions:function(e){return e=e||this.props,this.isClickToAddPoints(e)&&(null==e.graph.coords||0===e.graph.coords.length)},deprecatedProps:{showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},setGraphie:function(e){this.graphie=e,this.setupGraphie()},handleAddPointsMouseDown:function(e){if(!this.isClickToAddPoints())throw new h.KAError("handleAddPointsClick should not be registeredwhen isClickToAddPoints() is false",h.Errors.Internal);if(!this.isCoordInTrash(e)){let t;if("point"===this.props.graph.type){if(t=this.createPointForPointsType(e,this.points.length),!t.constrain())return void t.remove();this.points.push(t);const n=this.points.length-1;this.points[n].grab(e),this.updateCoordsFromPoints()}else if("polygon"===this.props.graph.type){if(this.polygon.closed())return;t=this.createPointForPolygonType(e,this.points.length),this.points.push(t);const n=this.points.length-1;this.points[n].grab(e),this.updatePolygon()}this.setState({shouldShowInstructions:!1})}},resetGraphie:function(){this.shouldResetGraphie=!1,this.parabola=null,this.sinusoid=null,this.refs.graph.reset()},setupGraphie:function(){this.setTrashCanVisibility(0),this.isClickToAddPoints()&&this.setTrashCanVisibility(.5),this.props.apiOptions.isMobile&&(this.horizHairline=new k.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:b.default.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new k.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.vertHairline.attr({stroke:b.default.INTERACTIVE}),this.vertHairline.hide());this["add"+Y(this.props.graph.type)+"Controls"]()},showHairlines:function(e){this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.range[0][0],e[1]],[this.props.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.range[1][0]],[e[0],this.props.range[1][1]]),this.vertHairline.show())},hideHairlines:function(){this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())},setTrashCanVisibility:function(e){const t=this.graphie;w.equal(e,0)?this.trashCan&&(this.trashCan.remove(),this.trashCan=null):this.props.apiOptions.isMobile||(this.trashCan||(this.trashCan=t.raphael.image("https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png",t.xpixels-40,t.ypixels-40,40,40)),this.trashCan.attr({opacity:e}))},isClickToAddPoints:function(e){return"point"===(e=e||this.props).graph.type&&e.graph.numPoints===A||"polygon"===e.graph.type&&e.graph.numSides===A},_lineStroke:function(){return this.props.isMobile?{"stroke-width":3}:{}},addLine:function(e){const t=this,n=t.graphie,s=K.getLineCoords(t.props.graph,t.props),o=t.points=u.default.map(s,(e=>m.default.addMaybeMobileMovablePoint(this,{coord:e,constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap()],onMove:()=>{const e=u.default.extend({},t.props.graph,{coords:u.default.invoke(o,"coord")});t.onChange({graph:e})}}))),i={points:o,static:!0,normalStyle:(0,a.default)({stroke:this.props.apiOptions.isMobile?b.default.BLUE_C:b.default.INTERACTIVE},this._lineStroke())};"line"===e?i.extendLine=!0:"ray"===e&&(i.extendRay=!0),t.line=m.default.addMovableLine(n,i),o[0].listen("constraints","isLine",(e=>!M.equal(e,o[1].coord()))),o[1].listen("constraints","isLine",(e=>!M.equal(e,o[0].coord())))},removeLine:function(){u.default.invoke(this.points,"remove"),this.line.remove()},addLinearControls:function(){this.addLine("line")},removeLinearControls:function(){this.removeLine()},addQuadraticControls:function(){let e=this.props.graph.coords;e||(e=K.defaultQuadraticCoords(this.props));const t=()=>{const e=u.default.extend({},this.props.graph,{coords:[n.coord(),s.coord(),o.coord()]});this.onChange({graph:e}),this.updateQuadratic()};let n=null;n=this.pointA=m.default.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==s.coord()[0]&&e[0]!==o.coord()[0]],onMove:t});let s=null;s=this.pointB=m.default.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap(),e=>!s||e[0]!==n.coord()[0]&&e[0]!==o.coord()[0]],onMove:t});let o=null;o=this.pointC=m.default.addMaybeMobileMovablePoint(this,{coord:e[2],constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap(),e=>!o||e[0]!==n.coord()[0]&&e[0]!==s.coord()[0]],onMove:t}),this.updateQuadratic()},updateQuadratic:function(){const e=K.getCurrentQuadraticCoefficients(this.props);if(!e)return;const t=e[0],n=e[1],s=e[2];if(this.parabola){const e=this.graphie.svgParabolaPath(t,n,s);this.parabola.attr({path:e})}else this.parabola=this.graphie.parabola(t,n,s),this.parabola.attr((0,a.default)({stroke:this.props.apiOptions.isMobile?b.default.BLUE_C:b.default.DYNAMIC},this._lineStroke())),this.parabola.toBack()},removeQuadraticControls:function(){this.pointA.remove(),this.pointB.remove(),this.pointC.remove(),this.parabola&&(this.parabola.remove(),this.parabola=null)},addSinusoidControls:function(){let e=this.props.graph.coords;e||(e=K.defaultSinusoidCoords(this.props));const t=()=>{const e=u.default.extend({},this.props.graph,{coords:[n.coord(),s.coord()]});this.onChange({graph:e}),this.updateSinusoid()};let n=null;n=this.pointA=m.default.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==s.coord()[0]],onMove:t});const s=this.pointB=m.default.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==n.coord()[0]],onMove:t});this.updateSinusoid()},updateSinusoid:function(){const e=K.getCurrentSinusoidCoefficients(this.props);if(!e)return;const t=e[0],n=e[1],s=e[2],o=e[3];if(this.sinusoid){const e=this.graphie.svgSinusoidPath(t,n,s,o);this.sinusoid.attr({path:e})}else this.sinusoid=this.graphie.sinusoid(t,n,s,o),this.sinusoid.attr((0,a.default)({stroke:this.props.apiOptions.isMobile?b.default.BLUE_C:b.default.DYNAMIC},this._lineStroke())),this.sinusoid.toBack()},removeSinusoidControls:function(){this.pointA.remove(),this.pointB.remove(),this.sinusoid&&(this.sinusoid.remove(),this.sinusoid=null)},addCircleControls:function(){const e=this.graphie,t=u.default.min(e.snap),n=this.circle=e.addCircleGraph({center:this.props.graph.center||[0,0],radius:this.props.graph.radius||u.default.min(this.props.step),snapX:e.snap[0],snapY:e.snap[1],minRadius:t,snapRadius:t});(0,d.default)(n).on("move",(()=>{const e=u.default.extend({},this.props.graph,{center:n.center,radius:n.radius});this.onChange({graph:e})}))},removeCircleControls:function(){this.circle.remove()},addLinearSystemControls:function(){const e=this.graphie,t=K.getLinearSystemCoords(this.props.graph,this.props),n=[b.default.INTERACTIVE,b.default.GREEN],s=this.points=u.default.map(t,((e,t)=>{const s=[];for(let o=0;o<e.length;o+=1){const a=e[o];s.push(m.default.addMaybeMobileMovablePoint(this,{coord:a,constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap(),e=>{const t=s[1-o];if(t)return!M.equal(e,t.coord())}],onMove:()=>{const e=u.default.extend({},this.props.graph,{coords:u.default.map(this.points,(e=>u.default.invoke(e,"coord")))});this.onChange({graph:e})},normalStyle:{fill:n[t]},highlightStyle:{fill:n[t]}}))}return s}));this.lines=u.default.map(s,((t,s)=>m.default.addMovableLine(e,{points:t,static:!0,extendLine:!0,normalStyle:{stroke:n[s]}})))},removeLinearSystemControls:function(){u.default.invoke(this.lines,"remove"),u.default.map(this.points,(e=>u.default.invoke(e,"remove")))},isCoordInTrash:function(e){if(this.props.apiOptions.isMobile)return!1;const t=this.graphie,n=t.scalePoint(e);return n[0]>=t.xpixels-40&&n[1]>=t.ypixels-40},createPointForPointsType:function(e,t){const n=this,s=()=>{n.points=u.default.filter(n.points,(function(e){return e!==o})),n.updateCoordsFromPoints(),setTimeout(o.remove.bind(o),0)};let o=null;return o=m.default.addMaybeMobileMovablePoint(this,(0,a.default)({coord:e,constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap(),function(e){return u.default.all(n.points,(function(t){return o===t||!M.equal(e,t.coord())}))}],onMoveStart:function(){n.isClickToAddPoints()&&n.setTrashCanVisibility(1)},onMove:n.updateCoordsFromPoints,onMoveEnd:function(e){n.isClickToAddPoints()&&(n.isCoordInTrash(e)&&s(),n.setTrashCanVisibility(.5))}},this.props.apiOptions.isMobile&&n.isClickToAddPoints()?{onRemove:s}:{})),o},removePoint:function(e){let t=null;return this.points=u.default.filter(this.points,(function(n,s){return n!==e||(t=s,!1)})),t},createPointForPolygonType:function(e,t){const n=!u.default.contains(["angles","sides"],this.props.graph.snapTo),s=e=>(t+e+this.points.length)%this.points.length,o=()=>{const e=this.removePoint(r);this.polygon.closed()&&(this.points=j(this.points,e),this.polygon.update({closed:!1})),this.updatePolygon(),this.clearCoords(),setTimeout(r.remove.bind(r),0)},i=(0,c.default)(((e,t)=>{e.state.isInitialMove=t}),1e3),r=m.default.addMaybeMobileMovablePoint(this,(0,a.default)({coord:e,constraints:[m.default.MovablePoint.constraints.bound(),n?m.default.MovablePoint.constraints.snap():null,e=>{if(null==this.points||0===this.points.length)return!0;const n=u.default.invoke(this.points,"coord");if(n[t]=e,!this.isClickToAddPoints()){if(O(n[s(-2)],n[s(-1)],n[t])||O(n[s(-1)],n[t],n[s(1)])||O(n[t],n[s(1)],n[s(2)]))return!1;const e=u.default.zip(n,j(n));if(this.points.length>3)for(let t=-1;t<=0;t++){const n=e[s(t)],o=u.default.without(e,n,e[s(t-1)],e[s(t+1)]);for(let e=0;e<o.length;e++){if(U(n,o[e]))return!1}}}if("angles"===this.props.graph.snapTo&&this.points.length>2){const e=u.default.map(z(n),(function(e){return 180*e/Math.PI}));u.default.each([-1,1],(function(t){e[s(t)]=Math.round(e[s(t)])}));const o=function(e,t,o){return(x.default.findAngle(n[s(e)],n[s(o)],n[s(t)])+360)%360},a=[e[s(-1)]-o(-2,-1,1),e[s(1)]-o(-1,1,2)];if(a[2]=180-(a[0]+a[1]),u.default.any(a,(function(e){return V(e,1)})))return!1;const i=H(q(n[s(-1)],n[s(1)])),r=1===D(R(n[s(-1)],n[s(1)],n[t])),l=Math.sin(a[1]*Math.PI/180)/Math.sin(a[2]*Math.PI/180)*i,d=x.default.findAngle(n[s(1)],n[s(-1)]),p=this.graphie.polar(l,d+(r?1:-1)*a[0]);return this.graphie.addPoints(n[s(-1)],p)}if("sides"===this.props.graph.snapTo&&this.points.length>1){const e=u.default.map([[n[s(-1)],n[t]],[n[t],n[s(1)]],[n[s(-1)],n[s(1)]]],(function(e){return H(q.apply(void 0,e))}));if(u.default.each([0,1],(function(t){e[t]=Math.round(e[t])})),V(e[1]+e[2],e[0])||V(e[0]+e[2],e[1])||V(e[0]+e[1],e[2]))return!1;const r=(o=e[0],a=e[2],i=e[1],180*Math.acos((o*o+a*a-i*i)/(2*o*a))/Math.PI),l=x.default.findAngle(n[s(1)],n[s(-1)]),d=1===D(R(n[s(-1)],n[s(1)],n[t])),p=this.graphie.polar(e[0],l+(d?1:-1)*r);return this.graphie.addPoints(n[s(-1)],p)}var o,a,i;return!0}],onMoveStart:()=>{this.isClickToAddPoints()&&this.setTrashCanVisibility(1)},onMove:()=>{this.polygon.closed()&&this.updateCoordsFromPoints()},onMoveEnd:e=>{const t=this.points.length>1&&(r===this.points[0]&&M.equal(e,u.default.last(this.points).coord())||r===u.default.last(this.points)&&M.equal(e,this.points[0].coord()));if(this.isClickToAddPoints()){if(this.isCoordInTrash(e))o();else if(t){const e=this.points.pop();this.points.length>2?(this.polygon.update({closed:!0}),this.updateCoordsFromPoints()):(this.polygon.update({closed:!1}),this.clearCoords()),this.updatePolygon(),setTimeout(e.remove.bind(e),0)}else{if(u.default.any(this.points,(function(t){return t!==r&&M.equal(t.coord(),e)})))this.removePoint(r),this.points.length<3?(this.polygon.update({closed:!1}),this.clearCoords()):this.polygon.closed()&&this.updateCoordsFromPoints(),this.updatePolygon(),setTimeout(r.remove.bind(r),0);else{const e=r===u.default.head(this.points)||r===u.default.last(this.points),t=!r.hasMoved(),n=!r.state.isInitialMove,s=!this.polygon.closed(),o=this.points.length>2;e&&t&&n&&s&&o&&(this.polygon.update({closed:!0}),this.updatePolygon(),this.updateCoordsFromPoints())}}this.setTrashCanVisibility(.5)}i(r,!1)}},this.props.apiOptions.isMobile&&this.isClickToAddPoints()?{onRemove:o}:{}));return r.state.isInitialMove=!0,r},updateCoordsFromPoints:function(){const e=u.default.extend({},this.props.graph,{coords:u.default.map(this.points,(function(e){return u.default.result(e,"coord")}))});this.onChange({graph:e})},clearCoords:function(){const e=u.default.extend({},this.props.graph,{coords:null});this.onChange({graph:e})},onChange:function(e){this.props.onChange(e),this.props.trackInteraction()},addPointControls:function(){const e=K.getPointCoords(this.props.graph,this.props);this.points=[],this.points=u.default.map(e,this.createPointForPointsType,this)},removePointControls:function(){u.default.invoke(this.points,"remove")},addSegmentControls:function(){const e=this,t=this.graphie,n=K.getSegmentCoords(this.props.graph,this.props),s=e=>m.default.addMaybeMobileMovablePoint(this,e);this.points=[],this.lines=u.default.map(n,(function(n,o){const i=function(){const t=u.default.extend({},e.props.graph,{coords:u.default.invoke(e.lines,"coords")});e.onChange({graph:t})},r=[];for(let e=0;e<n.length;e+=1){const t=n[e];r.push(s({coord:t,constraints:[m.default.MovablePoint.constraints.bound(),m.default.MovablePoint.constraints.snap(),t=>{const n=r[1-e];return!!n&&!M.equal(t,n.coord())}],onMove:i}))}e.points=e.points.concat(r);const l=m.default.addMovableLine(t,{points:r,static:!1,constraints:[m.default.MovableLine.constraints.bound(),m.default.MovableLine.constraints.snap()],onMove:[m.default.MovableLine.onMove.updatePoints,i],normalStyle:(0,a.default)({stroke:this.props.apiOptions.isMobile?b.default.BLUE_C:b.default.INTERACTIVE},this._lineStroke()),highlightStyle:(0,a.default)({stroke:this.props.apiOptions.isMobile?b.default.BLUE_C:b.default.INTERACTING},this._lineStroke())});return u.default.invoke(r,"toFront"),l}),this)},removeSegmentControls:function(){u.default.invoke(this.points,"remove"),u.default.invoke(this.lines,"remove")},addRayControls:function(){this.addLine("ray")},removeRayControls:function(){this.removeLine()},addPolygonControls:function(){this.polygon=null;const e=K.getPolygonCoords(this.props.graph,this.props);this.points=[],this.points=u.default.map(e,this.createPointForPolygonType,this),this.updatePolygon()},updatePolygon:function(){let e;e=this.polygon?this.polygon.closed():this.points.length>=3;const t=this.graphie,n=this.points.length,s=!u.default.contains(["angles","sides"],this.props.graph.snapTo),o=u.default.times(n,(function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?"angles"===this.props.graph.snapTo?"$deg0":"$deg1":""}),this),i=u.default.times(n,(function(t){return e||0!==t&&t!==n-1}),this),r=u.default.times(n,(function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?1:0}),this),l=u.default.times(n,(function(t){return!this.props.graph.showSides||!e&&t===n-1?"":"sides"===this.props.graph.snapTo?"$len0":"$len1"}),this);if(null==this.polygon){const n=this;n.polygon=m.default.addMovablePolygon(t,{constraints:[m.default.MovablePolygon.constraints.bound(),s?m.default.MovablePolygon.constraints.snap():null],closed:e,points:n.points,angleLabels:o,showRightAngleMarkers:i,numArcs:r,sideLabels:l,onMove:[m.default.MovablePolygon.onMove.updatePoints,function(){this.closed()&&n.updateCoordsFromPoints()}],normalStyle:(0,a.default)({stroke:this.props.apiOptions.isMobile?b.default.BLUE_C:b.default.INTERACTIVE},this._lineStroke())})}else this.polygon.update({closed:e,points:this.points,angleLabels:o,showRightAngleMarkers:i,numArcs:r,sideLabels:l})},removePolygonControls:function(){u.default.invoke(this.points,"remove"),this.polygon.remove()},addAngleControls:function(){const e=this.graphie,t=K.getAngleCoords(this.props.graph,this.props);this.points=u.default.map(t,(function(t,n){return e.addMovablePoint(u.default.extend({coord:t,normalStyle:{stroke:b.default.INTERACTIVE,fill:b.default.INTERACTIVE}},1===n?{snapX:e.snap[0],snapY:e.snap[1]}:{}))})),this.angle=e.addMovableAngle({points:this.points,snapDegrees:this.props.graph.snapDegrees||1,snapOffsetDeg:this.props.graph.angleOffsetDeg||0,angleLabel:this.props.graph.showAngles?"$deg0":"",pushOut:2,allowReflex:L(this.props.graph.allowReflexAngles,!0)}),(0,d.default)(this.angle).on("move",(()=>{const e=u.default.extend({},this.props.graph,{coords:this.angle.getClockwiseCoords()});this.onChange({graph:e})}))},removeAngleControls:function(){u.default.invoke(this.points,"remove"),this.angle.remove()},toggleShowAngles:function(){const e=u.default.extend({},this.props.graph,{showAngles:!this.props.graph.showAngles});this.onChange({graph:e})},toggleShowSides:function(){const e=u.default.extend({},this.props.graph,{showSides:!this.props.graph.showSides});this.onChange({graph:e})},getUserInput:function(){return K.getUserInputFromProps(this.props)},simpleValidate:function(e){return K.validate(this.getUserInput(),e,this)},focus:d.default.noop,render:function(){let e,t;if(this.props.flexibleType)if(e=i.createElement("select",{value:this.props.graph.type,onChange:e=>{const t=e.target.value;this.onChange({graph:{type:t}})}},i.createElement("option",{value:"linear"},E.doNotTranslate("Linear function")),i.createElement("option",{value:"quadratic"},E.doNotTranslate("Quadratic function")),i.createElement("option",{value:"sinusoid"},E.doNotTranslate("Sinusoid function")),i.createElement("option",{value:"circle"},E.doNotTranslate("Circle")),i.createElement("option",{value:"point"},E.doNotTranslate("Point(s)")),i.createElement("option",{value:"linear-system"},E.doNotTranslate("Linear System")),i.createElement("option",{value:"polygon"},E.doNotTranslate("Polygon")),i.createElement("option",{value:"segment"},E.doNotTranslate("Line Segment(s)")),i.createElement("option",{value:"ray"},E.doNotTranslate("Ray")),i.createElement("option",{value:"angle"},E.doNotTranslate("Angle"))),"point"===this.props.graph.type)t=i.createElement("select",{key:"point-select",value:this.props.graph.numPoints||1,onChange:e=>{const t=+e.target.value||e.target.value;this.onChange({graph:{type:"point",numPoints:t,coords:null}})}},u.default.map(u.default.range(1,7),(function(e){return i.createElement("option",{key:e,value:e},e," ",E.doNotTranslate("point"),e>1&&E.doNotTranslate('"s"'))})),i.createElement("option",{value:A},E.doNotTranslate("unlimited")));else if("polygon"===this.props.graph.type)t=i.createElement("div",null,i.createElement("div",null,i.createElement("select",{key:"polygon-select",value:this.props.graph.numSides||3,onChange:e=>{const t=+e.target.value||e.target.value,n=u.default.extend({},this.props.graph,{numSides:t,coords:null,snapTo:"grid"});this.onChange({graph:n})}},u.default.map(u.default.range(3,13),(function(e){return i.createElement("option",{key:e,value:e},E.doNotTranslate("%(n)s sides",{n:e}))})),i.createElement("option",{value:A},E.doNotTranslate("unlimited sides")))),i.createElement("div",null,i.createElement("label",null," ",E.doNotTranslate("Snap to")," ",i.createElement("select",{key:"polygon-snap",value:this.props.graph.snapTo,onChange:e=>{const t=u.default.extend({},this.props.graph,{snapTo:e.target.value,coords:null});this.onChange({graph:t})}},i.createElement("option",{value:"grid"},E.doNotTranslate("grid")),this.props.graph.numSides!==A&&i.createElement(i.Fragment,null,i.createElement("option",{value:"angles"}," ",E.doNotTranslate("interior angles")," "),i.createElement("option",{value:"sides"}," ",E.doNotTranslate("side measures")," ")))),i.createElement(g.default,null,i.createElement("p",null,E.doNotTranslate("These options affect the movement of the vertex points. The grid option will guide the points to the nearest half step along the grid.")),i.createElement("p",null,E.doNotTranslate("The interior angle and side measure options guide the points to the nearest whole angle or side"))," ",E.doNotTranslate("measure respectively.")," ")),i.createElement("div",null,i.createElement("label",null,E.doNotTranslate("Show angle measures:")," ",i.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles})),i.createElement(g.default,null,i.createElement("p",null,E.doNotTranslate("Displays the interior angle measures.")))),i.createElement("div",null,i.createElement("label",null,E.doNotTranslate("Show side measures:")," ",i.createElement("input",{type:"checkbox",checked:this.props.graph.showSides,onChange:this.toggleShowSides})),i.createElement(g.default,null,i.createElement("p",null,E.doNotTranslate("Displays the side lengths.")))));else if("segment"===this.props.graph.type)t=i.createElement("select",{key:"segment-select",value:this.props.graph.numSegments||1,onChange:e=>{const t=+e.target.value;this.onChange({graph:{type:"segment",numSegments:t,coords:null}})}},u.default.map(u.default.range(1,7),(function(e){return i.createElement("option",{key:e,value:e},e," ",E.doNotTranslate("segment"),e>1&&E.doNotTranslate("s"))})));else if("angle"===this.props.graph.type){const e=L(this.props.graph.allowReflexAngles,!0);t=i.createElement("div",null,i.createElement("div",null,i.createElement("label",null,E.doNotTranslate("Show angle measure:")," ",i.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles}))),i.createElement("div",null,i.createElement("label",null,E.doNotTranslate("Allow reflex angles:")," ",i.createElement("input",{type:"checkbox",checked:e,onChange:t=>{this.onChange({graph:u.default.extend({},this.props.graph,{allowReflexAngles:!e,coords:null})})}})),i.createElement(g.default,null,i.createElement("p",null,E.doNotTranslate("Reflex angles are angles with a measure greater than 180 degrees.")),i.createElement("p",null,E.doNotTranslate("By default, these should remain enabled.")))),i.createElement("div",null,i.createElement("label",null,E.doNotTranslate("Snap to increments of")," ",i.createElement(y.default,{key:"degree-snap",placeholder:1,value:this.props.graph.snapDegrees,onChange:e=>{this.onChange({graph:u.default.extend({},this.props.graph,{snapDegrees:Math.abs(e),coords:null})})}})," ",E.doNotTranslate("degrees")," ")),i.createElement("div",null,i.createElement("label",null," ",E.doNotTranslate("With an offset of")," ",i.createElement(y.default,{key:"angle-offset",placeholder:0,value:this.props.graph.angleOffsetDeg,onChange:e=>{this.onChange({graph:u.default.extend({},this.props.graph,{angleOffsetDeg:e,coords:null})})}})," ",E.doNotTranslate("degrees")," ")))}const n=S(this.props.containerSizeClass);let s;this.isClickToAddPoints()&&this.state.shouldShowInstructions?"point"===this.props.graph.type?s=E._("Click to add points"):"polygon"===this.props.graph.type&&(s=E._("Click to add vertices")):s=void 0;const o=this.isClickToAddPoints()?this.handleAddPointsMouseDown:null,a=this.props.gridStep||v.default.getGridStep(this.props.range,this.props.step,n[0]),r=this.props.snapStep||v.default.snapStepFromGridStep(a),l=this.props.apiOptions.isMobile;return i.createElement("div",{className:"perseus-widget perseus-widget-interactive-graph",style:{width:n[0],height:this.props.flexibleType?"auto":n[1]}},i.createElement(f.default,{instructions:s,ref:"graph",box:n,labels:this.props.labels,range:this.props.range,step:l?v.default.constrainedTickStepsFromTickSteps(this.props.step,this.props.range):this.props.step,gridStep:a,snapStep:r,markings:this.props.markings,backgroundImage:this.props.backgroundImage,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onMouseDown:o,onGraphieUpdated:this.setGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:l}),e,t)}});u.default.extend(K,{getQuadraticCoefficients:function(e){const t=e[0],n=e[1],s=e[2],o=(t[0]-n[0])*(t[0]-s[0])*(n[0]-s[0]);if(0===o)return;return[(s[0]*(n[1]-t[1])+n[0]*(t[1]-s[1])+t[0]*(s[1]-n[1]))/o,(s[0]*s[0]*(t[1]-n[1])+n[0]*n[0]*(s[1]-t[1])+t[0]*t[0]*(n[1]-s[1]))/o,(n[0]*s[0]*(n[0]-s[0])*t[1]+s[0]*t[0]*(s[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*s[1])/o]},getSinusoidCoefficients:function(e){const t=e[0],n=e[1],s=n[1]-t[1],o=Math.PI/(2*(n[0]-t[0]));return[s,o,t[0]*o,t[1]]},getLineCoords:function(e,t){return e.coords||K.pointsFromNormalized(t,[[.25,.75],[.75,.75]])},getPointCoords:function(e,t){const n=e.numPoints||1;let s=e.coords;if(s)return s;switch(n){case 1:s=[e.coord||[0,0]];break;case 2:s=[[-5,0],[5,0]];break;case 3:s=[[-5,0],[0,0],[5,0]];break;case 4:s=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:s=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:s=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case A:s=[]}const o=K.normalizeCoords(s,[[-10,10],[-10,10]]);return K.pointsFromNormalized(t,o)},getLinearSystemCoords:function(e,t){return e.coords||u.default.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],(e=>K.pointsFromNormalized(t,e)))},getPolygonCoords:function(e,t){let n=e.coords;if(n)return n;const s=e.numSides||3;if(s===A)n=[];else{const t=2*Math.PI/s,o=(1/s-.5)*Math.PI,a="sides"===e.snapTo?Math.sqrt(3)/3*7:4;n=u.default.times(s,(function(e){return[a*Math.cos(e*t+o),a*Math.sin(e*t+o)]}))}n=K.normalizeCoords(n,[[-10,10],[-10,10]]);const o=!u.default.contains(["angles","sides"],e.snapTo);return n=K.pointsFromNormalized(t,n,!o),n},getSegmentCoords:function(e,t){const n=e.coords;if(n)return n;const s={1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[e.numSegments||1],o=[[-10,10],[-10,10]];return u.default.map(s,(function(e){let n=[[-5,e],[5,e]];return n=K.normalizeCoords(n,o),n=K.pointsFromNormalized(t,n),n}))},getAngleCoords:function(e,t){let n=e.coords;if(n)return n;const s=e.snapDegrees||1;let o=s;for(;o<20;)o+=s;o=o*Math.PI/180;const a=(e.angleOffsetDeg||0)*Math.PI/180;n=K.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);const i=H(q.apply(void 0,n));return n[0]=[n[1][0]+i*Math.cos(a),n[1][1]+i*Math.sin(a)],n[2]=[n[1][0]+i*Math.cos(o+a),n[1][1]+i*Math.sin(o+a)],n},normalizeCoords:function(e,t){return u.default.map(e,(function(e){return u.default.map(e,(function(e,n){const s=t[n][1]-t[n][0];return(e+t[n][1])/s}))}))},getEquationString:function(e){const t="get"+Y(e.graph.type)+"EquationString";return K[t](e)},pointsFromNormalized:function(e,t,n){return u.default.map(t,(function(t){return u.default.map(t,(function(t,s){const o=e.range[s];if(n)return o[0]+(o[1]-o[0])*t;const a=e.step[s],i=function(e,t){return Math.floor((e[1]-e[0])/t)}(o,a),r=Math.round(t*i);return o[0]+a*r}))}))},getLinearEquationString:function(e){const t=K.getLineCoords(e.graph,e);if(_(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);const n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),s=t[0][1]-n*t[0][0];return _(n,0)?"y = "+s.toFixed(3):"y = "+n.toFixed(3)+"x + "+s.toFixed(3)},getCurrentQuadraticCoefficients:function(e){const t=e.graph.coords||K.defaultQuadraticCoords(e);return K.getQuadraticCoefficients(t)},defaultQuadraticCoords:function(e){return K.pointsFromNormalized(e,[[.25,.75],[.5,.25],[.75,.75]])},getQuadraticEquationString:function(e){const t=K.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)},getCurrentSinusoidCoefficients:function(e){const t=e.graph.coords||K.defaultSinusoidCoords(e);return K.getSinusoidCoefficients(t)},defaultSinusoidCoords:function(e){return K.pointsFromNormalized(e,[[.5,.5],[.65,.6]])},getSinusoidEquationString:function(e){const t=K.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)},getCircleEquationString:function(e){const t=e.graph,n=t.center||[0,0],s=t.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+s},getLinearSystemEquationString:function(e){const t=K.getLinearSystemCoords(e.graph,e);return"\n"+X(t[0][0],t[0][1])+"\n"+X(t[1][0],t[1][1])+"\n"+function(e,t){const n=e[0][0],s=e[0][1],o=e[1][0],a=e[1][1],i=t[0][0],r=t[0][1],l=t[1][0],u=t[1][1],d=(n-o)*(r-u)-(s-a)*(i-l);if(Math.abs(d)<1e-9)return"Lines are parallel";const p=((n*a-s*o)*(r-u)-(s-a)*(i*u-r*l))/d;return"Intersection: ("+(((n*a-s*o)*(i-l)-(n-o)*(i*u-r*l))/d).toFixed(3)+", "+p.toFixed(3)+")"}(t[0],t[1])},getPointEquationString:function(e){return K.getPointCoords(e.graph,e).map((function(e){return"("+e[0]+", "+e[1]+")"})).join(", ")},getSegmentEquationString:function(e){const t=K.getSegmentCoords(e.graph,e);return u.default.map(t,(function(e){return"["+u.default.map(e,(function(e){return"("+e.join(", ")+")"})).join(" ")+"]"})).join(" ")},getRayEquationString:function(e){const t=K.getLineCoords(e.graph,e),n=t[0],s=t[1];let o=K.getLinearEquationString(e);return n[0]>s[0]?o+=" (for x <= "+n[0].toFixed(3)+")":n[0]<s[0]?o+=" (for x >= "+n[0].toFixed(3)+")":n[1]>s[1]?o+=" (for y <= "+n[1].toFixed(3)+")":o+=" (for y >= "+n[1].toFixed(3)+")",o},getPolygonEquationString:function(e){const t=K.getPolygonCoords(e.graph,e);return u.default.map(t,(function(e){return"("+e.join(", ")+")"})).join(" ")},getAngleEquationString:function(e){const t=K.getAngleCoords(e.graph,e);return x.default.findAngle(t[2],t[0],t[1]).toFixed(0)+"° angle at ("+t[1].join(", ")+")"},validate:function(e,t,n){const s=!!(e.coords||e.center&&e.radius);if(e.type===t.correct.type&&s)if("linear"===e.type){const n=e.coords,s=t.correct.coords;if(O(s[0],s[1],n[0])&&O(s[0],s[1],n[1]))return{type:"points",earned:1,total:1,message:null}}else if("linear-system"===e.type){const n=e.coords,s=t.correct.coords;if(O(s[0][0],s[0][1],n[0][0])&&O(s[0][0],s[0][1],n[0][1])&&O(s[1][0],s[1][1],n[1][0])&&O(s[1][0],s[1][1],n[1][1])||O(s[0][0],s[0][1],n[1][0])&&O(s[0][0],s[0][1],n[1][1])&&O(s[1][0],s[1][1],n[0][0])&&O(s[1][0],s[1][1],n[0][1]))return{type:"points",earned:1,total:1,message:null}}else if("quadratic"===e.type){const n=this.getQuadraticCoefficients(e.coords),s=this.getQuadraticCoefficients(t.correct.coords);if(N(n,s))return{type:"points",earned:1,total:1,message:null}}else if("sinusoid"===e.type){const n=this.getSinusoidCoefficients(e.coords),s=this.getSinusoidCoefficients(t.correct.coords),o=W(n),a=W(s);if(N(o,a))return{type:"points",earned:1,total:1,message:null}}else if("circle"===e.type){if(N(e.center,t.correct.center)&&_(e.radius,t.correct.radius))return{type:"points",earned:1,total:1,message:null}}else if("point"===e.type){let s=e.coords,o=K.getPointCoords(t.correct,n);if(s=s.slice(),o=o.slice(),s.sort(),o.sort(),N(s,o))return{type:"points",earned:1,total:1,message:null}}else if("polygon"===e.type){const n=e.coords.slice(),s=t.correct.coords.slice();let o;if("similar"===t.correct.match?o=B(n,s,Number.POSITIVE_INFINITY):"congruent"===t.correct.match?o=B(n,s,w.DEFAULT_TOLERANCE):"approx"===t.correct.match?o=B(n,s,.1):(n.sort(),s.sort(),o=N(n,s)),o)return{type:"points",earned:1,total:1,message:null}}else if("segment"===e.type){let n=e.coords.slice(),s=t.correct.coords.slice();if(n=u.default.invoke(n,"sort").sort(),s=u.default.invoke(s,"sort").sort(),N(n,s))return{type:"points",earned:1,total:1,message:null}}else if("ray"===e.type){const n=e.coords,s=t.correct.coords;if(N(n[0],s[0])&&O(s[0],s[1],n[1]))return{type:"points",earned:1,total:1,message:null}}else if("angle"===e.type){const n=e.coords,s=t.correct.coords;let o;if("congruent"===t.correct.match){const e=u.default.map([n,s],(function(e){return(x.default.findAngle(e[2],e[0],e[1])+360)%360}));o=_.apply(void 0,e)}else o=N(n[1],s[1])&&O(s[1],s[0],n[0])&&O(s[1],s[2],n[2]);if(o)return{type:"points",earned:1,total:1,message:null}}return!s||u.default.isEqual(e,t.graph)?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}},getUserInputFromProps:function(e){return e.graph}});var Q={name:"interactive-graph",displayName:"Interactive graph",widget:K};t.default=Q},Voua:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("oLyU")),d=n("eAf/"),p=o(n("mbWs")),c=s(n("+jAD")),h=o(n("Giaf")),f=o(n("uBl0"));const g=h.default.Label,m=h.default.Line,y=h.default.MovablePoint,v=h.default.MovableLine,b=h.default.Plot,x=h.default.PlotParametric,C=h.default.Point,k=h.default.Rect,{unescapeMathMode:E}=f.default,w=(e,t)=>{let n=e+"||"+(t=t||{}).decimal_separatpr+"||";const s=t.functions,o=s?s.length:0;for(let e=0;e<o;e++)n+=s[e]+"|";return n},M=Object.create(null),T=(e,t)=>{const n=w(e,t);let s=M[n];return s||(s=p.default.parse(e,t),M[n]=s,s)},S=Object.create(null),P=(e,t)=>{const n=w(e,t);let s=S[n];if(s)return s;const o=p.default.parse(e,t).expr;return s=o?o.compile():function(){return 0},S[n]=s,s};class I extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"_getInitialVariables",(e=>{const t={};return u.default.each(u.default.where(e,{type:"movable-point"}),(function(e){const n=e.options.varSubscript,s=T(e.options.startX||"0").expr,o=T(e.options.startY||"0").expr;let a=0,i=0;s&&(a=s.eval({})||0),o&&(i=o.eval({})||0),t["x_"+n]=a,t["y_"+n]=i}),this),u.default.each(u.default.where(e,{type:"movable-line"}),(function(e){const n=e.options.startSubscript,s=e.options.endSubscript,o=T(e.options.startX||"0").expr,a=T(e.options.startY||"0").expr,i=T(e.options.endX||"0").expr,r=T(e.options.endY||"0").expr;let l=0,u=0,d=0,p=0;o&&(l=o.eval({})||0),a&&(u=a.eval({})||0),i&&(d=i.eval({})||0),r&&(p=r.eval({})||0),t["x_"+n]=l,t["y_"+n]=u,t["x_"+s]=d,t["y_"+s]=p}),this),u.default.each(u.default.where(e,{type:"function"}),(function(e){t[e.options.funcName]=e.options.value})),t})),(0,i.default)(this,"_getInitialFunctions",(e=>u.default.map(u.default.where(e,{type:"function"}),(e=>e.options.funcName)))),(0,i.default)(this,"_setupGraphie",((e,t)=>{e.graphInit(u.default.extend({},t,{grid:u.default.contains(["graph","grid"],this.props.graph.markings),axes:u.default.contains(["graph"],this.props.graph.markings),ticks:u.default.contains(["graph"],this.props.graph.markings),labels:u.default.contains(["graph"],this.props.graph.markings),labelFormat:function(e){return"\\small{"+e+"}"},axisArrows:"<->",unityLabels:!1}))})),(0,i.default)(this,"_updatePointLocation",((e,t)=>{const n=u.default.clone(this.state.variables);n["x_"+e]=t[0],n["y_"+e]=t[1],this.setState({variables:n}),this.props.trackInteraction()})),(0,i.default)(this,"_updateLineLocation",((e,t)=>{const n=this._eval("("+e.endX+")-("+e.startX+")"),s=this._eval("("+e.endY+")-("+e.startY+")"),o=d.vector.add(t,[n,s]),a=u.default.clone(this.state.variables);a["x_"+e.startSubscript]=t[0],a["y_"+e.startSubscript]=t[1],a["x_"+e.endSubscript]=o[0],a["y_"+e.endSubscript]=o[1],this.setState({variables:a}),this.props.trackInteraction()})),(0,i.default)(this,"_eval",((e,t)=>{const n=P(e,{functions:this.state.functions}),s=u.default.extend({},this.state.variables,t);return u.default.each(u.default.keys(s),(e=>{if(u.default.isString(s[e])){const t=P(s[e],{functions:this.state.functions});s[e]=function(e){return t(u.default.extend({},s,{x:e}))}}})),n(s)||0})),(0,i.default)(this,"_extractVars",(e=>{if(null==e)return[];let t=[];return u.default.each(e.args(),(function(e){e&&"Expr"===e.constructor.name&&(t=t.concat(this._extractVars(e)))}),this),"Var"===e.name()&&t.push(e.prettyPrint()),t})),(0,i.default)(this,"change",((...e)=>c.change.apply(this,e))),(0,i.default)(this,"getUserInput",(()=>({}))),(0,i.default)(this,"simpleValidate",(e=>I.validate(this.getUserInput(),e))),(0,i.default)(this,"state",{variables:this._getInitialVariables(this.props.elements),functions:this._getInitialFunctions(this.props.elements)})}UNSAFE_componentWillReceiveProps(e){u.default.isEqual(this.props.elements,e.elements)||this.setState({variables:this._getInitialVariables(e.elements),functions:this._getInitialFunctions(e.elements)})}render(){const e=this.props.graph.range;let t=this.props.graph.labels;return"graph"===this.props.graph.markings&&(t=this.props.graph.labels.map((e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e))),r.createElement(h.default,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},"graph"===this.props.graph.markings&&r.createElement(g,{coord:[0,e[1][1]],text:t[1],direction:"above"}),"graph"===this.props.graph.markings&&r.createElement(g,{coord:[e[0][1],0],text:t[0],direction:"right"}),u.default.map(this.props.elements,(function(e,t){if("point"===e.type)return r.createElement(C,{key:e.key,coord:[this._eval(e.options.coordX),this._eval(e.options.coordY)],color:e.options.color});if("line"===e.type){const t=[this._eval(e.options.startX),this._eval(e.options.startY)],n=[this._eval(e.options.endX),this._eval(e.options.endY)];return r.createElement(m,{key:e.key,start:t,end:n,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,arrows:e.options.arrows}})}if("movable-point"===e.type){const t=[t=>[Math.max(this._eval(e.options.constraintXMin),Math.min(this._eval(e.options.constraintXMax),t[0])),Math.max(this._eval(e.options.constraintYMin),Math.min(this._eval(e.options.constraintYMax),t[1]))]];return"snap"===e.options.constraint?t.push(y.constraints.snap(e.options.snap)):"x"===e.options.constraint?t.push((t=>[this._eval(e.options.constraintFn,{y:t[1]}),t[1]])):"y"===e.options.constraint&&t.push((t=>[t[0],this._eval(e.options.constraintFn,{x:t[0]})])),r.createElement(y,{key:e.key,coord:[this.state.variables["x_"+e.options.varSubscript],this.state.variables["y_"+e.options.varSubscript]],constraints:t,foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap,onMove:u.default.partial(this._updatePointLocation,e.options.varSubscript)})}if("movable-line"===e.type){const t=[t=>[Math.max(this._eval(e.options.constraintXMin),Math.min(this._eval(e.options.constraintXMax),t[0])),Math.max(this._eval(e.options.constraintYMin),Math.min(this._eval(e.options.constraintYMax),t[1]))]];"snap"===e.options.constraint?t.push(y.constraints.snap(e.options.snap)):"x"===e.options.constraint?t.push((t=>[this._eval(e.options.constraintFn,{y:t[1]}),t[1]])):"y"===e.options.constraint&&t.push((t=>[t[0],this._eval(e.options.constraintFn,{x:t[0]})]));const n=[this.state.variables["x_"+e.options.startSubscript],this.state.variables["y_"+e.options.startSubscript]],s=[this.state.variables["x_"+e.options.endSubscript],this.state.variables["y_"+e.options.endSubscript]];return r.createElement(v,{key:e.key,constraints:t,onMove:u.default.bind(this._updateLineLocation,this,e.options),foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap},r.createElement(y,{coord:n,static:!0,normalStyle:{stroke:"none",fill:"none"}}),r.createElement(y,{coord:s,static:!0,normalStyle:{stroke:"none",fill:"none"}}))}if("function"===e.type){const t=t=>this._eval(e.options.value,{x:t}),n=u.default.without(this._extractVars(T(e.options.value).expr),"x"),s=u.default.object(n,u.default.map(n,(e=>this.state.variables[e]))),o=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return r.createElement(b,{key:e.key,fn:t,foo_fn:e.options.value,foo_varvalues:s,range:o,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("parametric"===e.type){const t=t=>[this._eval(e.options.x,{t}),this._eval(e.options.y,{t})],n=u.default.without(this._extractVars(T(e.options.x).expr).concat(this._extractVars(T(e.options.y).expr)),"t"),s=u.default.object(n,u.default.map(n,(e=>this.state.variables[e]))),o=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return r.createElement(x,{key:e.key,fn:t,foo_fnx:e.options.x,foo_fny:e.options.y,foo_varvalues:s,range:o,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("label"===e.type){const n=[this._eval(e.options.coordX),this._eval(e.options.coordY)];return r.createElement(g,{key:t+1,coord:n,text:E(e.options.label),style:{color:e.options.color}})}return"rectangle"===e.type?r.createElement(k,{key:t+1,x:this._eval(e.options.coordX),y:this._eval(e.options.coordY),width:u.default.max([this._eval(e.options.width),0]),height:u.default.max([this._eval(e.options.height),0]),style:{stroke:"none",fill:e.options.color}}):void 0}),this))}}(0,i.default)(I,"propTypes",(0,a.default)({},c.propTypes,{graph:l.default.object,elements:l.default.arrayOf(l.default.object)})),(0,i.default)(I,"defaultProps",{graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]}),u.default.extend(I,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var _={name:"interaction",displayName:"Interaction",widget:I,transform:u.default.identity,hidden:!0};t.default=_},YXfq:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("17x9")),l=s(n("HEOz"));const u=o(n("1I17")).default.molecule;class d extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"arrowLength",100),(0,a.default)(this,"drawArrow",(()=>{const e=this.refs["arrowCanvas"+this.props.index],t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);const n=new Path2D;t.strokeStyle="rgb(0,0,0)",t.lineWidth=1.2,t.lineCap="round";n.moveTo(5,e.height/2),n.lineTo(e.width-5,e.height/2),n.moveTo(e.width-10,e.height/2-5),n.lineTo(e.width-5,e.height/2),n.moveTo(e.width-10,e.height/2+5),n.lineTo(e.width-5,e.height/2),t.stroke(n)}))}componentDidMount(){this.drawArrow()}componentDidUpdate(){this.drawArrow()}render(){return i.createElement("div",{className:"arrow-container"},i.createElement("div",{className:"above-text"},this.props.data.topText),i.createElement("canvas",{height:"30",id:"arrowCanvas"+this.props.index,ref:"arrowCanvas"+this.props.index,width:this.arrowLength},l._("Reaction arrow pointing to the right.")),i.createElement("div",{className:"below-text"},this.props.data.bottomText))}}(0,a.default)(d,"propTypes",{data:r.default.any,index:r.default.number});class p extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"simpleValidate",(()=>({type:"points",earned:0,total:0,message:null}))),(0,a.default)(this,"getUserInput",(()=>[])),(0,a.default)(this,"validate",((e,t)=>({type:"points",earned:0,total:0,message:null}))),(0,a.default)(this,"focus",(()=>!0))}render(){return i.createElement("div",{className:"reaction",ref:"reaction"},this.props.smiles.map(((e,t)=>{const n=this.props.widgetId+"-"+t;return i.createElement("div",{key:n,className:"molecule-container"},i.createElement(u,{id:n,rotationAngle:this.props.rotationAngle[t],smiles:e}),t===this.props.smiles.length-1?null:i.createElement(d,{data:this.props.separators[t],index:t}))})))}}(0,a.default)(p,"propTypes",{rotationAngle:r.default.arrayOf(r.default.number),separators:r.default.arrayOf(r.default.object),smiles:r.default.arrayOf(r.default.string),widgetId:r.default.string}),(0,a.default)(p,"defaultProps",{smiles:[],rotationAngle:[],separators:[]});var c={name:"reaction-diagram",displayName:"Chemical reaction",hidden:!0,widget:p};t.default=c},ZWnV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={button:n("mR6N").StyleSheet.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:"2"}},selectedStyle:{backgroundColor:"#ddd"}})};t.default=s},aeDP:function(e,t,n){"use strict";var s=n("TqRt"),o=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("mR6N"),i=o(n("q1tI")),r=s(n("fhzG")),l=s(n("17x9")),u=s(n("wINb"));const d="#aaa",p="#ccc",c="#fff",h={borderBottom:"9px solid transparent",borderTop:"9px solid transparent",content:'" "',height:"0",position:"absolute",top:"0",width:"0"},f=a.StyleSheet.create({infoTip:{display:"inline-block",marginLeft:"5px",position:"relative"},infoTipContainer:{position:"absolute",top:"-12px",left:"22px",zIndex:"1000"},infoTipTriangle:{height:"10px",left:"0",position:"absolute",top:"8px",width:"0",zIndex:"1",":before":Object.assign({},h,{borderRight:"9px solid #bbb",right:"0"}),":after":Object.assign({},h,{borderRight:"9px solid ".concat(c),right:"-1px"})},verticalShadow:{border:"1px solid ".concat(p),boxShadow:"0 1px 3px ".concat(p),borderBottom:"1px solid ".concat(d)},infoTipContentContainer:{background:c,padding:"5px 10px",width:"240px"}});var g=(0,r.default)({displayName:"InfoTip",propTypes:{children:l.default.node},getInitialState:function(){return{hover:!1}},handleMouseEnter:function(){this.setState({hover:!0})},handleMouseLeave:function(){this.setState({hover:!1})},render:function(){return i.createElement("div",{className:(0,a.css)(f.infoTip)},i.createElement("img",{alt:"",width:10,height:10,src:(0,u.default)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2N2M3NTAxYS04YmVlLTQ0M2MtYmRiNS04OGM2N2IxN2NhYzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJCRTk4Qjc4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJCRTk4QjY4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NGE5ZDI0OTMtODk1NC00OGFkLTlhMTgtZDAwM2MwYWNjNDJlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY3Yzc1MDFhLThiZWUtNDQzYy1iZGI1LTg4YzY3YjE3Y2FjMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pqm89uYAAADMSURBVHjaXJA9DoJAEIUH1M4TUHIFsCMGen9OwCGw1YRGW2ntKel0exsojHIBC0ouQAyUviFDstmXfNmZeS+zm7XSNCXRFiRgJf0bXIHixpbhGdxBBJYC1w/xaA424MhNEATkui71fU9KqfEU78UbD9PdbJRlOdae55GmhIP+1NV1TcMwkOM41DSNHvRtMhTHMRVFQW3b6mOLgx99kue5GRp/gIOZuZGvNpTNwjD8oliANU+qqqKu6/TQBdymN57AHjzBT+B6Jx79BRgAvc49kQA4yxgAAAAASUVORK5CYII="),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),i.createElement("div",{className:(0,a.css)(f.infoTipContainer),style:{display:this.state.hover?"block":"none"}},i.createElement("div",{className:(0,a.css)(f.infoTipTriangle)}),i.createElement("div",{className:(0,a.css)(f.verticalShadow,f.infoTipContentContainer)},this.props.children)))}});t.default=g},bTcU:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=n("mR6N"),l=o(n("TSYQ")),u=s(n("q1tI")),d=o(n("i8i4")),p=n("K7le"),c=n("6OHE"),h=o(n("uEGL")),f=o(n("Atlv")),g=o(n("yPu2")),m=o(n("4s5V")),y=o(n("oaDE")),v=o(n("9cGa")),b=s(n("HEOz"));class x extends u.Component{static gradeMarker(e){const t={hasAnswers:!1,isCorrect:!1};return e.selected&&e.selected.length>0&&(t.hasAnswers=!0),e.answers.length>0?e.selected&&e.selected.length===e.answers.length&&(t.isCorrect=e.selected.every((t=>e.answers.includes(t)))):e.selected&&0!==e.selected.length||(t.isCorrect=!0),t}static validate(e,t){let n=0,s=0;for(const t of e.markers){const e=x.gradeMarker(t);e.hasAnswers&&n++,e.isCorrect&&s++}return n!==e.markers.length?{type:"invalid",message:null}:{type:"points",earned:s===e.markers.length?1:0,total:1,message:null}}static pointInTriangle(e,t,n,s){const o=(e,t,n)=>(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y),a=o(e,t,n)<0,i=o(e,n,s)<0,r=o(e,s,t)<0;return a===i&&i===r}static imageSideForMarkerPosition(e,t){if(e<20)return"left";if(e>80)return"right";const n={x:20,y:0},s={x:80,y:0},o={x:80,y:100},a={x:20,y:100},i={x:50,y:50},r={top:[n,s,i],right:[i,s,o],bottom:[a,i,o],left:[n,i,a]},l={x:e,y:t};for(const e of Object.keys(r)){const t=r[e];if(x.pointInTriangle.apply(x,[l].concat(t)))return e}return"center"}static navigateToMarkerIndex(e,t,n){const s=t[n],o=t.map(((e,t)=>{const n=e.x-s.x,o=e.y-s.y,a=Math.sqrt(n**2+o**2);return{index:t,dist:a,dir:{x:0!==a?n/a:0,y:0!==a?o/a:0}}})).filter((e=>e.index!==n&&"correct"!==t[e.index].showCorrectness)).sort(((t,n)=>{const s=Math.round(t.dist*(e.x*t.dir.x+e.y*t.dir.y)),o=Math.round(n.dist*(e.x*n.dir.x+e.y*n.dir.y));let a,i;return e.x>0?(a=t.dir.x>0&&0!==s,i=n.dir.x>0&&0!==o):e.x<0?(a=t.dir.x<0&&0!==s,i=n.dir.x<0&&0!==o):e.y>0?(a=t.dir.y>0&&0!==s,i=n.dir.y>0&&0!==o):e.y<0&&(a=t.dir.y<0&&0!==s,i=n.dir.y<0&&0!==o),a!==i?a?-1:1:s-o}));return o.length>0?o[0].index:n}constructor(e){super(e),(0,i.default)(this,"handleDocumentClick",(e=>{if(this._selectedMarkerPopup&&this._answerChoices){const t=d.default.findDOMNode(this._answerChoices),n=e.target,s=(e,t=3)=>e&&(e.contains(n)||t>0&&s(e.parentElement,t-1));s(t)||this.dismissMarkerPopup()}})),(0,i.default)(this,"handleDocumentKeyDown",(e=>{this._selectedMarkerPopup&&27===e.keyCode&&(e.stopPropagation(),this.dismissMarkerPopup())})),this._markers=[],this.state={selectedMarkerIndex:-1,markersInteracted:!1}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!0),document.addEventListener("keydown",this.handleDocumentKeyDown,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!0),document.removeEventListener("keydown",this.handleDocumentKeyDown,!0)}simpleValidate(e){return x.validate(this.getUserInput(),e)}getUserInput(){const{markers:e}=this.props;return{markers:e}}showRationalesForCurrentlySelectedChoices(e){const{markers:t}=this.props,{onChange:n}=this.props;n({markers:t.map((e=>{const t=x.gradeMarker(e);return(0,a.default)({},e,{showCorrectness:t.hasAnswers?t.isCorrect?"correct":"incorrect":void 0})}))},null,!0)}dismissMarkerPopup(){const{selectedMarkerIndex:e}=this.state;-1!==e&&this.setState({selectedMarkerIndex:-1},(()=>{const t=this._markers[e];t&&d.default.findDOMNode(t).focus()}))}handleMarkerChange(e,t){const{markers:n,onChange:s}=this.props;s({markers:[].concat(n.slice(0,e),[(0,a.default)({},t,{showCorrectness:void 0})],n.slice(e+1))})}handleMarkerClick(e,t){const{selectedMarkerIndex:n}=this.state;t.preventDefault(),n!==e?this.setState({selectedMarkerIndex:e,markersInteracted:!0},(()=>{setTimeout((()=>{this._answerChoices&&this._answerChoices.focusAnswer()}),100)})):this.dismissMarkerPopup()}handleMarkerKeyDown(e,t){const{markers:n}=this.props;if(n.length<2)return;const s={ArrowUp:{x:0,y:-1},ArrowRight:{x:1,y:0},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0}}[t.key];if(!s)return;t.preventDefault();const o=this._markers[x.navigateToMarkerIndex(s,n,e)];o&&d.default.findDOMNode(o).focus()}handleAnswerChoicesChangeForMarker(e,t){const{choices:n,markers:s,multipleAnswers:o}=this.props,i=n.filter(((e,n)=>t[n]));this.handleMarkerChange(e,(0,a.default)({},s[e],{selected:i})),o||this.dismissMarkerPopup()}renderAnswerChoicesForMarker(e,t){const{choices:n,multipleAnswers:s}=this.props,o=t.selected;return u.createElement("div",{className:(0,l.default)("perseus-label-image-widget-answer-choices",(0,r.css)(C.scrollableChoices))},u.createElement(m.default,{choices:n.map((e=>({content:e,checked:!!o&&o.includes(e)}))),multipleSelect:s,onChange:t=>this.handleAnswerChoicesChangeForMarker(e,t),ref:e=>this._answerChoices=e}))}renderMarkers(){const{markers:e,questionCompleted:t}=this.props,{selectedMarkerIndex:n,markersInteracted:s}=this.state;return e.map(((e,o)=>{const i=x.gradeMarker(e),r=u.createElement(y.default,(0,a.default)({},e,{showCorrectness:t&&i.hasAnswers&&i.isCorrect?"correct":e.showCorrectness,showSelected:o===n,showPulsate:!s,key:"".concat(e.x,".").concat(e.y),onClick:e=>this.handleMarkerClick(o,e),onKeyDown:e=>this.handleMarkerKeyDown(o,e),ref:e=>this._markers[o]=e}));if(o!==n)return r;let l;return l=window.matchMedia(h.default.xsOrSmaller.replace("@media ","")).matches?e.y>50?"top":"bottom":{left:"right",top:"bottom",right:"left",bottom:"top",center:"top"}[x.imageSideForMarkerPosition(e.x,e.y)],u.createElement(p.Popover,{content:()=>u.createElement(p.PopoverContentCore,{style:C.choicesPopover},this.renderAnswerChoicesForMarker(o,e)),placement:l,opened:!0,key:"".concat(e.x,".").concat(e.y),ref:e=>this._selectedMarkerPopup=e},r)}))}renderInstructions(){const{apiOptions:{isMobile:e},choices:t,multipleAnswers:n,hideChoicesFromInstructions:s}=this.props,o=e?n?b._("Tap each dot on the image to select all answers that apply."):b._("Tap each dot on the image to select an answer."):n?b._("Click each dot on the image to select all answers that apply."):b._("Click each dot on the image to select an answer."),a=b._("Choices:");return u.createElement("div",{className:(0,l.default)("perseus-label-image-widget-instructions",(0,r.css)(C.instructions))},u.createElement("div",{className:(0,r.css)(C.instructionsCaption)},o," ",!s&&a),!s&&u.createElement("div",{className:(0,r.css)(C.instructionsChoices)},t.map(((e,t)=>u.createElement("div",{className:(0,r.css)(C.instructionsChoice),key:t},u.createElement(f.default,{content:e}))))))}render(){const{imageAlt:e,imageUrl:t,imageWidth:n,imageHeight:s}=this.props,{selectedMarkerIndex:o}=this.state;return u.createElement("div",null,this.renderInstructions(),u.createElement("div",{className:(0,r.css)(C.markersCanvas),style:{maxWidth:n,maxHeight:s}},u.createElement("div",{className:(0,r.css)(C.imageContainer,-1!==o&&C.imageInteractionDisabled)},u.createElement(v.default.Consumer,null,(({setAssetStatus:o})=>u.createElement(g.default,{alt:e,src:t,width:n,height:s,setAssetStatus:o})))),this.renderMarkers()))}}const C=r.StyleSheet.create({instructions:{paddingBottom:16},instructionsCaption:(0,a.default)({},c.typography.bodyXsmallBold,{paddingBottom:16}),instructionsChoices:{display:"flex",flexWrap:"wrap",margin:"-8px 0"},instructionsChoice:{display:"flex",alignItems:"center",margin:"8px 0",":not(:last-child)":{"::after":{content:"''",display:"inline-block",position:"relative",width:2,height:2,marginLeft:5,marginRight:5,background:"rgba(33, 36, 44, 0.32)",borderRadius:2}}},markersCanvas:{position:"relative"},imageContainer:{display:"flex"},imageInteractionDisabled:{pointerEvents:"none"},scrollableChoices:{paddingTop:8,paddingBottom:8,[h.default.xsOrSmaller]:{maxHeight:250,overflowY:"auto"}},choicesPopover:{padding:0}});var k={name:"label-image",displayName:"Label Image",widget:x,accessible:!0,isLintable:!0};t.default=k},bjk2:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("17x9")),l=o(n("i8i4")),u=o(n("oLyU")),d=n("j8wP"),p=n("vwLt");class c extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"focus",(()=>(l.default.findDOMNode(this).focus(),!0))),(0,a.default)(this,"_handleChangeEvent",(e=>{this._handleChange(parseInt(e.target.value))})),(0,a.default)(this,"_handleChange",(e=>{this.props.trackInteraction(),this.props.onChange({selected:e})})),(0,a.default)(this,"getUserInput",(()=>({value:this.props.selected}))),(0,a.default)(this,"simpleValidate",(e=>c.validate(this.getUserInput(),e)))}render(){return i.createElement("div",{onClick:e=>{e.stopPropagation()},onTouchStart:e=>{e.stopPropagation()}},i.createElement(p.SingleSelect,{onChange:this._handleChange,selectedValue:this.props.selected,disabled:this.props.apiOptions.readOnly},i.createElement(p.OptionItem,{value:0,disabled:!0,label:this.props.placeholder}),this.props.choices.map(((e,t)=>i.createElement(p.OptionItem,{key:""+(t+1),value:t+1,label:e})))))}}(0,a.default)(c,"propTypes",{apiOptions:d.Options.propTypes,choices:r.default.arrayOf(r.default.string),onChange:r.default.func.isRequired,placeholder:r.default.string,selected:r.default.number,trackInteraction:r.default.func.isRequired}),(0,a.default)(c,"defaultProps",{choices:[],selected:0,placeholder:"",apiOptions:d.Options.defaults}),u.default.extend(c,{validate:function(e,t){const n=e.value;if(0===n)return{type:"invalid",message:null};return{type:"points",earned:t.choices[n-1].correct?1:0,total:1,message:null}}});var h={name:"dropdown",displayName:"Drop down",defaultAlignment:"inline-block",accessible:!0,widget:c,transform:e=>({placeholder:e.placeholder,choices:u.default.map(e.choices,(e=>e.content))})};t.default=h},bxxM:function(e,t,n){"use strict";var s=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("h1Z3")),a=s(n("Jxul")),i=s(n("bjk2")),r=s(n("vUnj")),l=s(n("P++F")),u=s(n("GbkG")),d=s(n("fYWP")),p=s(n("VO3A")),c=s(n("/Qgg")),h=s(n("zyiX")),f=s(n("y1hP")),g=s(n("Voua")),m=s(n("VWbw")),y=s(n("bTcU")),v=s(n("SrcR")),b=s(n("k1y+")),x=s(n("j+Ew")),C=s(n("w4kA")),k=s(n("1I17")),E=s(n("qRYE")),w=s(n("h/tm")),M=s(n("P76s")),T=s(n("z875")),S=s(n("RY23")),P=s(n("ipxt")),I=s(n("YXfq")),_=s(n("BCuI")),N=s(n("7O7Y")),A=s(n("jDkz")),R=s(n("eCzM")),O=s(n("FGwj")),D=s(n("K/mI")),L=s(n("dWq9")),F=[o.default,a.default,i.default,r.default,l.default,u.default,d.default,p.default,c.default,h.default,f.default,g.default,m.default,y.default,v.default,b.default,x.default,C.default,k.default,E.default,w.default,M.default,T.default,S.default,P.default,I.default,_.default,N.default,A.default,R.default,O.default,D.default,L.default];t.default=F},czma:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI"));class r extends i.PureComponent{constructor(...e){super(...e),(0,a.default)(this,"state",{mouseState:"up",trackedSelection:null}),(0,a.default)(this,"_handleSelectionChange",(()=>{this._updateTrackedSelection(this.props.buildHighlight),"down"===this.state.mouseState&&this.setState({mouseState:"down-and-selecting"})})),(0,a.default)(this,"_handleMouseDown",(()=>{this.setState({mouseState:"down"})})),(0,a.default)(this,"_handleMouseUp",(()=>{this.setState({mouseState:"up"})}))}componentDidMount(){this._updateListeners(!1,this.props.enabled)}UNSAFE_componentWillReceiveProps(e){this.props.buildHighlight!==e.buildHighlight&&this._updateTrackedSelection(e.buildHighlight),this._updateListeners(this.props.enabled,e.enabled)}componentWillUnmount(){this._updateListeners(this.props.enabled,!1)}_updateListeners(e,t){!e&&t?(window.addEventListener("mousedown",this._handleMouseDown),window.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("selectionchange",this._handleSelectionChange)):e&&!t&&(window.removeEventListener("mousedown",this._handleMouseDown),window.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("selectionchange",this._handleSelectionChange),this.setState({mouseState:"up",trackedSelection:null}))}_computeFocusAndRange(){const e=document.getSelection();if(!e||0===e.rangeCount)return null;const t=e.getRangeAt(0);if(t.collapsed)return null;return{focusNode:e.focusNode,focusOffset:e.focusOffset,range:t}}_computeTrackedSelection(e){const t=this._computeFocusAndRange();if(!t)return null;const{focusNode:n,focusOffset:s,range:o}=t,a=e(o);return a?{focusNode:n,focusOffset:s,proposedHighlight:a}:null}_updateTrackedSelection(e){const t=this._computeTrackedSelection(e);this.setState({trackedSelection:t})}render(){const{mouseState:e,trackedSelection:t}=this.state,n="down-and-selecting"===e;return this.props.children?i.createElement("div",null,this.props.children(t,n)):null}}var l=r;t.default=l},dWq9:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("oLyU")),d=n("JimW"),p=o(n("8Kom")),c=s(n("+jAD")),h=o(n("WCF/")),f=o(n("qRKg")),g=s(n("HEOz"));const m="{host}/embed_video?slug={slug}&internal_video_only=1",y=/^https?:\/\//,v=/(khanacademy\.org|localhost)/;class b extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"getUserInput",(()=>null)),(0,i.default)(this,"simpleValidate",(e=>b.validate(null,e))),(0,i.default)(this,"change",((...e)=>c.change.apply(this,e)))}render(){const e=this.props.location;if(!e)return r.createElement("div",null);let t;if(y.test(e))t=e;else{t=m.replace("{slug}",e);let n="https://www.khanacademy.org";v.test(p.default.host)&&(n=p.default.origin),t=t.replace("{host}",n)}return r.createElement(h.default,{width:1280,height:720,key:e+this.props.alignment},r.createElement(d.View,{style:f.default.srOnly},g._("Khan Academy video wrapper")),r.createElement("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:1280,height:720,src:t,allowFullScreen:!0}))}}(0,i.default)(b,"propTypes",(0,a.default)({},c.propTypes,{alignment:l.default.string,location:l.default.string})),u.default.extend(b,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var x={name:"video",displayName:"Video",defaultAlignment:"block",supportedAlignments:["block","float-left","float-right","full-width"],widget:b};t.default=x},e46u:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("wa3X")),d=o(n("Pwnf")),p=s(n("HEOz")),c=n("j8wP"),h=o(n("APgo")),f=n("/4Qb"),g=n("UcaO");const m={HIDDEN:Symbol("HIDDEN"),ACTIVE:Symbol("ACTIVE"),INACTIVE:Symbol("INACTIVE"),INCORRECT:Symbol("INCORRECT"),CORRECT:Symbol("CORRECT")};class y extends r.Component{render(){const{apiOptions:e,answerBarState:t,onCheckAnswer:n,onNextQuestion:s}=this.props,o=(0,a.default)({},v.answerBar,{backgroundColor:t===m.CORRECT?d.default.offWhite:"white",justifyContent:t!==m.CORRECT||s?"space-between":"center"}),i=t===m.INCORRECT?r.createElement("span",{style:v.text},r.createElement("span",{style:v.tryAgainIcon},r.createElement(h.default,f.iconTryAgain)),r.createElement("span",{style:{marginLeft:8}},p._("Keep trying"))):r.createElement("span",null);if(t!==m.CORRECT){const s=t===m.INCORRECT?p._("Try again"):p._("Check");return r.createElement("div",{style:o},i,r.createElement(u.default,{disabled:e.readOnly||t!==m.ACTIVE,onClick:n},s))}return r.createElement("div",{style:o},r.createElement("span",{style:v.text},r.createElement("span",{style:{fontSize:28,color:d.default.green}},r.createElement(h.default,(0,a.default)({},f.iconStar,{style:{marginBottom:5}}))),r.createElement("span",{style:{marginLeft:8}},p._("Correct!"))),s&&r.createElement(u.default,{onClick:s},p._("Next question")))}}(0,i.default)(y,"propTypes",{answerBarState:l.default.any.isRequired,apiOptions:c.Options.propTypes,onCheckAnswer:l.default.func.isRequired,onNextQuestion:l.default.func});const v={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:g.negativePhoneMargin,marginRight:g.negativePhoneMargin,marginBottom:g.negativePhoneMargin,marginTop:g.phoneMargin,paddingLeft:g.phoneMargin,paddingRight:10,borderTop:"1px solid ".concat(d.default.offBlack50)},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",fontSize:17}};y.ANSWER_BAR_STATES=m;var b=y;t.default=b},eCzM:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("i8i4")),d=o(n("oLyU")),p=n("reBI"),c=o(n("7xiW")),h=o(n("eMwK")),f=o(n("Atlv")),g=o(n("uBl0")),m=n("j8wP"),y=o(n("7BBF")),v=n("zahm"),b=o(n("p8fL"));const{assert:x}=b.default,{keypadElementPropType:C}=p.propTypes,k=function(e,t){return[""+e,""+t]},E=function(e){return x(d.default.isArray(e)&&2===e.length),+e[0]},w=function(e){return x(d.default.isArray(e)&&2===e.length),+e[1]},M=function(e){return"answer"+E(e)+","+w(e)};class T extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"_getRows",(()=>this.props.answers.length)),(0,i.default)(this,"_getColumns",(()=>this.props.answers[0].length)),(0,i.default)(this,"getUserInput",(()=>d.default.map(this.props.answers,d.default.clone))),(0,i.default)(this,"onValueChange",((e,t,n)=>{const s=d.default.map(this.props.answers,d.default.clone);s[e][t]=n.target?n.target.value:n,this.props.onChange({answers:s}),this.props.trackInteraction()})),(0,i.default)(this,"onHeaderChange",((e,t)=>{const n=this.props.headers.slice();n[e]=t.content,this.props.onChange({headers:n})})),(0,i.default)(this,"simpleValidate",(e=>T.validate(this.getUserInput(),e))),(0,i.default)(this,"_handleFocus",(e=>{this.props.onFocus(e)})),(0,i.default)(this,"_handleBlur",(e=>{this.props.onBlur(e)})),(0,i.default)(this,"focus",(()=>(this.focusInputPath(k(0,0)),!0))),(0,i.default)(this,"focusInputPath",(e=>{const t=M(e),n=this.refs[t];this.props.apiOptions.customKeypad||this.props.apiOptions.staticRender?n.focus():u.default.findDOMNode(n).focus()})),(0,i.default)(this,"blurInputPath",(e=>{const t=M(e),n=this.refs[t];this.props.apiOptions.customKeypad||this.props.apiOptions.staticRender?n.blur():u.default.findDOMNode(n).blur()})),(0,i.default)(this,"getDOMNodeForPath",(e=>{const t=M(e);return u.default.findDOMNode(this.refs[t])})),(0,i.default)(this,"getInputPaths",(()=>{const e=this._getRows(),t=this._getColumns(),n=[];return(0,d.default)(e).times((e=>{(0,d.default)(t).times((t=>{const s=k(e,t);n.push(s)}))})),n})),(0,i.default)(this,"getGrammarTypeForPath",(e=>"number")),(0,i.default)(this,"setInputValue",((e,t,n)=>{const s=E(e),o=w(e),a=d.default.map(this.props.answers,d.default.clone);a[s][o]=t,this.props.onChange({answers:a},n)}))}render(){const e=this._getRows(),t=this._getColumns(),n=this.props.headers;let s,o;const i={};return this.props.apiOptions.customKeypad?(s=h.default,o={width:80},i.keypadElement=this.props.keypadElement):this.props.apiOptions.staticRender?(s=c.default,o={}):(s="input",o={}),r.createElement("table",{className:"perseus-widget-table-of-values non-markdown"},r.createElement("thead",null,r.createElement("tr",null,d.default.map(n,((e,t)=>this.props.editableHeaders?r.createElement("th",{key:t},r.createElement(this.props.Editor,{ref:"columnHeader"+t,apiOptions:this.props.apiOptions,content:e,widgetEnabled:!1,onChange:d.default.partial(this.onHeaderChange,t)})):r.createElement("th",{key:t},r.createElement(f.default,{content:e,linterContext:this.props.linterContext})))))),r.createElement("tbody",null,(0,d.default)(e).times((e=>r.createElement("tr",{key:e},(0,d.default)(t).times((t=>r.createElement("td",{key:t},r.createElement(s,(0,a.default)({ref:M(k(e,t)),type:"text",value:this.props.answers[e][t],disabled:this.props.apiOptions.readOnly,onFocus:d.default.partial(this._handleFocus,k(e,t)),onBlur:d.default.partial(this._handleBlur,k(e,t)),onChange:d.default.partial(this.onValueChange,e,t),style:o},i))))))))))}}(0,i.default)(T,"propTypes",{answers:l.default.arrayOf(l.default.arrayOf(l.default.string)),editableHeaders:l.default.bool,Editor:l.default.func,headers:l.default.arrayOf(l.default.string),keypadElement:C,trackInteraction:l.default.func.isRequired,linterContext:v.linterContextProps}),(0,i.default)(T,"defaultProps",function(){const e=(0,d.default)(4).times((function(){return g.default.stringArrayOfSize(1)}));return{apiOptions:m.Options.defaults,headers:[""],editableHeaders:!1,rows:4,columns:1,answers:e,linterContext:v.linterContextDefault}}()),d.default.extend(T,{validate:function(e,t){const n=function(e){return d.default.filter(e,(function(e){return d.default.some(e,d.default.identity)}))},s=n(t.answers),o=n(e);if(d.default.some(o,(function(e){return d.default.some(e,(function(e){return""===e}))}))||!o.length)return{type:"invalid",message:null};if(o.length!==s.length)return{type:"points",earned:0,total:1,message:null};const a=y.default.number.createValidatorFunctional;let i=null;return{type:"points",earned:d.default.every(s,(function(e){let t;for(t=0;t<o.length;t++){const n=o[t];if(d.default.every(n,(function(t,n){const s=e[n],o=a(s,{simplify:!0})(t);return o.message&&(i=o.message),o.correct})))return o.splice(t,1),!0}return!1}))?1:0,total:1,message:i}}});var S={name:"table",displayName:"Table of values",accessible:!0,widget:T,transform:e=>{const t=e.answers.length,n=e.answers[0].length,s=(0,d.default)(t).times((function(){return g.default.stringArrayOfSize(n)}));return d.default.extend({},e,{answers:s})},hidden:!0,isLintable:!0};t.default=S},fQFx:function(e,t,n){"use strict";var s=n("TqRt"),o=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("q1tI")),i=n("mR6N"),r=s(n("4PhQ")),l=n("6OHE"),u=n("La43"),d=s(n("EIXS"));class p extends a.PureComponent{componentDidUpdate(e){this.props.focusNode===e.focusNode&&this.props.focusOffset===e.focusOffset&&this.props.offsetParent===e.offsetParent||this._tooltip&&this._tooltip.remeasure()}_getFocusRect(){const{focusNode:e,focusOffset:t,offsetParent:n}=this.props,s=document.createRange();s.setStart(e,t),s.setEnd(e,t);const o=s.getClientRects()[0];if(!o)return r.default.log('[Highlighting] Known bug: Could not determine the focus position, so did not show an "Add Highlight" tooltip. https://app.asana.com/0/329800276300868/413878480039713 (see also /r/asana-links)'),null;const a=n.getBoundingClientRect();return(0,u.getRelativeRect)(o,a)}render(){const e=this._getFocusRect();if(!e)return null;const t=a.createElement("div",{className:(0,i.css)(c.tooltipLabel)},this.props.label);return a.createElement(d.default,{content:t,color:l.colors.kaBlue,inverted:!0,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,toggleOnHover:!1,showOnMount:!0,ref:e=>this._tooltip=e},a.createElement("div",{style:{position:"absolute",left:e.left,top:e.top,height:e.height}}))}}const c=i.StyleSheet.create({tooltipLabel:{userSelect:"none"}});var h=p;t.default=h},fYWP:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=o(n("TSYQ")),l=s(n("q1tI")),u=o(n("17x9")),d=o(n("oLyU")),p=o(n("wa3X")),c=s(n("HEOz")),h=o(n("qRKg")),f=n("j8wP"),g=s(n("+jAD")),m=n("/4Qb"),y=o(n("APgo")),v=o(n("Atlv")),b=o(n("e46u")),x=n("UcaO"),C=n("mR6N"),k=n("zahm");const E="ungraded",w="correct",M="incorrect",T="invalid",S=b.default.ANSWER_BAR_STATES,P=(e,t)=>{switch(e){case S.HIDDEN:return t?S.ACTIVE:e;case S.ACTIVE:return t?e:S.INACTIVE;case S.INACTIVE:return t?S.ACTIVE:e;case S.INCORRECT:return t?S.ACTIVE:S.INACTIVE;default:return e}},I=c._("We couldn't grade your answer."),_=c._("It looks like you left something blank or ")+c._("entered in an invalid answer.");class N extends l.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{status:E,showHint:!1,message:"",answerBarState:S.HIDDEN}),(0,i.default)(this,"change",((...e)=>g.change.apply(this,e))),(0,i.default)(this,"_onInteractWithWidget",(e=>{if(this.setState({status:E,message:""}),this.refs.renderer){this.change("widgets",this.props.widgets);const e=0===this.refs.renderer.emptyWidgets().length,t=this.state.answerBarState;this.setState({answerBarState:P(t,e)})}})),(0,i.default)(this,"_checkAnswer",(()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices();const e=this.refs.renderer.score();let t,n;"points"===e.type?(t=e.total===e.earned?w:M,n=e.message||""):(t=T,n=e.message?"".concat(I," ").concat(e.message):"".concat(I," ").concat(_)),this.setState({status:t,message:n,answerBarState:"correct"===t?S.CORRECT:S.INCORRECT}),this.props.trackInteraction({status:t})})),(0,i.default)(this,"getInputPaths",(()=>this.refs.renderer.getInputPaths())),(0,i.default)(this,"setInputValue",((e,t,n)=>this.refs.renderer.setInputValue(e,t,n))),(0,i.default)(this,"getAcceptableFormatsForInputPath",(e=>this.refs.renderer.getAcceptableFormatsForInputPath(e))),(0,i.default)(this,"focus",(()=>this.refs.renderer.focus())),(0,i.default)(this,"focusInputPath",(e=>{this.refs.renderer.focusPath(e)})),(0,i.default)(this,"blurInputPath",(e=>{this.refs.renderer.blurPath(e)}))}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){const e=d.default.extend({},f.Options.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}});let t=null,n=null;this.state.status===w?(n=l.createElement(y.default,(0,a.default)({},m.iconOk,{style:{color:"#526f03"}})),t=c._("Correct")):this.state.status===M&&(n=l.createElement(y.default,(0,a.default)({},m.iconRemove,{style:{color:"#ff5454"}})),t=c._("Incorrect"));const s=this.props.inGradedGroupSet?(0,C.css)(R.gradedGroupInSet):(0,C.css)(R.gradedGroup),o=(0,r.default)({[s]:e.isMobile,"perseus-graded-group":!0,"answer-correct":!e.isMobile&&this.state.status===w,"answer-incorrect":!e.isMobile&&this.state.status===M}),{answerBarState:i}=this.state,u=i===S.CORRECT,g=e.readOnly||e.isMobile&&u;return l.createElement("div",{className:o},!!this.props.title&&l.createElement("div",{className:(0,C.css)(R.title)},this.props.title),l.createElement(v.default,(0,a.default)({},this.props,{ref:"renderer",apiOptions:(0,a.default)({},e,{readOnly:g}),onInteractWithWidget:this._onInteractWithWidget,linterContext:this.props.linterContext})),!e.isMobile&&n&&l.createElement("div",{className:"group-icon"},n),!e.isMobile&&t&&l.createElement("div",{className:(0,C.css)(h.default.srOnly),role:"alert"},t),!e.isMobile&&l.createElement("p",null,this.state.message),!e.isMobile&&l.createElement(p.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer},c._("Check")),!e.isMobile&&u&&this.props.onNextQuestion&&l.createElement(p.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5}},c._("Next question")),this.props.hint&&this.props.hint.content&&(this.state.showHint?l.createElement("div",null,l.createElement("button",{tabIndex:"0",className:(0,C.css)(R.explanationTitle),onClick:()=>this.setState({showHint:!1}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!1})}},c._("Hide explanation")),l.createElement(v.default,(0,a.default)({},this.props.hint,{ref:"hints-renderer",apiOptions:e,linterContext:this.props.linterContext}))):l.createElement("button",{tabIndex:"0",onClick:()=>this.setState({showHint:!0}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!0})},className:(0,C.css)(R.showHintLink)},c._("Explain"))),e.isMobile&&i!==S.HIDDEN&&l.createElement(b.default,{apiOptions:e,answerBarState:i,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion}))}}(0,i.default)(N,"propTypes",(0,a.default)({},g.propTypes,{apiOptions:f.Options.propTypes,content:u.default.string,hasHint:u.default.bool,hint:u.default.object,images:u.default.object,inGradedGroupSet:u.default.bool,onBlur:u.default.func,onFocus:u.default.func,onNextQuestion:u.default.func,title:u.default.string,trackInteraction:u.default.func.isRequired,widgets:u.default.object,linterContext:k.linterContextProps})),(0,i.default)(N,"defaultProps",{title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1,linterContext:k.linterContextDefault});var A={name:"graded-group",displayName:"Graded group (articles only)",widget:N,traverseChildWidgets:function(e,t){return d.default.extend({},e,t(e))},hidden:!1,tracking:"all",isLintable:!0};t.default=A;const R=C.StyleSheet.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:"1px solid ".concat(x.gray76),borderBottom:"1px solid ".concat(x.gray76),backgroundColor:x.tableBackgroundAccent,marginLeft:x.negativePhoneMargin,marginRight:x.negativePhoneMargin,paddingBottom:x.phoneMargin,paddingLeft:x.phoneMargin,paddingRight:x.phoneMargin,paddingTop:10,width:"auto"},showHintLink:{backgroundColor:"unset",fontSize:14,padding:0,border:"none",marginTop:20,color:x.kaGreen,cursor:"pointer",display:"block",clear:"both"},explanationTitle:{backgroundColor:"unset",marginTop:20,color:x.kaGreen,marginBottom:10,cursor:"pointer",fontSize:14,padding:0,border:"none",display:"block",clear:"both"},title:{fontSize:12,color:x.gray76,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}})},"h/OD":function(e,t,n){"use strict";var s=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=s(n("q1tI")),a=n("4PhQ");class i extends o.PureComponent{componentDidMount(){this._sendWordsUpdate()}componentDidUpdate(){this._sendWordsUpdate()}_sendWordsUpdate(){this.props.onWordsUpdate(this._getWordRanges())}_getWordRanges(){const e=this._container;if(!e)throw new a.KAError("invariant violation: `this._container` is not defined, but this method is only called after mount/update",a.Errors.Internal);const t=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,(()=>NodeFilter.FILTER_ACCEPT),!1),n=[];let s=null;for(;t.nextNode();){const e=t.currentNode;if(e.nodeType===Node.ELEMENT_NODE){"inline"!==getComputedStyle(e).display&&(s=null)}else if(e.nodeType===Node.TEXT_NODE){const t=e.nodeValue,o=/\S+/g;let a,i=null;for(;null!==(a=o.exec(t));){const o=a.index,r=a.index+a[0].length;let l;0===o&&s?(l=s,l.setEnd(e,r)):(l=e.ownerDocument.createRange(),l.setStart(e,o),l.setEnd(e,r),n.push(l)),r===t.length&&(i=l)}s=i}}return n}render(){return o.createElement("div",{ref:e=>this._container=e},this.props.children)}}var r=i;t.default=r},"h/tm":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("i8i4")),d=o(n("oLyU")),p=o(n("rGVj")),c=s(n("4PhQ")),h=o(n("Atlv")),f=o(n("uBl0")),g=n("j8wP"),m=n("zahm");class y extends r.Component{render(){return r.createElement("div",{className:"card-wrap "+g.ClassNames.INTERACTIVE,style:{width:this.props.width}},r.createElement("div",{className:"card placeholder",style:{height:this.props.height}}))}}(0,i.default)(y,"propTypes",{width:l.default.number.isRequired,height:l.default.number.isRequired});class v extends r.Component{render(){return r.createElement("div",{className:"card-wrap "+g.ClassNames.INTERACTIVE},r.createElement("div",{className:"card drag-hint"}))}}const b=l.default.shape({left:l.default.number,top:l.default.number});class x extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{dragging:!1}),(0,i.default)(this,"bindMouseMoveUp",(()=>{this.mouseMoveUpBound=!0,(0,p.default)(document).on("mousemove",this.onMouseMove),(0,p.default)(document).on("mouseup",this.onMouseUp)})),(0,i.default)(this,"unbindMouseMoveUp",(()=>{this.mouseMoveUpBound=!1,(0,p.default)(document).off("mousemove",this.onMouseMove),(0,p.default)(document).off("mouseup",this.onMouseUp)})),(0,i.default)(this,"onMouseDown",(e=>{e.preventDefault();const t=f.default.extractPointerLocation(e);t&&(this.setState({dragging:!0}),this.bindMouseMoveUp(),this.props.onMouseDown&&this.props.onMouseDown(t,this))})),(0,i.default)(this,"onMouseMove",(e=>{if(!this.state.dragging)return;e.preventDefault();const t=f.default.extractPointerLocation(e);t&&this.props.onMouseMove&&this.props.onMouseMove(t)})),(0,i.default)(this,"onMouseUp",(e=>{e.preventDefault();const t=f.default.extractPointerLocation(e);t&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp&&this.props.onMouseUp(t))}))}render(){let e={};this.props.floating&&(e={position:"absolute",left:this.props.startOffset.left,top:this.props.startOffset.top}),this.props.width&&(e.width=this.props.width);const t=["card"];this.props.stack&&t.push("stack"),this.props.floating&&!this.props.animating&&(t.push("dragging"),e.left+=this.props.mouse.left-this.props.startMouse.left,e.top+=this.props.mouse.top-this.props.startMouse.top);const n=d.default.pick(this.props,"content"),s=this.props.animating?p.default.noop:this.onMouseDown;return r.createElement("div",{className:"card-wrap "+g.ClassNames.INTERACTIVE,style:e,onMouseDown:s,onTouchStart:s,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},r.createElement("div",{className:t.join(" ")},r.createElement(h.default,(0,a.default)({},n,{linterContext:this.props.linterContext}))))}shouldComponentUpdate(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef}componentDidMount(){this.mouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!f.default.supportsPassiveEvents()&&{passive:!1})}componentDidUpdate(e,t){if(this.props.animating&&!e.animating){const e=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));(0,p.default)(u.default.findDOMNode(this)).animate(this.props.animateTo,Math.max(e,1),this.props.onAnimationEnd)}}componentWillUnmount(){this.mouseMoveUpBound&&(c.default.error("Removing an element with bound event handlers.",c.Errors.Internal),this.unbindMouseMoveUp(),f.default.resetTouchHandlers()),document.removeEventListener("touchmove",this.onMouseMove)}}(0,i.default)(x,"propTypes",{floating:l.default.bool.isRequired,animating:l.default.bool,width:l.default.number,stack:l.default.bool,onMouseDown:l.default.func,onMouseMove:l.default.func,onMouseUp:l.default.func,startMouse:b,startOffset:b,animateTo:b,onAnimationEnd:l.default.func,linterContext:m.linterContextProps}),(0,i.default)(x,"defaultProps",{stack:!1,animating:!1,linterContext:m.linterContextDefault});const C="normal",k="horizontal";class E extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{current:[],dragging:!1,placeholderIndex:null}),(0,i.default)(this,"onClick",((e,t,n,s)=>{const o=(0,p.default)(u.default.findDOMNode(s)),a=this.state.current.slice();let i,r=null;"current"===e?(a.splice(t,1),i=this.state.current[t],r=t):"bank"===e&&(i=this.props.options[t]),this.setState({current:a,dragging:!0,placeholderIndex:r,dragKey:i.key,dragContent:i.content,dragWidth:o.width(),dragHeight:o.height(),grabPos:n,mousePos:n,offsetPos:o.position()})})),(0,i.default)(this,"onRelease",(e=>{const t=this.refs.dragging;if(null==t)return;const n=this.isCardInBank(t),s=this.state.placeholderIndex,o=()=>{const e=this.state.current.slice();if(!n){const t={content:this.state.dragContent,key:d.default.uniqueId("perseus_draggable_card_"),width:this.state.dragWidth};e.splice(s,0,t)}this.props.onChange({current:e}),this.setState({current:e,dragging:!1,placeholderIndex:null,animating:!1}),this.props.trackInteraction()},a=(0,p.default)(u.default.findDOMNode(t)).position();let i=null;n?d.default.each(this.props.options,(function(e,t){if(e.content===this.state.dragContent){const e=u.default.findDOMNode(this.refs["bank"+t]);i=(0,p.default)(e).position()}}),this):null!=this.refs.placeholder&&(i=(0,p.default)(u.default.findDOMNode(this.refs.placeholder)).position()),null==i?o():this.setState({offsetPos:a,animateTo:i,onAnimationEnd:o,animating:!0,dragging:!1})})),(0,i.default)(this,"onMouseMove",(e=>{const t=this.refs.dragging;if(null==t)return;let n;n=this.isCardInBank(t)?null:this.findCorrectIndex(t,this.state.current),this.setState({mousePos:e,placeholderIndex:n})})),(0,i.default)(this,"findCorrectIndex",((e,t)=>{const n=this.props.layout===k,s=(0,p.default)(u.default.findDOMNode(this.refs.dragList)),o=s.offset().left,a=s.offset().top,i=(0,p.default)(u.default.findDOMNode(e)).offset().left-o,r=(0,p.default)(u.default.findDOMNode(e)).offset().top-a;let l=0,c=0,h=0;return n?d.default.each(t,(function(e,t){const n=u.default.findDOMNode(this.refs["sortable"+t]),s=(0,p.default)(n).outerWidth(!0);i>c+s/2&&(l+=1),c+=s}),this):d.default.each(t,(function(e,t){const n=u.default.findDOMNode(this.refs["sortable"+t]),s=(0,p.default)(n).outerHeight(!0);r>h+s/2&&(l+=1),h+=s}),this),l})),(0,i.default)(this,"isCardInBank",(e=>{if(null==e)return!1;const t=this.props.layout===k,n=(0,p.default)(u.default.findDOMNode(e)),s=(0,p.default)(u.default.findDOMNode(this.refs.bank)),o=n.offset(),a=s.offset(),i=n.outerHeight(!0),r=s.outerHeight(!0),l=s.outerWidth(!0),d=u.default.findDOMNode(this.refs.dragList),c=((0,p.default)(d).width(),n.outerWidth(!0));return t?o.top+i/2<a.top+r:o.left+c/2<a.left+l})),(0,i.default)(this,"getUserInput",(()=>({current:d.default.map(this.props.current,(function(e){return e.content}))}))),(0,i.default)(this,"simpleValidate",(e=>E.validate(this.getUserInput(),e)))}UNSAFE_componentWillReceiveProps(e){d.default.isEqual(this.props.current,e.current)||this.setState({current:e.current})}render(){const e=this.state.dragging&&r.createElement(x,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext}),t=this.state.animating&&r.createElement(x,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext}),n=d.default.map(this.state.current,(function(e,t){return r.createElement(x,{key:"sortableCard".concat(t),ref:"sortable"+t,fakeRef:"sortable"+t,floating:!1,content:e.content,width:e.width,linterContext:this.props.linterContext,onMouseDown:this.state.animating?p.default.noop:this.onClick.bind(null,"current",t)})}),this);if(null!=this.state.placeholderIndex){const e=r.createElement(y,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight,key:"placeholder"});n.splice(this.state.placeholderIndex,0,e)}const s=n.length>0;n.push(e,t);const o=r.createElement("div",{className:"perseus-clearfix draggable-box"},!s&&r.createElement(v,null),r.createElement("div",{ref:"dragList"},n)),a=r.createElement("div",{ref:"bank",className:"bank perseus-clearfix"},d.default.map(this.props.options,((e,t)=>r.createElement(x,{ref:"bank"+t,floating:!1,content:e.content,stack:!0,key:t,linterContext:this.props.linterContext,onMouseDown:this.state.animating?p.default.noop:this.onClick.bind(null,"bank",t),onMouseMove:this.onMouseMove,onMouseUp:this.onRelease})),this));return r.createElement("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" above-scratchpad blank-background perseus-clearfix "+g.ClassNames.INTERACTIVE,ref:"orderer"},a,o)}}(0,i.default)(E,"propTypes",{correctOptions:l.default.array,current:l.default.array,height:l.default.oneOf([C,"auto"]),layout:l.default.oneOf([k,"vertical"]),options:l.default.array,trackInteraction:l.default.func.isRequired,linterContext:m.linterContextProps}),(0,i.default)(E,"defaultProps",{current:[],options:[],correctOptions:[],height:C,layout:k,linterContext:m.linterContextDefault}),d.default.extend(E,{validate:function(e,t){if(0===e.current.length)return{type:"invalid",message:null};return{type:"points",earned:d.default.isEqual(e.current,d.default.pluck(t.correctOptions,"content"))?1:0,total:1,message:null}}});var w={name:"orderer",displayName:"Orderer",widget:E,isLintable:!0};t.default=w},h1Z3:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=n("mR6N"),l=s(n("q1tI")),u=o(n("17x9")),d=o(n("TSYQ")),p=s(n("+jAD")),c=o(n("fUCW")),h=o(n("oLyU")),f=s(n("HEOz")),g=n("j8wP"),m=n("/4Qb"),y=o(n("APgo")),v=o(n("Atlv")),b=o(n("uBl0")),x=o(n("TBZ3")),C=o(n("MG0i")),k=n("zahm");class E extends l.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{uniqueId:h.default.uniqueId("perseus_radio_")}),(0,i.default)(this,"change",((...e)=>p.change.apply(this,e))),(0,i.default)(this,"getUserInput",(()=>E.getUserInputFromProps(this.props))),(0,i.default)(this,"onChange",((e,t)=>{const n=h.default.clone(this.props.values);n[e]=t,this.change("values",n),this.props.trackInteraction()})),(0,i.default)(this,"simpleValidate",(e=>E.validate(this.getUserInput(),e)))}render(){const e=this,t=this.props.apiOptions.isMobile;let n=this.props.items.map(((e,t)=>[e,t]));this.props.randomizeItems&&(n=b.default.shuffle(n,this.props.problemNum));const s=l.createElement("table",{className:"categorizer-table "+(0,r.css)(w.mobileTable)},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null," "),this.props.categories.map(((e,t)=>l.createElement("th",{className:(0,r.css)(w.header),key:t},l.createElement(v.default,{content:e,linterContext:this.props.linterContext})))))),l.createElement("tbody",null,n.map((n=>{const s=n[0],o=n[1],a=e.state.uniqueId+"_"+o;return l.createElement("tr",{key:o},l.createElement("td",null,l.createElement(v.default,{content:s,linterContext:this.props.linterContext})),h.default.range(e.props.categories.length).map((n=>{const s=e.props.values[o]===n;return l.createElement("td",{className:"category "+(0,r.css)(w.cell,w.responsiveCell),key:n},l.createElement("div",{className:g.ClassNames.INTERACTIVE,onClick:this.onChange.bind(this,o,n)},t&&l.createElement("input",{type:"radio",name:a,className:(0,r.css)(C.default.responsiveInput,C.default.responsiveRadioInput),checked:s,onChange:this.onChange.bind(this,o,n),onClick:e=>e.stopPropagation()}),!t&&l.createElement("span",{className:(0,r.css)(w.responsiveSpan,w.radioSpan,s&&w.checkedRadioSpan,this.props.static&&s&&w.staticCheckedRadioSpan)},s?l.createElement(y.default,m.iconCircle):l.createElement(y.default,m.iconCircleThin))))})))})))),o=(0,d.default)({"categorizer-container":!0,"static-mode":this.props.static}),a=this.props.apiOptions.isMobile?[w.fullBleedContainer]:[];return l.createElement("div",{className:o+" "+r.css.apply(void 0,a)},s)}}(0,i.default)(E,"propTypes",(0,a.default)({},p.propTypes,{apiOptions:g.Options.propTypes,categories:u.default.arrayOf(u.default.string),items:u.default.arrayOf(u.default.string),trackInteraction:u.default.func.isRequired,values:u.default.arrayOf(u.default.number),linterContext:k.linterContextProps})),(0,i.default)(E,"defaultProps",{items:[],categories:[],values:[],linterContext:k.linterContextDefault}),h.default.extend(E,{validate:function(e,t){let n=!0,s=!0;return h.default.each(t.values,(function(t,o){null==e.values[o]&&(n=!1),e.values[o]!==t&&(s=!1)})),n?{type:"points",earned:s?1:0,total:1,message:null}:{type:"invalid",message:f._("Make sure you select something for every row.")}},getUserInputFromProps:function(e){return c.default.getUserInputFromProps(e)}});const w=r.StyleSheet.create({mobileTable:{[x.default.smOrSmaller]:{minWidth:"auto"}},fullBleedContainer:{[x.default.mdOrSmaller]:{marginLeft:-16,marginRight:-16,overflowX:"auto"}},header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}});var M={name:"categorizer",displayName:"Categorizer",widget:E,transform:e=>h.default.pick(e,"items","categories","randomizeItems"),staticTransform:e=>h.default.pick(e,"items","categories","values","randomizeItems"),isLintable:!0};t.default=M},iUos:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=n("mR6N"),l=n("La43");class u extends i.PureComponent{constructor(...e){super(...e),(0,a.default)(this,"state",{cachedHighlightRects:this._computeRects(this.props),tooltipIsHovered:!1})}UNSAFE_componentWillReceiveProps(e){this.props.highlight===e.highlight&&this.props.offsetParent===e.offsetParent||this.setState({cachedHighlightRects:this._computeRects(e)})}_computeRects(e){const{highlight:t,offsetParent:n}=e,s=(0,l.getClientRectsForTextInRange)(t.domRange),o=n.getBoundingClientRect();return s.map((e=>(0,l.getRelativeRect)(e,o)))}_rectIsHovered(e,t){const n=(0,l.getRelativePosition)(t,e);return 0<=n.left&&n.left<e.width&&0<=n.top&&n.top<e.height}isHovered(e){if(!e)return!1;const{offsetParent:t}=this.props,{cachedHighlightRects:n}=this.state,s=t.getBoundingClientRect(),o=(0,l.getRelativePosition)(e,s);return n.some((e=>this._rectIsHovered(e,o)))}render(){const e=this.state.cachedHighlightRects;return i.createElement("div",null,e.map(((e,t)=>i.createElement("div",{key:t,className:(0,r.css)(d.highlightRect),style:{position:"absolute",width:e.width,height:e.height,top:e.top,left:e.left,zIndex:this.props.zIndexes.belowContent}}))))}}const d=r.StyleSheet.create({highlightRect:{background:"#fffabe"}});var p=u;t.default=p},ipxt:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("17x9")),l=o(n("i8i4")),u=o(n("oLyU")),d=o(n("rGVj")),p=n("j8wP"),c=o(n("uBl0")),h=o(n("XwLL")),f=o(n("yfnS")),g=o(n("NT9k")),m=s(n("HEOz")),y=o(n("bHYm")),v=o(n("T2HF"));const{deepEq:b}=c.default,x="bar",C="line",k="pic",E="histogram",w="dotplot";r.default.oneOf([x,C,k,E,w]),r.default.arrayOf(r.default.string),r.default.arrayOf(r.default.oneOfType([r.default.number,r.default.string])),r.default.number,r.default.number,r.default.number,r.default.number,r.default.number,r.default.string,r.default.arrayOf(r.default.number),r.default.number,r.default.arrayOf(r.default.number),r.default.bool;class M extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{values:this.props.starting||[1],categoryHeights:{}}),(0,a.default)(this,"DOT_PLOT_POINT_SIZE",(()=>this.props.apiOptions.isMobile?6:4)),(0,a.default)(this,"DOT_PLOT_POINT_PADDING",(()=>8)),(0,a.default)(this,"DOT_TICK_POINT_SIZE",(()=>2)),(0,a.default)(this,"_isMounted",!1),(0,a.default)(this,"setupGraphie",(e=>{const t=this;t.shouldSetupGraphie=!1;const n=l.default.findDOMNode(t.refs.graphieDiv);(0,d.default)(n).empty();const s=g.default.createGraphie(n);t.graphie=s,t.graphie.pics=[],t.graphie.dotTicks=[];const o=t.props.type===x,a=t.props.type===C,i=t.props.type===k,r=t.props.type===E,p=t.props.type===w,c=i||p,y={},b=y,M=this.props.apiOptions.isMobile;b.graph={lines:[],bars:[],points:[],dividers:[]},b.scaleY=t.props.scaleY,b.dimX=t.props.categories.length;const T=M?[288,336]:t.props.plotDimensions;if(a)b.dimX+=M?-.2:1;else if(r)b.barPad=0,b.barWidth=1;else if(o)b.barPad=M?.08:.15,b.barWidth=1-2*b.barPad,b.dimX+=(M?-2:2)*b.barPad;else if(c){b.picBoxHeight=t.props.picBoxHeight,b.picBoxWidthPx=T[0]/t.props.categories.length;const e=T[0]-b.dimX*b.picBoxWidthPx;b.picPad=e/(2*b.dimX+2);const n=b.picBoxWidthPx+2*b.picPad;b.picPad=b.picPad/n,b.picBoxWidth=b.picBoxWidthPx/n,b.dimX+=2*b.picPad}p&&(b.picBoxHeight=2*this.DOT_PLOT_POINT_SIZE()+this.DOT_PLOT_POINT_PADDING()),b.dimY=Math.ceil(t.props.maxY/b.scaleY)*b.scaleY;let S=25;(o||a)&&M&&(S=0!==t.props.labels[1].length?17:11),p&&(S/=2),M&&c&&0===t.props.labels[1].length&&(S=0);let P=25,I=75;if(M&&(o||c)){const e=Math.max.apply(Math,[0].concat(Object.values(t.state.categoryHeights)));if(e){let t=25;c&&(t+=10),I=t+e}}if(b.scale=M?[(T[0]-4*S)/b.dimX,(T[1]-(P+I))/b.dimY]:u.default.map([b.dimX,b.dimY],(function(e,t){return T[t]/e})),c&&(b.scale[1]=b.picBoxHeight/b.scaleY),S/=b.scale[0],P/=b.scale[1],I/=b.scale[1],s.init({range:[[-3*S,b.dimX+S],[-I,b.dimY+P]],scale:b.scale,isMobile:this.props.apiOptions.isMobile}),s.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!c){for(let e=M?b.scaleY:0;e<=b.dimY;e+=b.scaleY)s.label([0,e],h.default.roundToApprox(e,2),"left",!0),s.style({stroke:M?"#e9ebec":"#000",strokeWidth:1,opacity:M?1:.3},(function(){s.line([0,e],[b.dimX,e])}))}(o||a)&&M&&(t.graphie.dragPrompt=s.label([b.dimX/2,b.dimY/2],m._("Drag handles to make graph"),"center",!1).css("font-weight","bold").css("color",f.default.KA_GREEN).css("display","none")),t.setupCategories(y),c&&M&&(t.graphie.dotPrompt=s.label([b.dimX/2,b.dimY/2],m._("Tap to add points"),"center",!1).css("font-weight","bold").css("color",f.default.KA_GREEN).css("display","none")),c&&t.drawPicHeights(t.state.values,e.values),s.style({stroke:"#000",strokeWidth:2,opacity:1},(function(){c?p?s.style({stroke:M?f.default.GRAY_G:"#000",strokeWidth:M?1:2},(()=>s.line([M?0:.5,0],[b.dimX-(M?0:.5),0]))):(s.line([0,0],[b.dimX,0]),0===t.props.labels[1].length&&M||s.style({stroke:M?f.default.GRAY_G:"#000",strokeWidth:M?1:2},(()=>s.line([0,0],[0,b.dimY])))):(s.style({stroke:M?f.default.GRAY_G:"#000",strokeWidth:M?1:2},(()=>s.line([M?3*-S:0,0],[b.dimX+(M?S:0),0]))),(o||a)&&M||s.style({stroke:M?f.default.GRAY_G:"#000",strokeWidth:M?1:2},(()=>s.line([0,0],[0,b.dimY]))))})),s.label([b.dimX/2,M?-I:-35/b.scale[1]],t.props.labels[0],M?"above":"below",!1).css("font-weight","bold").css("color",M&&f.default.GRAY_F),s.label([(M?-35:-60)/b.scale[0],b.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",M&&f.default.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new v.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:f.default.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,b.dimX],[0,b.dimY]])})),(0,a.default)(this,"showHairlines",(e=>{this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())})),(0,a.default)(this,"hideHairlines",(()=>{this.props.apiOptions.isMobile&&this.horizHairline.hide()})),(0,a.default)(this,"labelCategory",((e,t)=>{const n=this.props.apiOptions.isMobile,s=this.graphie;let o=!1;const a=(t+="").match(/^\$(.*)\$$/);a&&(t=a[1],o=!0);const i=Math.PI/180*45,r="translateX(-50%) translateX(".concat(5,"px) ")+"translateY(-50%) rotate(-".concat(45,"deg)"),l=n&&!a;return new Promise((a=>{s.style({color:n?f.default.GRAY_G:"inherit",transform:l?r:"none",transformOrigin:"100%"},(()=>{const r=s.label([e,n?-.5:0],t,"below",o),u=14+(l?Math.round(r.height()*Math.cos(i)+(r.width()+5)*Math.sin(i)):r.height());a({category:t,height:u})}))}))})),(0,a.default)(this,"setupCategories",(e=>{const t=this,n=e,s=t.graphie,o=this.props.apiOptions.isMobile,a=[];t.props.type===E?(u.default.times(t.props.categories.length-1,(function(n){t.setupBar({index:n,startHeight:t.state.values[n],config:e,isHistogram:!0})})),u.default.each(t.props.categories,(function(e,i){const r=.5+i*n.barWidth;a.push(t.labelCategory(r,e));const l=6/n.scale[1];s.style({stroke:"#000",strokeWidth:o?1:2,opacity:1},(function(){s.line([r,-l],[r,0])}))}))):u.default.each(t.props.categories,(function(i,r){const l=t.state.values[r];let u;t.props.type===x?u=t.setupBar({index:r,startHeight:l,config:e,isHistogram:!1}):t.props.type===C?u=t.setupLine(r,l,e):t.props.type===k?u=t.setupPic(r,e):t.props.type===w&&(u=t.setupDotplot(r,e));let d=0,p=-6/n.scale[1];t.props.type!==w||o||(d=-p),t.props.type===w?r%t.props.labelInterval!=0&&r!==t.props.categories.length-1||(a.push(t.labelCategory(u,i)),d*=1.5,p*=1.5):a.push(t.labelCategory(u,i)),s.style({stroke:o?f.default.GRAY_G:"#000",strokeWidth:o?1:2,opacity:1},(function(){s.line([u,d],[u,p])}))})),Promise.all(a).then((e=>{if(t._isMounted){const n={};e.forEach((({category:e,height:t})=>n[e]=t)),t.setState({categoryHeights:n})}}))})),(0,a.default)(this,"_clampValue",((e,t,n)=>Math.max(Math.min(e,n),t))),(0,a.default)(this,"_maybeShowDragPrompt",(()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="inline")})),(0,a.default)(this,"_maybeHideDragPrompt",(()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="none")})),(0,a.default)(this,"setupBar",(e=>{const t=this.props.apiOptions.isMobile,n=e.index,s=e.startHeight,o=e.config,a=e.isHistogram,i=this,r=i.graphie,l=o.barWidth/2;let d;d=a?.5+n*o.barWidth+l:(t?l:.5+o.barPad)+n;const p=function(e,n){const s=r.scalePoint(0);if(o.graph.bars[e].scale(1,Math.max(t?.2:.01,n/o.scaleY),s[0],s[1]),a){const t=o.graph.dividers[e-1],a=o.graph.dividers[e];if(t){const a=Math.min(i.state.values[e-1],n);t.scale(1,Math.max(.01,a/o.scaleY),s[0],s[1])}if(a){const t=Math.min(i.state.values[e+1],n);a.scale(1,Math.max(.01,t/o.scaleY),s[0],s[1])}}};if(r.style({stroke:"none",fill:t?f.default.BLUE_C:f.default.LIGHT_BLUE,opacity:1},(function(){o.graph.bars[n]=r.path([[d-l,0],[d-l,o.scaleY],[d+l,o.scaleY],[d+l,0],[d-l,0]])})),a&&n>0&&r.style({stroke:"#000",strokeWidth:1,opacity:.3},(function(){o.graph.dividers.push(r.path([[d-l,0],[d-l,o.scaleY]]))})),t){const e=o.scaleY/i.props.snapsPerLine;o.graph.lines[n]=y.default.addMaybeMobileMovablePoint(this,{coord:[d,s],constraints:[(t,n,s)=>[d,this._clampValue(Math.round(t[1]/e)*e,0,o.dimY)]],onMoveStart:function(){o.graph.bars[n].attr({fill:f.default.INTERACTIVE})},onMove:function(){const e=o.graph.lines[n].coord()[1],t=u.default.clone(i.state.values);t[n]=e,i.setState({values:t}),i.changeAndTrack({values:t}),i._maybeHideDragPrompt(),p(n,e)},onMoveEnd:function(){o.graph.bars[n].attr({fill:f.default.BLUE_C})}}),o.graph.lines[n].state.visibleShape.wrapper.style.zIndex="1",i._maybeShowDragPrompt()}else o.graph.lines[n]=r.addMovableLineSegment({coordA:[d-l,s],coordZ:[d+l,s],snapY:o.scaleY/i.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:f.default.INTERACTIVE,"stroke-width":this.props.static?0:4}}),o.graph.lines[n].onMove=function(e,t){let s=this.coordA[1];(s<0||s>o.dimY)&&(s=Math.min(Math.max(s,0),o.dimY),this.coordA[1]=this.coordZ[1]=s,this.transform());const a=u.default.clone(i.state.values);a[n]=s,i.setState({values:a}),i.changeAndTrack({values:a}),p(n,s)};return p(n,s),d})),(0,a.default)(this,"setupLine",((e,t,n)=>{const s=this.props.apiOptions.isMobile,o=this,a=n,i=o.graphie,r=e+(s?.4:1);if(s){const s=n.scaleY/o.props.snapsPerLine;a.graph.points[e]=y.default.addMaybeMobileMovablePoint(this,{coord:[r,t],constraints:[(e,t,o)=>[r,this._clampValue(Math.round(e[1]/s)*s,0,n.dimY)]],onMove:function(){const t=a.graph.points[e].coord()[1],n=u.default.clone(o.state.values);n[e]=t,o.setState({values:n}),o.changeAndTrack({values:n}),o._maybeHideDragPrompt()}}),o._maybeShowDragPrompt(),e>0&&(a.graph.lines[e]=y.default.addMovableLine(i,{points:[a.graph.points[e-1],a.graph.points[e]],constraints:y.default.MovablePoint.constraints.fixed(),normalStyle:{stroke:f.default.BLUE_C,"stroke-width":2},highlightStyle:{stroke:f.default.BLUE_C,"stroke-width":2}}))}else a.graph.points[e]=i.addMovablePoint({coord:[r,t],constraints:{constrainX:!0},normalStyle:{fill:f.default.INTERACTIVE,stroke:f.default.INTERACTIVE},snapY:a.scaleY/o.props.snapsPerLine}),a.graph.points[e].onMove=function(t,n){n=Math.min(Math.max(n,0),a.dimY);const s=u.default.clone(o.state.values);return s[e]=n,o.setState({values:s}),o.changeAndTrack({values:s}),[t,n]},e>0&&(a.graph.lines[e]=i.addMovableLineSegment({pointA:a.graph.points[e-1],pointZ:a.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}));return r})),(0,a.default)(this,"setupDotplot",((e,t)=>{const n=this.graphie,s=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,s?.5:1,t,((e,t)=>n.ellipse([e,t],[this.DOT_PLOT_POINT_SIZE()/n.scale[0],this.DOT_PLOT_POINT_SIZE()/n.scale[1]],{fill:f.default.INTERACTIVE,stroke:f.default.INTERACTIVE})))})),(0,a.default)(this,"setupPic",((e,t)=>{const n=this.graphie;return this.setupTiledPlot(e,0,t,((e,t)=>{const s=n.scalePoint([e,t]),o=this.props.picSize;return n.raphael.image(this.props.picUrl,s[0]-o/2,s[1]-o/2,o,o)}))})),(0,a.default)(this,"setupTiledPlot",((e,t,n,s)=>{const o=this,a=n,i=o.graphie,r=i.pics,l=i.dotTicks,p=e+.5+a.picPad;i.mouselayer.canvas.style.touchAction="none",r[e]=[],l[e]=[];const c=Math.round(a.dimY/a.scaleY)+1;return(0,u.default)(c).times((function(n){const u=((n-=1)+.5)*a.scaleY,c=p-a.picBoxWidth/2,h=u+.5*a.scaleY,f=i.scalePoint([c,h+t]),g=i.mouselayer.rect(f[0],f[1],a.picBoxWidthPx,a.picBoxHeight);(0,d.default)(g[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",(function(n){n.preventDefault(),o.whichPicClicked=e,o.setPicHeight(e,h),(0,d.default)(document).on("vmouseup.plotTile",(function(e){(0,d.default)(document).unbind(".plotTile")})),(0,d.default)(document).on("vmousemove.plotTile",(function(e){e.preventDefault();const n=i.getMouseCoord(e)[1],s=Math.floor(n-t),r=(Math.max(-1,Math.floor(s/a.scaleY))+.5)*a.scaleY,l=Math.min(r+.5*a.scaleY,a.dimY);o.setPicHeight(o.whichPicClicked,l)}))})),n<0||(r[e][n]=s(p,u+t),l[e][n]=i.ellipse([p,u+t],[o.DOT_TICK_POINT_SIZE()/i.scale[0],o.DOT_TICK_POINT_SIZE()/i.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))})),p})),(0,a.default)(this,"setPicHeight",((e,t)=>{const n=u.default.clone(this.state.values);n[e]=t,this.drawPicHeights(n,this.state.values),this.setState({values:n}),this.changeAndTrack({values:n})})),(0,a.default)(this,"changeAndTrack",(e=>{this.props.onChange(e),this.props.trackInteraction()})),(0,a.default)(this,"drawPicHeights",((e,t)=>{const n=this,s=n.graphie,o=s.pics,a=this.props.apiOptions.isMobile;if(a){const t=e.every((e=>0===e));s.dotPrompt[0].style.display=t?"inline":"none"}u.default.each(o,(function(o,i){u.default.each(o,(function(o,r){const l=(r+1)*n.props.scaleY,u=l<=e[i];if(n.props.type===w){const e=l<=t[i];u&&!e&&o.animate({"stroke-width":8},75,(()=>o.animate({"stroke-width":2},75)))}(0,d.default)(o[0]).css({display:u?"inline":"none"}),s.dotTicks[i][r][0].style.display=u||!a?"none":"inline"}))}))})),(0,a.default)(this,"getUserInput",(()=>this.state.values)),(0,a.default)(this,"simpleValidate",(e=>M.validate(this.getUserInput(),e)))}render(){const e={marginBottom:this.props.labels[0]?75:0};return i.createElement("div",{className:"perseus-widget-plotter graphie "+p.ClassNames.INTERACTIVE,ref:"graphieDiv",style:e})}componentDidUpdate(e,t){this.shouldSetupGraphie=this.shouldSetupGraphie||!u.default.isEqual(this.state.categoryHeights,t.categoryHeights),this.shouldSetupGraphie&&this.setupGraphie(t)}componentDidMount(){this._isMounted=!0,this.setupGraphie(this.state)}UNSAFE_componentWillReceiveProps(e){this.shouldSetupGraphie=u.default.any(["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"],(function(t){return!u.default.isEqual(this.props[t],e[t])}),this),u.default.isEqual(this.props.starting,e.starting)||u.default.isEqual(this.state.values,e.starting)||(this.shouldSetupGraphie=!0,this.setState({values:e.starting}))}componentWillUnmount(){this._isMounted=!1}}(0,a.default)(M,"propTypes",{onChange:r.default.func.isRequired,trackInteraction:r.default.func.isRequired}),(0,a.default)(M,"defaultProps",{type:x,labels:["",""],categories:[""],scaleY:1,maxY:10,snapsPerLine:2,picSize:40,picBoxHeight:48,picUrl:"",plotDimensions:[380,300],labelInterval:1}),u.default.extend(M,{validate:function(e,t){return b(e,t.starting)?{type:"invalid",message:null}:{type:"points",earned:b(e,t.correct)?1:0,total:1,message:null}}});const T=u.default.identity;var S={name:"plotter",displayName:"Plotter",widget:M,staticTransform:T};t.default=S},"j+Ew":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("17x9")),l=n("mR6N"),u=o(n("oLyU")),d=n("yhei"),p=o(n("Atlv")),c=o(n("oBkO")),h=n("j8wP"),f=o(n("uBl0")),g=n("zahm"),m=n("yBUS");const{shuffle:y,seededRNG:v}=f.default;class b extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{leftHeight:0,rightHeight:0,katex:null}),(0,a.default)(this,"changeAndTrack",(e=>{this.props.onChange(e),this.props.trackInteraction()})),(0,a.default)(this,"onMeasureLeft",(e=>{const t=u.default.max(e.heights);this.setState({leftHeight:t})})),(0,a.default)(this,"onMeasureRight",(e=>{const t=u.default.max(e.heights);this.setState({rightHeight:t})})),(0,a.default)(this,"getUserInput",(()=>this.state.katex?{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}:{left:[],right:[]})),(0,a.default)(this,"simpleValidate",(e=>b.validate(this.getUserInput(),e)))}componentDidMount(){(0,m.getKaTeX)().then((e=>this.setState({katex:e})))}render(){if(!this.state.katex)return i.createElement(d.CircularSpinner,null);const e=v(this.props.problemNum);let t;t=this.props.orderMatters?y(this.props.left,e,!0):this.props.left;const n=y(this.props.right,e,!0),s=u.default.any(this.props.labels),o={height:u.default.max([this.state.leftHeight,this.state.rightHeight])},a=this.props.apiOptions.isMobile?8:5;return i.createElement("table",{className:(0,l.css)(C.widget)+" perseus-widget-matcher"},i.createElement("tbody",null,s&&i.createElement("tr",{className:(0,l.css)(C.row)},i.createElement("th",{className:(0,l.css)(C.column,C.columnLabel)},i.createElement(p.default,{content:this.props.labels[0]||"...",linterContext:this.props.linterContext})),i.createElement("th",{className:(0,l.css)(C.column,C.columnRight,C.columnLabel)},i.createElement(p.default,{content:this.props.labels[1]||"...",linterContext:this.props.linterContext}))),i.createElement("tr",{className:(0,l.css)(C.row)},i.createElement("td",{className:(0,l.css)(C.column)},i.createElement(c.default,{options:t,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:o,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:a,linterContext:this.props.linterContext,ref:"left"})),i.createElement("td",{className:(0,l.css)(C.column,C.columnRight)},i.createElement(c.default,{options:n,layout:"vertical",padding:this.props.padding,constraints:o,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:a,linterContext:this.props.linterContext,ref:"right"})))))}}(0,a.default)(b,"propTypes",{apiOptions:h.Options.propTypes,labels:r.default.array,left:r.default.array,onChange:r.default.func,orderMatters:r.default.bool,padding:r.default.bool,problemNum:r.default.number,right:r.default.array,trackInteraction:r.default.func.isRequired,linterContext:g.linterContextProps}),(0,a.default)(b,"defaultProps",{left:[],right:[],labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){},linterContext:g.linterContextDefault}),u.default.extend(b,{validate:function(e,t){return{type:"points",earned:u.default.isEqual(e.left,t.left)&&u.default.isEqual(e.right,t.right)?1:0,total:1,message:null}}});const x="1px solid #444",C=l.StyleSheet.create({widget:{paddingTop:5,maxWidth:"100%",minWidth:"auto"},row:{border:0},column:{padding:0,border:0},columnRight:{borderLeft:x},columnLabel:{fontWeight:"inherit",borderBottom:x,padding:"0 ".concat(5,"px ").concat(5,"px ").concat(5,"px"),textAlign:"center"}});var k={name:"matcher",displayName:"Two column matcher",widget:b,isLintable:!0};t.default=k},jDkz:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("17x9")),l=o(n("oLyU")),u=o(n("oBkO")),d=n("j8wP"),p=o(n("uBl0")),c=n("zahm");const{shuffle:h}=p.default,f="horizontal";class g extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{changed:!1}),(0,a.default)(this,"handleChange",(e=>{this._isMounted&&this.setState({changed:!0},(()=>{setTimeout((()=>{this.props.onChange(e),this.props.trackInteraction()}),0)}))})),(0,a.default)(this,"getUserInput",(()=>({options:this.refs.sortable.getOptions()}))),(0,a.default)(this,"simpleValidate",(e=>this.state.changed?g.validate(this.getUserInput(),e):{type:"invalid",message:null}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const e=h(this.props.correct,this.props.problemNum,!0),{apiOptions:t}=this.props,n=t.isMobile?8:5;return i.createElement("div",{className:"perseus-widget-sorter perseus-clearfix"},i.createElement(u.default,{options:e,layout:this.props.layout,margin:n,padding:this.props.padding,onChange:this.handleChange,linterContext:this.props.linterContext,ref:"sortable"}))}}(0,a.default)(g,"propTypes",{apiOptions:d.Options.propTypes,correct:r.default.array,layout:r.default.oneOf([f,"vertical"]),onChange:r.default.func,padding:r.default.bool,problemNum:r.default.number,trackInteraction:r.default.func.isRequired,linterContext:c.linterContextProps}),(0,a.default)(g,"defaultProps",{correct:[],layout:f,padding:!0,problemNum:0,onChange:function(){},linterContext:c.linterContextDefault}),l.default.extend(g,{validate:function(e,t){return{type:"points",earned:l.default.isEqual(e.options,t.correct)?1:0,total:1,message:null}}});var m={name:"sorter",displayName:"Sorter",widget:g,isLintable:!0};t.default=m},jH0K:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("17x9")),l=o(n("i8i4")),u=o(n("oLyU")),d=o(n("rGVj")),p=o(n("uBl0")),c=o(n("NT9k")),h=n("UcaO"),f=o(n("yPu2"));const g={fontStyle:"italic",fontWeight:"bold",fontSize:"32px",width:"100%",height:"100%",textAlign:"center",backgroundColor:"white",position:"absolute",zIndex:1,transition:"opacity .25s ease-in-out","-moz-transition":"opacity .25s ease-in-out","-webkit-transition":"opacity .25s ease-in-out"},m={position:"relative",top:"25%"};class y extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"reset",(()=>{this._setupGraphie(!1)})),(0,a.default)(this,"graphie",(()=>this._graphie)),(0,a.default)(this,"pointsFromNormalized",((e,t)=>{const n=this;return u.default.map(e,(function(e){return u.default.map(e,(function(e,s){const o=n.props.range[s];if(t)return o[0]+(o[1]-o[0])*e;const a=n.props.step[s],i=function(e,t){return Math.floor((e[1]-e[0])/t)}(o,a),r=Math.round(e*i);return o[0]+a*r}))}))})),(0,a.default)(this,"_setupGraphie",(e=>{if(this._hasSetupGraphieThisUpdate)return;const t=l.default.findDOMNode(this.refs.graphieDiv);(0,d.default)(t).empty();const n=this.props.labels.map((e=>p.default.unescapeMathMode(e))),s=this.props.range,o=this._graphie=c.default.createGraphie(t),a=this._getGridConfig();o.snap=this.props.snapStep,"graph"===this.props.markings?(o.graphInit({range:s,scale:u.default.pluck(a,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:this.props.gridStep,tickStep:u.default.pluck(a,"tickStep"),labelStep:1,unityLabels:u.default.pluck(a,"unityLabel"),isMobile:this.props.isMobile}),o.label([0,s[1][1]],n[1],this.props.isMobile?"below right":"above"),o.label([s[0][1],0],n[0],this.props.isMobile?"above left":"right")):"grid"===this.props.markings?o.graphInit({range:s,scale:u.default.pluck(a,"scale"),gridStep:this.props.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:this.props.isMobile}):"none"===this.props.markings&&o.init({range:s,scale:u.default.pluck(a,"scale"),isMobile:this.props.isMobile});let i;if(this.props.instructions){i=(0,d.default)("<div/>"),u.default.each(g,(function(e,t){i.css(t,e)})),i.css("opacity",.5);const e=(0,d.default)("<span/>",{text:this.props.instructions});u.default.each(m,(function(t,n){e.css(n,t)})),i.append(e),(0,d.default)(t).append(i)}else i=void 0;const r=i||this.props.onMouseDown?u.default.bind((function(e){i&&(i.remove(),i=null),this.props.onMouseDown(e)}),this):null,h=i?function(){i&&i.css("opacity",0)}:null,f=i?function(){i&&i.css("opacity",.5)}:null;o.addMouseLayer({onClick:this.props.onClick,onMouseDown:r,onMouseOver:h,onMouseOut:f,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,allowScratchpad:!0,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this._updateProtractor(),this._updateRuler(),this._hasSetupGraphieThisUpdate=!0,!e&&this.props.onGraphieUpdated&&this.props.onGraphieUpdated(o)})),(0,a.default)(this,"_getGridConfig",(()=>{const e=this;return u.default.map(e.props.step,(function(t,n){return p.default.gridDimensionConfig(t,e.props.range[n],e.props.box[n],e.props.gridStep[n])}))})),(0,a.default)(this,"_updateProtractor",(()=>{if(this.protractor&&this.protractor.remove(),this.props.showProtractor){const e=this.pointsFromNormalized([[.5,.05]])[0];this.protractor=this._graphie.protractor(e)}})),(0,a.default)(this,"_updateRuler",(()=>{if(this.ruler&&this.ruler.remove(),this.props.showRuler){const e=this.pointsFromNormalized([[.5,.25]])[0],t=this._graphie.range[0][1]-this._graphie.range[0][0];this.ruler=this._graphie.ruler({center:e,label:this.props.rulerLabel,pixelsPerUnit:this._graphie.scale[0],ticksPerUnit:this.props.rulerTicks,units:Math.round(.8*t)})}})),(0,a.default)(this,"toJSON",(()=>u.default.pick(this.props,"range","step","markings","labels","backgroundImage","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep")))}render(){let e;const t=this.props.backgroundImage;if(t.url){const n=this.props.box[0]/h.interactiveSizes.defaultBoxSize;e=i.createElement(f.default,{src:t.url,width:t.width,height:t.height,scale:n,responsive:!1})}else e=null;return i.createElement("div",{className:"graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]},onMouseOut:this.onMouseOut,onMouseOver:this.onMouseOver,onClick:this.onClick},e,i.createElement("div",{className:"graphie",ref:"graphieDiv"}))}componentDidMount(){this._setupGraphie(!0)}componentDidUpdate(){this._hasSetupGraphieThisUpdate=!1,this._shouldSetupGraphie&&(this._setupGraphie(!1),this._shouldSetupGraphie=!1)}UNSAFE_componentWillReceiveProps(e){const t=this;u.default.each(["labels","range","step","markings","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep"],(function(n){u.default.isEqual(t.props[n],e[n])||(t._shouldSetupGraphie=!0)}))}}(0,a.default)(y,"propTypes",{box:r.default.array.isRequired,labels:r.default.arrayOf(r.default.string),range:r.default.arrayOf(r.default.arrayOf(r.default.number)),step:r.default.arrayOf(r.default.number),gridStep:r.default.arrayOf(r.default.number),snapStep:r.default.arrayOf(r.default.number),markings:r.default.string,backgroundImage:r.default.shape({url:r.default.string}),showProtractor:r.default.bool,showRuler:r.default.bool,rulerLabel:r.default.string,rulerTicks:r.default.number,onGraphieUpdated:r.default.func,instructions:r.default.string,onClick:r.default.func,setDrawingAreaAvailable:r.default.func,isMobile:r.default.bool}),(0,a.default)(y,"defaultProps",{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[.5,.5],markings:"graph",backgroundImage:{url:null},showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,instructions:null,onGraphieUpdated:null,onClick:null,onMouseDown:null,isMobile:!1});var v=y;t.default=v},"k1y+":function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=o(n("TSYQ")),l=s(n("q1tI")),u=o(n("17x9")),d=o(n("i8i4")),p=o(n("oLyU")),c=n("reBI"),h=s(n("HEOz")),f=o(n("M++g")),g=o(n("Atlv")),m=o(n("G6Ta")),y=o(n("7xiW")),v=o(n("eMwK")),b=n("j8wP"),x=o(n("7BBF")),C=o(n("p8fL")),k=o(n("uBl0")),E=n("zahm");const{assert:w}=C.default,{stringArrayOfSize:M}=k.default,{keypadElementPropType:T}=c.propTypes,S={INPUT_MARGIN:4,INPUT_HEIGHT:38,INPUT_WIDTH:82},P={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},I={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64},_=function(e,t){return[""+e,""+t]},N=function(){return _(0,0)},A=function(e){return w(p.default.isArray(e)&&2===e.length),+e[0]},R=function(e){return w(p.default.isArray(e)&&2===e.length),+e[1]},O=function(e){return"answer"+A(e)+","+R(e)},D=function(e){const t=[1,1];return(0,p.default)(e).each(((e,n)=>{let s=0;(0,p.default)(e).each(((e,t)=>{null!=e&&e.toString().length&&(s=t+1)})),t[1]=Math.max(t[1],s),s>0&&(t[0]=Math.max(t[0],n+1))})),t};class L extends l.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{enterTheMatrix:0}),(0,i.default)(this,"getInputPaths",(()=>{const e=[],t=this.props.matrixBoardSize[0],n=this.props.matrixBoardSize[1];return(0,p.default)(t).times((t=>{(0,p.default)(n).times((n=>{const s=_(t,n);e.push(s)}))})),e})),(0,i.default)(this,"getGrammarTypeForPath",(e=>"number")),(0,i.default)(this,"_handleFocus",((e,t)=>{this.props.onFocus(_(e,t))})),(0,i.default)(this,"_handleBlur",((e,t)=>{this.props.onBlur(_(e,t))})),(0,i.default)(this,"focus",(()=>(this.focusInputPath(N()),!0))),(0,i.default)(this,"focusInputPath",(e=>{const t=O(e);this.refs[t].focus()})),(0,i.default)(this,"blurInputPath",(e=>{0===e.length&&(e=N());const t=O(e);this.refs[t].blur()})),(0,i.default)(this,"getDOMNodeForPath",(e=>{const t=O(e);return d.default.findDOMNode(this.refs[t])})),(0,i.default)(this,"setInputValue",((e,t,n)=>{const s=A(e),o=R(e);this.onValueChange(s,o,t,n)})),(0,i.default)(this,"handleKeyDown",((e,t,n)=>{const s=this.props.matrixBoardSize[0],o=this.props.matrixBoardSize[1];let a=null;const i=this.refs[O(_(e,t))],r=i.getStringValue(),l=i.getSelectionStart(),u=i.getSelectionEnd();let d=null;if("ArrowUp"===n.key&&e>0?d=_(e-1,t):"ArrowDown"===n.key&&e+1<s?d=_(e+1,t):"ArrowLeft"===n.key&&t>0?0===l&&0===u&&(d=_(e,t-1)):"ArrowRight"===n.key&&t+1<o?l===r.length&&(d=_(e,t+1)):"Enter"===n.key?a=this.state.enterTheMatrix+1:"Escape"===n.key&&(a=0),d){n.preventDefault();const e=this.refs[O(d)],t=2*e.getStringValue().length;e.focus(),"ArrowRight"===n.key?e.setSelectionRange(0,0):e.setSelectionRange(t,t)}null!=a&&this.setState({enterTheMatrix:a})})),(0,i.default)(this,"onValueChange",((e,t,n,s)=>{const o=p.default.map(this.props.answers,p.default.clone);o[e]||(o[e]=[]),o[e][t]=n,this.props.onChange({answers:o},s),this.props.trackInteraction()})),(0,i.default)(this,"getUserInput",(()=>({answers:this.props.answers}))),(0,i.default)(this,"simpleValidate",(e=>L.validate(this.getUserInput(),e)))}componentDidMount(){this.cursorPosition=[0,0]}render(){let e;e=this.props.apiOptions.customKeypad?I:this.props.apiOptions.staticRender?S:P;const{INPUT_MARGIN:t,INPUT_HEIGHT:n,INPUT_WIDTH:s}=e,o=D(this.props.answers),i=this.props.matrixBoardSize[0],u=this.props.matrixBoardSize[1],d=this.props.cursorPosition[0],c=this.props.cursorPosition[1],h=Math.max(d,o[0]-1),b=Math.max(c,o[1]-1),x=(h+1)*(n+2*t),C=(b+1)*(s+2*t),k=(0,r.default)({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return l.createElement("div",{className:k},this.props.prefix&&l.createElement("div",{className:"matrix-prefix"},l.createElement(g.default,{content:this.props.prefix,linterContext:this.props.linterContext})),l.createElement("div",{className:"matrix-input"},l.createElement("div",{className:"matrix-bracket bracket-left",style:{height:x}}),l.createElement("div",{className:"matrix-bracket bracket-right",style:{height:x,left:C}}),(0,p.default)(i).times((e=>{const o=this.props.answers[e];return l.createElement("div",{className:"matrix-row",key:e},(0,p.default)(u).times((i=>{const r=e>h||i>b,u={className:r?"outside":"inside",ref:O(_(e,i)),value:o?o[i]:null,style:{height:n,width:s,margin:t},disabled:this.props.apiOptions.readOnly,onFocus:()=>{this.cursorPosition=[e,i],this.props.onChange({cursorPosition:[e,i]},(()=>!1)),this._handleFocus(e,i)},onBlur:()=>{e===this.cursorPosition[0]&&i===this.cursorPosition[1]&&this.props.onChange({cursorPosition:[0,0]},(()=>!1)),this._handleBlur(e,i)},onKeyDown:t=>{this.handleKeyDown(e,i,t)},onChange:(t,n)=>{this.onValueChange(e,i,t,n)}};let d;if(this.props.apiOptions.customKeypad){const e={margin:t,minWidth:s,minHeight:n,boxSizing:"border-box",backgroundColor:r?"#f3f3f3":"#fff"};d=l.createElement(v.default,(0,a.default)({},u,{style:e,scrollable:!0,keypadElement:this.props.keypadElement}))}else d=this.props.apiOptions.staticRender?l.createElement(y.default,u):this.props.numericInput?l.createElement(f.default,u):l.createElement(m.default,u);return l.createElement("span",{key:i,className:"matrix-input-field"},d)})))}))),this.props.suffix&&l.createElement("div",{className:"matrix-suffix"},l.createElement(g.default,{content:this.props.suffix,linterContext:this.props.linterContext})))}}(0,i.default)(L,"propTypes",{answers:u.default.arrayOf(u.default.arrayOf(u.default.oneOfType([u.default.string,u.default.number]))),apiOptions:b.Options.propTypes,cursorPosition:u.default.arrayOf(u.default.number),keypadElement:T,matrixBoardSize:u.default.arrayOf(u.default.number).isRequired,prefix:u.default.string,suffix:u.default.string,trackInteraction:u.default.func.isRequired,linterContext:E.linterContextProps}),(0,i.default)(L,"defaultProps",{matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0],apiOptions:b.Options.defaults,linterContext:E.linterContextDefault}),p.default.extend(L,{validate:function(e,t){const n=t.answers,s=e.answers,o=D(n),a=D(s),i=o[0]!==a[0]||o[1]!==a[1],r=x.default.number.createValidatorFunctional;let l=null,u=!1,d=!1;return(0,p.default)(a[0]).times((e=>{(0,p.default)(a[1]).times((t=>{if(null!=s[e][t]&&0!==s[e][t].toString().length||(u=!0),!i){const o=r(n[e][t],{simplify:!0})(s[e][t]);o.message&&(l=o.message),o.correct||(d=!0)}}))})),u?{type:"invalid",message:h._("Make sure you fill in all cells in the matrix.")}:i?{type:"points",earned:0,total:1,message:null}:{type:"points",earned:d?0:1,total:1,message:l}}});var F={name:"matrix",displayName:"Matrix",widget:L,transform:e=>{const t=(0,p.default)(e.matrixBoardSize[0]).times((function(){return M(e.matrixBoardSize[1])}));return e=p.default.pick(e,"matrixBoardSize","prefix","suffix"),p.default.extend(e,{answers:t})},staticTransform:e=>{const t=p.default.pick(e,"matrixBoardSize","prefix","suffix");return t.answers=p.default.map(e.answers,(e=>p.default.map(e,(e=>null!=e?String(e):"")))),t},isLintable:!0};t.default=F},o0j1:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=n("mR6N"),u=o(n("473Y")),d=o(n("h/OD")),p=n("VMUI");class c extends r.PureComponent{constructor(...e){super(...e),(0,i.default)(this,"state",{wordRanges:[]}),(0,i.default)(this,"_handleAddHighlight",(e=>{const t=(0,p.addHighlight)(this._getDOMHighlights(),e),n={};for(const e of Object.keys(t))n[e]=(0,p.serializeHighlight)(t[e]);this.props.onSerializedHighlightsUpdate(n)})),(0,i.default)(this,"_handleRemoveHighlight",(e=>{const{serializedHighlights:t}=this.props,n=(0,a.default)({},t);delete n[e],this.props.onSerializedHighlightsUpdate(n)})),(0,i.default)(this,"_handleWordsUpdate",(e=>{this.setState({wordRanges:e})}))}_buildHighlight(e){return(0,p.buildHighlight)(this._getDOMHighlights(),this.state.wordRanges,e)}_getDOMHighlights(){const{serializedHighlights:e}=this.props,{wordRanges:t}=this.state,n={};for(const s of Object.keys(e))n[s]=(0,p.deserializeHighlight)(e[s],t);return n}render(){const e=this._getDOMHighlights();return r.createElement("div",{className:(0,l.css)(h.container),ref:e=>this._container=e},r.createElement("div",null,this.props.enabled&&this._container&&this._content&&r.createElement(u.default,{buildHighlight:e=>this._buildHighlight(e),contentNode:this._content,editable:this.props.editable,highlights:e,offsetParent:this._container,zIndexes:{belowContent:0},onAddHighlight:this._handleAddHighlight,onRemoveHighlight:this._handleRemoveHighlight})),r.createElement("div",{className:(0,l.css)(h.content),ref:e=>this._content=e},r.createElement(d.default,{onWordsUpdate:this._handleWordsUpdate},this.props.children)))}}const h=l.StyleSheet.create({container:{position:"relative",zIndex:0},content:{position:"relative",zIndex:1}});var f=c;t.default=f},oBkO:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("17x9")),l=o(n("fhzG")),u=o(n("i8i4")),d=n("mR6N"),p=o(n("oLyU")),c=o(n("rGVj")),h=n("yhei"),f=o(n("uBl0")),g=o(n("Atlv")),m=n("j8wP"),y=o(n("Boyy")),v=n("zahm"),b=n("yBUS");const x="horizontal",C="vertical",k="static",E="dragging",w="animating",M="disabled",T=(e,t)=>{const n=e.offsetParent();return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft()}};class S extends i.Component{render(){const{layout:e}=this.props,t=(0,d.css)(_.card,_.placeholder,e===x&&_.horizontalCard),n={width:this.props.width,height:this.props.height};return null!=this.props.margin&&(n.margin=this.props.margin),i.createElement("li",{className:t,style:n})}}(0,a.default)(S,"propTypes",{layout:r.default.oneOf([x,C]),width:r.default.number.isRequired,height:r.default.number.isRequired});class P extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"animationFrameRequest",null),(0,a.default)(this,"state",{startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0}}),(0,a.default)(this,"getCurrentPosition",(()=>({left:this.state.startPosition.left+this.state.mouse.left-this.state.startMouse.left,top:this.state.startPosition.top+this.state.mouse.top-this.state.startMouse.top}))),(0,a.default)(this,"bindMouseMoveUp",(()=>{this.isMouseMoveUpBound=!0,(0,c.default)(document).on("mousemove",this.onMouseMove),(0,c.default)(document).on("mouseup",this.onMouseUp)})),(0,a.default)(this,"unbindMouseMoveUp",(()=>{this.isMouseMoveUpBound=!1,(0,c.default)(document).off("mousemove",this.onMouseMove),(0,c.default)(document).off("mouseup",this.onMouseUp)})),(0,a.default)(this,"onMouseDown",(e=>{if(this.props.type!==k)return;if(0!==e.button&&(null==e.touches||1!==e.touches.length))return;e.preventDefault();const t=f.default.extractPointerLocation(e);this.animationFrameRequest=requestAnimationFrame((()=>{const e=(0,c.default)(u.default.findDOMNode(this)),n=e.position(),s=T(e,n);t&&this.setState({startPosition:s,startMouse:t,mouse:t,dragging:!0},(function(){this.bindMouseMoveUp(),this.props.onMouseDown()}))}))})),(0,a.default)(this,"onMouseMove",(e=>{if(this.props.type!==E||!this.state.dragging)return;e.preventDefault();const t=f.default.extractPointerLocation(e);t&&(this.animationFrameRequest=requestAnimationFrame((()=>{this.setState({mouse:t},this.props.onMouseMove)})))})),(0,a.default)(this,"onMouseUp",(e=>{if(this.props.type!==E||!this.state.dragging)return;e.preventDefault();f.default.extractPointerLocation(e)&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp())}))}componentDidMount(){this.mouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!f.default.supportsPassiveEvents()&&{passive:!1})}componentWillUnmount(){this.isMouseMoveUpBound&&this.unbindMouseMoveUp(),this.animationFrameRequest&&cancelAnimationFrame(this.animationFrameRequest),document.removeEventListener("touchmove",this.onMouseMove)}render(){const{includePadding:e,layout:t,type:n}=this.props;let s=(0,d.css)(_.card,_.draggable,t===x&&_.horizontalCard,t===C&&_.verticalCard,n===E&&_.dragging,n===w&&_.animating,n===M&&_.disabled,!e&&_.unpaddedCard)+" "+m.ClassNames.INTERACTIVE+" perseus-sortable-draggable";e||(s+=" perseus-sortable-draggable-unpadded");const o={position:"static"};return this.props.type!==E&&this.props.type!==w||p.default.extend(o,{position:"absolute"},this.getCurrentPosition()),this.props.width&&(o.width=this.props.width+1),this.props.height&&(o.height=this.props.height),null!=this.props.margin&&(o.margin=this.props.margin),i.createElement("li",{className:s,style:o,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},i.createElement(g.default,{content:this.props.content,linterContext:y.default.pushContextStack(this.props.linterContext,"draggable"),onRender:this.props.onRender}))}componentDidUpdate(e){if(this.props.type!==e.type)if(this.props.type===w){const e=this.getCurrentPosition(),t=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-e.left,2)+Math.pow(this.props.endPosition.top-e.top,2)));(0,c.default)(u.default.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(t,1),complete:this.props.onAnimationEnd})}else this.props.type===k&&(0,c.default)(u.default.findDOMNode(this)).finish()}}(0,a.default)(P,"propTypes",{content:r.default.string.isRequired,endPosition:r.default.object.isRequired,includePadding:r.default.bool,layout:r.default.oneOf([x,C]),onAnimationEnd:r.default.func.isRequired,onMouseDown:r.default.func.isRequired,onMouseMove:r.default.func.isRequired,onMouseUp:r.default.func.isRequired,onRender:r.default.func.isRequired,type:r.default.oneOf([k,E,w,M]),linterContext:v.linterContextProps}),(0,a.default)(P,"defaultProps",{includePadding:!0,type:k,linterContext:v.linterContextDefault});const I=(0,l.default)({displayName:"Sortable",propTypes:{constraints:r.default.object,disabled:r.default.bool,layout:r.default.oneOf([x,C]),margin:r.default.number,onChange:r.default.func,onMeasure:r.default.func,options:r.default.array.isRequired,padding:r.default.bool,linterContext:v.linterContextProps},getDefaultProps:function(){return{layout:x,padding:!0,disabled:!1,constraints:{},onMeasure:function(){},margin:5,onChange:function(){},linterContext:v.linterContextDefault}},getInitialState:function(){return{items:this.itemsFromProps(this.props),katex:null}},UNSAFE_componentWillReceiveProps:function(e){const t=this.props;p.default.isEqual(e.options,t.options)?e.layout===t.layout&&e.padding===t.padding&&e.disabled===t.disabled&&p.default.isEqual(e.constraints,t.constraints)||this.setState({items:this.clearItemMeasurements(this.state.items)}):this.setState({items:this.itemsFromProps(e)})},componentDidUpdate:function(){!this.state.items.length||this.state.items[0].width||this.state.items[0].height||setTimeout((()=>{this.measureItems()}),0)},componentDidMount:function(){(0,b.getKaTeX)().then((e=>this.setState({katex:e})))},itemsFromProps:function(e){const t=e.disabled?M:k;return p.default.map(e.options,(function(e,n){return{option:e,key:n,type:t,endPosition:{},width:0,height:0}}))},clearItemMeasurements:function(e){return p.default.map(e,(function(e){return p.default.extend(e,{width:0,height:0})}))},measureItems:function(){let e=p.default.clone(this.state.items);const t=p.default.map(e,(function(e){return(0,c.default)(u.default.findDOMNode(this.refs[e.key]))}),this),n=p.default.invoke(t,"outerWidth"),s=p.default.invoke(t,"outerHeight"),o=this.props.constraints,a=this.props.layout;let i,r;o.width?i=p.default.max(n.concat(o.width)):a===C&&(i=p.default.max(n)),o.height?r=p.default.max(s.concat(o.height)):a===x&&(r=p.default.max(s)),e=p.default.map(e,(function(e,t){return e.width=i||n[t],e.height=r||s[t],e})),this.setState({items:e},(()=>{this.props.onMeasure({widths:n,heights:s})}))},remeasureItems:p.default.debounce((function(){this.setState({items:this.clearItemMeasurements(this.state.items)})}),20),render:function(){if(!this.state.katex)return i.createElement(h.CircularSpinner,null);const e=[],{layout:t}=this.props,n=(0,d.css)(_.sortable)+" perseus-sortable",s=this.props.constraints.width||t===C,o=this.props.constraints.height||t===x;return p.default.each(this.state.items,(function(n,a,r){const l=a===r.length-1,u=n.type===k||n.type===M;let d;this.props.layout===x?d="0 "+this.props.margin+"px 0 0":this.props.layout===C&&(d="0 0 "+this.props.margin+"px 0"),e.push(i.createElement(P,{content:n.option,key:n.key,type:n.type,ref:n.key,width:s?n.width:void 0,height:o?n.height:void 0,layout:t,includePadding:this.props.padding,margin:l&&u?0:d,endPosition:n.endPosition,linterContext:y.default.pushContextStack(this.props.linterContext,"sortable"),onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,n.key),onMouseMove:this.onMouseMove.bind(this,n.key),onMouseUp:this.onMouseUp.bind(this,n.key),onTouchMove:this.onMouseMove.bind(this,n.key),onTouchEnd:this.onMouseUp.bind(this,n.key),onTouchCancel:this.onMouseUp.bind(this,n.key),onAnimationEnd:this.onAnimationEnd.bind(this,n.key)})),n.type!==E&&n.type!==w||e.push(i.createElement(S,{key:"placeholder_"+n.key,ref:"placeholder_"+n.key,width:n.width,height:n.height,layout:t,margin:l?0:d}))}),this),i.createElement("ul",{className:n},e)},onMouseDown:function(e){const t=p.default.map(this.state.items,(function(t){return t.key===e&&(t.type=E),t}));this.setState({items:t})},onMouseMove:function(e){const t=(0,c.default)(u.default.findDOMNode(this.refs[e])),n=(0,c.default)(u.default.findDOMNode(this)),s=p.default.clone(this.state.items),o=p.default.findWhere(this.state.items,{key:e}),a=this.props.margin,i=p.default.indexOf(s,o);let r=0;if(s.splice(i,1),this.props.layout===x){const e=t.offset().left-n.offset().left;let o,i=0;p.default.each(s,(function(t){o=t.width,e>i+o/2&&(r+=1),i+=o+a}))}else{const e=t.offset().top-n.offset().top;let o,i=0;p.default.each(s,(function(t){o=t.height,e>i+o/2&&(r+=1),i+=o+a}))}r!==i&&(s.splice(r,0,o),this.setState({items:s}))},onMouseUp:function(e){this.animationFrameRequest=requestAnimationFrame((()=>{const t=p.default.map(this.state.items,(function(t){if(t.key===e){t.type=w;const n=(0,c.default)(u.default.findDOMNode(this.refs["placeholder_"+e])),s=n.position(),o=T(n,s);t.endPosition=o}return t}),this);this.setState({items:t}),this.props.onChange({})}))},onAnimationEnd:function(e){const t=p.default.map(this.state.items,(function(t){return t.key===e&&(t.type=k),t}));this.setState({items:t})},getOptions:function(){return p.default.pluck(this.state.items,"option")}}),_=d.StyleSheet.create({sortable:{boxSizing:"border-box",float:"left",padding:0,margin:0},card:{boxSizing:"border-box",background:"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",minWidth:25,minHeight:44,padding:10,listStyleType:"none",userSelect:"none",touchAction:"none"},placeholder:{background:"#ddd",border:"1px solid #ccc"},draggable:{textAlign:"center"},horizontalCard:{float:"left",cursor:"ew-resize"},verticalCard:{maxWidth:"100%",cursor:"ns-resize"},unpaddedCard:{padding:0},dragging:{background:"#ffedcd",opacity:"0.8"},disabled:{backgroundColor:"inherit",border:"1px solid transparent",cursor:"default"}});var N=I;t.default=N},oaDE:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=n("mR6N"),r=s(n("q1tI")),l=n("6OHE"),u=o(n("6wxr")),d=n("/4Qb");class p extends r.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{isFocused:!1})}handleFocus(){this.setState({isFocused:!0})}handleBlur(){this.setState({isFocused:!1})}renderIcon(){const{selected:e,showCorrectness:t,showSelected:n,showPulsate:s}=this.props,{isFocused:o}=this.state,a=n||o;let p,c;return t?(p=r.createElement(u.default,{icon:"correct"===t?d.iconCheck:d.iconMinus,size:24,color:l.colors.white}),c="correct"===t?[g.markerCorrect,a&&g.markerCorrectSelected]:[g.markerIncorrect,a&&g.markerIncorrectSelected]):c=e&&e.length>0?[g.markerFilled,a&&g.markerFilledSelected]:[a?g.markerUnfilledSelected:s&&g.markerUnfilledPulsate],r.createElement("div",{className:i.css.apply(void 0,[g.markerIcon].concat(c)),ref:e=>this._icon=e},p)}render(){const{label:e,x:t,y:n,showCorrectness:s}=this.props,o="correct"===s;return r.createElement("button",{"aria-label":e,className:(0,i.css)(g.unstyledButton,g.marker,o&&g.disabled),style:{left:"".concat(t,"%"),top:"".concat(n,"%")},tabIndex:o?-1:0,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onClick:e=>this.props.onClick(e),onKeyDown:e=>this.props.onKeyDown(e)},this.renderIcon())}}t.default=p,(0,a.default)(p,"defaultProps",{selected:[]});const c="#2552b0",h=c,f="rgba(33, 36, 44, 0.16)",g=i.StyleSheet.create({unstyledButton:{padding:0,overflow:"visible",color:"inherit",font:"inherit",lineHeight:"normal",background:"none",border:"none"},marker:{position:"absolute",width:30,height:30,marginLeft:-15,marginTop:-15},disabled:{pointerEvents:"none"},markerIcon:{display:"flex",position:"relative",boxSizing:"content-box",width:16,height:16,marginLeft:5,cursor:"pointer",backgroundColor:"#1865f2",border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 6px 0 ".concat("rgba(33, 36, 44, 0.32)")},markerUnfilledPulsate:{animationName:{"0%":{transform:"scale(1)"},"100%":{transform:"scale(1.5)"}},animationDirection:"alternate",animationDuration:"0.8s",animationIterationCount:"infinite",animationTimingFunction:"ease-in",transformOrigin:"50% 50%"},markerUnfilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:20,height:20,marginLeft:-4,marginTop:-4,border:"solid 2px ".concat(c),borderRadius:20},":active":{backgroundColor:h,boxShadow:"none","::before":{display:"none"}}},markerFilled:{width:8,height:8,marginLeft:9,borderRadius:8,boxShadow:"0 1px 1px 0 ".concat(f)},markerFilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:12,height:12,marginLeft:-4,marginTop:-4,border:"solid 2px ".concat(c),borderRadius:12},":active":{backgroundColor:h,boxShadow:"none","::before":{display:"none"}}},markerCorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:"#00a60e",boxShadow:"0 1px 1px 0 ".concat(f)},markerCorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px ".concat(c),borderRadius:28},":active":{backgroundColor:"#167b1f",boxShadow:"none","::before":{display:"none"}}},markerIncorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:"#909195",boxShadow:"0 1px 1px 0 ".concat(f)},markerIncorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px ".concat(c),borderRadius:28},":active":{backgroundColor:"#6c6e73",boxShadow:"none","::before":{display:"none"}}}})},qRYE:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("i8i4")),d=o(n("oLyU")),p=n("eAf/"),c=s(n("+jAD")),h=o(n("M++g")),f=o(n("7xiW")),g=o(n("eMwK")),m=n("j8wP"),y=n("reBI"),v=o(n("Giaf")),b=o(n("XwLL")),x=o(n("yfnS")),C=s(n("HEOz")),k=o(n("p8fL"));const E=v.default.MovablePoint,w=v.default.Line,{assert:M}=k.default,T={ge:"le",gt:"lt",le:"ge",lt:"gt"},S={ge:"gt",gt:"ge",le:"lt",lt:"le"};function P(e,t){return 1===t?""+e:"\\dfrac{".concat(e,"}{").concat(t,"}")}function I(e,t){if(e<0)return"-"+I(-e,t);const n=Math.floor(e/t);return 0===n?P(e,t):e-n*t==0?""+n:n+P(e-n*t,t)}const _=(e,t,n,s,o)=>{if(s=s||n,"decimal"===t||"decimal ticks"===t)return e.label([n,-.53],Math.round(100*s)/100,"center");if("improper"===t){const t=b.default.toFraction(s);return e.label([n,-.17],P(t[0],t[1]),"below")}if("mixed"===t){const t=b.default.toFraction(s);return e.label([n,-.17],I(t[0],t[1]),"below")}if("non-reduced"===t){const t=b.default.toFraction(s);return e.label([n,-.17],function(e,t,n){return P(e*Math.floor(n/t),n)}(t[0],t[1],o),"below")}},N=v.default.createSimpleClass(((e,t)=>{if(!d.default.isFinite(t.tickStep)||t.tickStep<=0)return[];const n=[],s=t.range,o=t.labelRange,a=null==o[0]?s[0]:o[0],i=null==o[1]?s[1]:o[1];let r;if("non-reduced"===t.labelStyle){const e=[a,i];for(let n=0;n<=t.numDivisions;n++){const o=s[0]+n*t.tickStep;e.push(o)}const n=e=>p.number.toFraction(e)[1],o=d.default.map(e,n);r=d.default.reduce(o,((e,t)=>b.default.getLCM(e,t)))}else r=void 0;for(let o=0;o<=t.numDivisions;o++){const a=s[0]+o*t.tickStep;n.push(e.line([a,-.2],[a,.2]));(t.labelTicks||"decimal ticks"===t.labelStyle)&&n.push(_(e,t.labelStyle,a,a,r))}return n.push(e.style(t.isMobile?{color:x.default.BLUE_D}:{},(()=>_(e,t.labelStyle,a,a,r)))),n.push(e.style(t.isMobile?{color:x.default.BLUE_D}:{},(()=>_(e,t.labelStyle,i,i,r)))),e.style({stroke:t.isMobile?x.default.BLUE_D:x.default.DYNAMIC,strokeWidth:3.5},(()=>{n.push(e.line([a,-.2],[a,.2])),n.push(e.line([i,-.2],[i,.2]))})),n}));class A extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{numDivisionsEmpty:!1}),(0,i.default)(this,"change",((...e)=>c.change.apply(this,e))),(0,i.default)(this,"isValid",(()=>{const e=this.props.range;let t=this.props.numLinePosition;const n=this.props.divisionRange;return t=null==t?e[0]:t,e[0]<e[1]&&p.number.sign(t-e[0])>=0&&p.number.sign(t-e[1])<=0&&n[0]<n[1]&&0<this.props.numDivisions&&0<this.props.snapDivisions})),(0,i.default)(this,"onNumDivisionsChange",((e,t)=>{const n=this.props.divisionRange.slice(),s=this.props.range[1]-this.props.range[0];if(e=(e=Math.round(e))<0?-1*e:e){const o=d.default.extend({},this.props,{tickStep:s/e}),a=this.snapNumLinePosition(o,this.props.numLinePosition);this.setState({numDivisionsEmpty:!1},(()=>{this.props.onChange({divisionRange:n,numDivisions:e,numLinePosition:a},t)}))}else this.setState({numDivisionsEmpty:!0},t)})),(0,i.default)(this,"_handleTickCtrlFocus",(()=>{this.props.onFocus(["tick-ctrl"])})),(0,i.default)(this,"_handleTickCtrlBlur",(()=>{this.props.onBlur(["tick-ctrl"])})),(0,i.default)(this,"focus",(()=>{if(this.props.isTickCtrl)return this.refs["tick-ctrl"].focus(),!0})),(0,i.default)(this,"focusInputPath",(e=>{1===e.length&&this.refs[e[0]].focus()})),(0,i.default)(this,"blurInputPath",(e=>{1===e.length&&this.refs[e[0]].blur()})),(0,i.default)(this,"getInputPaths",(()=>this.props.isTickCtrl?[["tick-ctrl"]]:[])),(0,i.default)(this,"getDOMNodeForPath",(e=>{if(1===e.length)return u.default.findDOMNode(this.refs[e[0]])})),(0,i.default)(this,"getGrammarTypeForPath",(e=>{if(1===e.length&&"tick-ctrl"===e[0])return"number"})),(0,i.default)(this,"setInputValue",((e,t,n)=>{1===e.length&&"tick-ctrl"===e[0]&&this.onNumDivisionsChange(t,n)})),(0,i.default)(this,"_renderGraphie",(()=>{const e=this.props.range,t=e[1]-e[0],n=d.default.pick(this.props,["range","isTickCtrl"]),s=d.default.extend({},this.props,{tickStep:t/this.props.numDivisions});return r.createElement(v.default,{ref:"graphie",key:this.props.labelStyle,box:[this.props.apiOptions.isMobile?288:460,80],options:n,onMouseDown:e=>{this.refs.graphie.movables.numberLinePoint.grab(e)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile},r.createElement(N,(0,a.default)({},d.default.pick(s,["range","numDivisions","labelTicks","labelStyle","labelRange","tickStep"]),{isMobile:this.props.apiOptions.isMobile})),this._renderInequality(s),this._renderNumberLinePoint(s))})),(0,i.default)(this,"snapNumLinePosition",((e,t)=>{const n=e.range[0],s=e.range[1],o=e.tickStep/e.snapDivisions;let a=((e,t,n)=>Math.min(Math.max(e,t),n))(t,n,s);return a=n+p.number.roundTo(a-n,o),M(d.default.isFinite(a)),a})),(0,i.default)(this,"_renderNumberLinePoint",(e=>{const t=(0,d.default)(["lt","gt"]).contains(e.rel);let n;n=t?x.default._BACKGROUND:e.static?x.default.DYNAMIC:x.default.INTERACTIVE;const s={fill:n,stroke:e.static?x.default.DYNAMIC:x.default.INTERACTIVE,"stroke-width":t?3:1},o={fill:t?x.default._BACKGROUND:x.default.INTERACTING,"stroke-width":t?3:1},a=e.isInequality?{stroke:x.default.INTERACTIVE,"fill-opacity":t?0:1}:{};return r.createElement(E,{ref:"numberLinePoint",pointSize:6,coord:[e.numLinePosition,0],constraints:[(e,t)=>[e[0],t[1]],(t,n)=>[this.snapNumLinePosition(e,t[0]),t[1]]],normalStyle:s,highlightStyle:o,onMove:e=>{this.change({numLinePosition:e[0]}),this.props.trackInteraction()},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:a,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})})),(0,i.default)(this,"handleReverse",(()=>{const e=T[this.props.rel];this.props.onChange({rel:e})})),(0,i.default)(this,"handleToggleStrict",(()=>{const e=S[this.props.rel];this.props.onChange({rel:e})})),(0,i.default)(this,"_getInequalityEndpoint",(e=>{const t=(0,d.default)(["ge","gt"]).contains(e.rel),n=e.range,s=30*((n[1]-n[0])/400),o=n[0]-s,a=n[1]+s;return t?[a,0]:[o,0]})),(0,i.default)(this,"_renderInequality",(e=>{if(e.isInequality){const t=this._getInequalityEndpoint(e),n={arrows:"->",stroke:this.props.apiOptions.isMobile?x.default.INTERACTIVE:x.default.DYNAMIC,strokeWidth:3.5},s=["ge","gt"].includes(e.rel);return r.createElement(w,{start:[(s?.4:-.4)+e.numLinePosition,0],end:t,style:n})}return null})),(0,i.default)(this,"_setupGraphie",((e,t)=>{if(!this.isValid())return;const n=this.props.apiOptions.isMobile?228:400,s=t.range,o=(s[1]-s[0])/n,a=30*o,i=s[0]-a,r=s[1]+a,l="improper"===this.props.labelStyle||"mixed"===this.props.labelStyle||"non-reduced"===this.props.labelStyle?-1.5:-1;e.init({range:[[i,r],[l,1]],scale:[1/o,40],isMobile:this.props.apiOptions.isMobile});const u=(s[0]+s[1])/2;e.line([u,0],[r,0],{arrows:"->"}),e.line([u,0],[i,0],{arrows:"->"})})),(0,i.default)(this,"getUserInput",(()=>({numLinePosition:this.props.numLinePosition,rel:this.props.isInequality?this.props.rel:"eq",numDivisions:this.props.numDivisions,divisionRange:this.props.divisionRange}))),(0,i.default)(this,"simpleValidate",(e=>A.validate(this.getUserInput(),e)))}render(){const e=this.props.divisionRange,t=e[0]+"–"+e[1],n=this.props.numDivisions<e[0]||this.props.numDivisions>e[1],s=r.createElement("div",null,r.createElement("input",{type:"button",className:"simple-button",value:C._("Switch direction"),onClick:this.handleReverse}),r.createElement("input",{type:"button",className:"simple-button",value:(0,d.default)(["le","ge"]).contains(this.props.rel)?C._("Make circle open"):C._("Make circle filled"),onClick:this.handleToggleStrict}));let o;if(this.props.isTickCtrl){let t;t=this.props.apiOptions.customKeypad?g.default:this.props.apiOptions.staticRender?f.default:h.default,o=r.createElement("label",null,C._("Number of divisions:")," ",r.createElement(t,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.numDivisions||e[0],checkValidity:t=>t>=e[0]&&t<=e[1],onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement}))}return r.createElement("div",{className:"perseus-widget perseus-widget-interactive-number-line"},o,this.isValid()?this.props.isTickCtrl&&n?r.createElement("div",{className:"perseus-error"},C.$_("Please make sure the number of divisions is in the range %(divRangeString)s.",{divRangeString:t})):this._renderGraphie():r.createElement("div",{className:"perseus-error"},C.doNotTranslate("Invalid number line configuration.")),!this.props.static&&this.props.isInequality&&s)}}(0,i.default)(A,"propTypes",(0,a.default)({},c.propTypes,{range:l.default.arrayOf(l.default.number).isRequired,labelRange:l.default.arrayOf(l.default.number).isRequired,labelStyle:l.default.string.isRequired,labelTicks:l.default.bool.isRequired,divisionRange:l.default.arrayOf(l.default.number).isRequired,numDivisions:l.default.number.isRequired,snapDivisions:l.default.number.isRequired,isTickCtrl:l.default.bool.isRequired,isInequality:l.default.bool.isRequired,numLinePosition:l.default.number.isRequired,rel:l.default.oneOf(["lt","gt","le","ge"]),onFocus:l.default.func.isRequired,onBlur:l.default.func.isRequired,onChange:l.default.func.isRequired,apiOptions:m.Options.propTypes,keypadElement:y.propTypes,static:l.default.bool,showTooltips:l.default.bool,trackInteraction:l.default.func.isRequired})),(0,i.default)(A,"defaultProps",{range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,numLinePosition:0,snapDivisions:2,showTooltips:!1,rel:"ge",apiOptions:m.Options.defaults}),d.default.extend(A,{validate:function(e,t){const n=t.range,s=e.divisionRange,o=null!=t.initialX?t.initialX:n[0],a=t.isInequality?"ge":"eq",i=t.correctRel||"eq",r=p.number.equal(e.numLinePosition,t.correctX||0),l=e.numDivisions>s[1]||e.numDivisions<s[0];return e.isTickCrtl&&l?{type:"invalid",message:"Number of divisions is outside the allowed range."}:r&&i===e.rel?{type:"points",earned:1,total:1,message:null}:e.numLinePosition===o&&e.rel===a?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}});var R={name:"number-line",displayName:"Number line",widget:A,transform:e=>{const t=d.default.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isTickCtrl","isInequality","showTooltips"]),n=null!=e.initialX?e.initialX:e.range[0],s=e.range[1]-e.range[0];let o;return o=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?s/e.tickStep:void 0,d.default.extend(t,{numLinePosition:n,numDivisions:o,snapDivisions:t.snapDivisions||void 0}),t},staticTransform:e=>{const t=d.default.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isInequality"]),n=null!=e.correctX?e.correctX:e.range[0],s=e.range[1]-e.range[0];let o;return o=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?s/e.tickStep:void 0,d.default.extend(t,{numLinePosition:n,numDivisions:o,rel:e.isInequality?e.correctRel:null,snapDivisions:t.snapDivisions||void 0}),t}};t.default=R},qoj5:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=o(n("aeDP"));class l extends i.Component{constructor(...e){super(...e),(0,a.default)(this,"state",{didMount:!1})}componentDidMount(){this.setState({didMount:!0})}render(){return this.state.didMount?i.createElement(r.default,this.props):i.createElement("div",null)}}var u=l;t.default=u},vUnj:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=n("mR6N"),l=s(n("q1tI")),u=o(n("17x9")),d=o(n("oLyU")),p=s(n("+jAD")),c=s(n("j8wP")),h=o(n("Atlv")),f=o(n("TBZ3")),g=s(n("UcaO")),m=n("zahm");const y={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{},linterContext:m.linterContextDefault};class v extends l.Component{constructor(...e){super(...e),(0,i.default)(this,"state",{expanded:!1}),(0,i.default)(this,"change",((...e)=>p.change.apply(this,e))),(0,i.default)(this,"_onClick",(()=>{this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()})),(0,i.default)(this,"getUserInput",(()=>({}))),(0,i.default)(this,"simpleValidate",(e=>v.validate(this.getUserInput(),e)))}render(){const{Link:e}=this.props.apiOptions.baseElements,{isArticle:t,isMobile:n}=this.props.apiOptions,s=this.state.expanded?this.props.hidePrompt:this.props.showPrompt;let o;const a="javascript:void(0)",i=this._onClick;o=n?l.createElement("div",{className:(0,r.css)(k.linkContainer)},l.createElement("a",{className:(0,r.css)(k.mobileExplanationLink),href:a,onClick:i},s),this.state.expanded&&l.createElement("svg",{className:(0,r.css)(k.disclosureArrow)},l.createElement("polygon",{style:{fill:C},points:"0,".concat(x," ")+"".concat(b,",").concat(x," ")+"".concat(b/2,",0")}))):t?l.createElement("div",{className:(0,r.css)(k.linkContainer,k.articleLink)},l.createElement(e,{className:(0,r.css)(k.explanationLink),style:k.explanationLink,href:a,onClick:i},"[".concat(s,"]"))):l.createElement("div",{className:(0,r.css)(k.linkContainer,k.exerciseLink)},l.createElement(e,{className:(0,r.css)(k.explanationLink),href:a,onClick:i},"[".concat(s,"]")));const u=n?k.contentExpandedMobile:k.contentExpanded;return l.createElement("div",{className:(0,r.css)(k.container)},o,this.state.expanded&&l.createElement("div",{className:(0,r.css)(k.content,n&&k.contentMobile,this.state.expanded&&u),ref:"content"},l.createElement(h.default,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,linterContext:this.props.linterContext})))}}(0,i.default)(v,"propTypes",(0,a.default)({},p.propTypes,{apiOptions:c.Options.propTypes,explanation:u.default.string,hidePrompt:u.default.string,showPrompt:u.default.string,trackInteraction:u.default.func.isRequired,widgets:u.default.object,linterContext:m.linterContextProps})),(0,i.default)(v,"defaultProps",y);const b=30,x=14,C=g.gray95,k=r.StyleSheet.create({container:{display:"inline",position:"relative"},linkContainer:{display:"inline-block"},explanationLink:{fontStyle:"italic",color:"#007d96"},articleLink:{fontSize:20,lineHeight:"30px"},exerciseLink:{fontSize:14,lineHeight:"19.6px"},mobileExplanationLink:{color:g.kaGreen,borderBottom:"dashed 1px ".concat(g.kaGreen),textDecoration:"none",[f.default.xl]:{fontSize:22,lineHeight:1.4},[f.default.lgOrSmaller]:{fontSize:20,lineHeight:1.5},[f.default.smOrSmaller]:{fontSize:18,lineHeight:1.2}},content:{position:"relative",transition:"margin-top 0.1s"},contentExpanded:{borderLeft:"5px solid #ccc",marginLeft:-23,paddingLeft:23,paddingBottom:10,marginBottom:x,marginTop:x},contentExpandedMobile:{boxSizing:"content-box",paddingTop:32,paddingBottom:32,marginTop:x},contentMobile:{background:C,marginLeft:g.negativePhoneMargin,marginRight:g.negativePhoneMargin,paddingLeft:g.phoneMargin,paddingRight:g.phoneMargin},disclosureArrow:{bottom:-(x+5),height:x,left:"50%",marginLeft:-b/2,position:"absolute",width:b}});d.default.extend(v,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var E={name:"explanation",displayName:"Explanation",accessible:!0,defaultAlignment:"inline",widget:v,transform:d.default.identity,isLintable:!0};t.default=E},w4kA:function(e,t,n){"use strict";var s=n("TqRt"),o=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("q1tI")),i=s(n("17x9")),r=s(n("fhzG")),l=s(n("i8i4")),u=s(n("oLyU")),d=s(n("rGVj")),p=n("j8wP"),c=s(n("NT9k")),h=s(n("yPu2"));const f={url:null,top:0,left:0},g=(0,r.default)({displayName:"Measurer",propTypes:{apiOptions:p.Options.propTypes,box:i.default.arrayOf(i.default.number),image:i.default.shape({url:i.default.string,top:i.default.number,left:i.default.number}),showProtractor:i.default.bool,protractorX:i.default.number,protractorY:i.default.number,showRuler:i.default.bool,rulerLabel:i.default.string,rulerTicks:i.default.number,rulerPixels:i.default.number,rulerLength:i.default.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},getInitialState:function(){return{}},render:function(){const e=u.default.extend({},f,this.props.image);return a.createElement("div",{className:"perseus-widget perseus-widget-measurer graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]}},e.url&&a.createElement("div",{style:{position:"relative",top:e.top,left:e.left}},a.createElement(h.default,{src:e.url})),a.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function(){this.setupGraphie()},componentDidUpdate:function(e){u.default.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],(function(t){return e[t]!==this.props[t]}),this)&&this.setupGraphie()},setupGraphie:function(){const e=l.default.findDOMNode(this.refs.graphieDiv);(0,d.default)(e).empty();const t=this.graphie=c.default.createGraphie(e),n=[40,40],s=[[0,this.props.box[0]/n[0]],[0,this.props.box[1]/n[1]]];t.init({range:s,scale:n}),t.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=t.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=t.ruler({center:[(s[0][0]+s[0][1])/2,(s[1][0]+s[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))},getUserInput:function(){return{}},simpleValidate:function(e){return g.validate(this.getUserInput(),e)},focus:d.default.noop});u.default.extend(g,{validate:function(e,t){return{type:"points",earned:1,total:1,message:null}}});var m={name:"measurer",displayName:"Measurer",widget:g,version:{major:1,minor:0},propUpgrades:{1:e=>(0,u.default)(e).chain().omit("imageUrl","imageTop","imageLeft").extend({image:{url:e.imageUrl,top:e.imageTop,left:e.imageLeft}}).value()}};t.default=m},y1hP:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("TSYQ")),r=n("mR6N"),l=s(n("q1tI")),u=o(n("17x9")),d=o(n("fhzG")),p=o(n("oLyU")),c=o(n("rGVj")),h=n("j8wP"),f=n("UcaO"),g=s(n("+jAD")),m=o(n("TBZ3")),y=o(n("Atlv")),v=o(n("yPu2")),b=n("zahm");const x=[0,10],C={url:null,width:0,height:0},k="block",E=(0,d.default)({displayName:"ImageWidget",propTypes:(0,a.default)({},g.propTypes,{alignment:u.default.oneOf(["block","float-left","float-right","full-width"]),alt:u.default.string,apiOptions:h.Options.propTypes,backgroundImage:u.default.shape({url:u.default.string,width:u.default.number,height:u.default.number}),box:u.default.arrayOf(u.default.number),caption:u.default.string,labels:u.default.arrayOf(u.default.shape({content:u.default.string,coordinates:u.default.arrayOf(u.default.number),alignment:u.default.string})),range:u.default.arrayOf(u.default.arrayOf(u.default.number)),title:u.default.string,trackInteraction:u.default.func.isRequired,linterContext:b.linterContextProps}),statics:{styles:r.StyleSheet.create({caption:{display:"inline-block",marginTop:f.baseUnitPx,maxWidth:640,[m.default.lgOrSmaller]:{maxWidth:540},[m.default.smOrSmaller]:{maxWidth:450}}})},getDefaultProps:function(){return{alignment:k,title:"",range:[x,x],box:[400,400],backgroundImage:C,labels:[],alt:"",caption:"",linterContext:b.linterContextDefault}},change(...e){return g.change.apply(this,e)},getUserInput:function(){return null},simpleValidate:function(e){return E.validate(this.getUserInput(),e)},focus:c.default.noop,render:function(){let e,t;const{apiOptions:n}=this.props,s=this.props.backgroundImage;if(s.url&&(e=l.createElement(v.default,{src:s.url,alt:this.props.alt,overrideAriaHidden:!0,width:s.width,height:s.height,preloader:n.imagePreloader,extraGraphie:{box:this.props.box,range:this.props.range,labels:this.props.labels},trackInteraction:this.props.trackInteraction,zoomToFullSizeOnMobile:n.isMobile,constrainHeight:n.isMobile,allowFullBleed:n.isMobile})),this.props.alt&&(t=l.createElement("span",{className:"perseus-sr-only"},l.createElement(y.default,{content:this.props.alt,apiOptions:n,linterContext:this.props.linterContext}))),n.isMobile){let s;if(this.props.title||this.props.caption){let e=this.props.title;e&&(this.props.caption&&!/[.?!"']\s*$/.test(e)&&(e+="."),e="**".concat(e,"** "));const t=(0,i.default)({"perseus-image-caption":!0,"has-title":!!e}),o=this.props.alignment,a="block"===o||"full-width"===o?null:"0 !important";s=l.createElement("div",{className:t},l.createElement("div",{className:(0,r.css)(E.styles.caption),style:{minWidth:a}},l.createElement(y.default,{content:e+this.props.caption,apiOptions:n,linterContext:this.props.linterContext})))}return l.createElement("div",{className:"perseus-image-widget"},e,t,s)}let o,a;return this.props.title&&(o=l.createElement("div",{className:"perseus-image-title"},l.createElement(y.default,{content:this.props.title,apiOptions:n,linterContext:this.props.linterContext}))),this.props.caption&&(a=l.createElement("div",{className:"perseus-image-caption"},l.createElement(y.default,{content:this.props.caption,apiOptions:n,linterContext:this.props.linterContext}))),l.createElement("div",{className:"perseus-image-widget"},o,e,t,a)}});p.default.extend(E,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var w={name:"image",accessible:e=>{const t=e.backgroundImage;return!(t&&t.url&&!e.alt)},defaultAlignment:k,supportedAlignments:["block","full-width"],displayName:"Image",widget:E,isLintable:!0};t.default=w},ydm1:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("lSNA")),i=s(n("q1tI")),r=n("mR6N"),l=o(n("ZWnV"));class u extends i.Component{componentWillUnmount(){this.container=null}focus(){if(this.container)return this.container.focus(),!0}toggleSelect(e){const t=this.props.value;this.props.allowEmpty?this.props.onChange(t!==e?e:null):this.props.onChange(e)}render(){const e=this.props.value,t=this.props.buttons.map(((t,n)=>i.createElement("button",{title:t.title,type:"button",id:""+n,ref:"button"+n,key:""+n,className:(0,r.css)(l.default.button.buttonStyle,t.value===e&&l.default.button.selectedStyle),onClick:this.toggleSelect.bind(this,t.value)},t.content||""+t.value)));return i.createElement("div",{style:{display:"inline-block"},ref:e=>this.container=e},t)}}(0,a.default)(u,"defaultProps",{value:null,allowEmpty:!0});var d=u;t.default=d},zyiX:function(e,t,n){"use strict";var s=n("284h"),o=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("pVnL")),i=o(n("lSNA")),r=s(n("q1tI")),l=o(n("17x9")),u=o(n("oLyU")),d=o(n("rGVj")),p=o(n("8Kom")),c=s(n("+jAD")),h=o(n("fUCW")),f=o(n("uBl0"));const{updateQueryString:g}=f.default;class m extends r.Component{constructor(...e){super(...e),(0,i.default)(this,"getUserInput",(()=>h.default.getUserInput.call(this))),(0,i.default)(this,"handleMessageEvent",(e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(u.default.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})})),(0,i.default)(this,"change",((...e)=>c.change.apply(this,e))),(0,i.default)(this,"simpleValidate",(e=>m.validate(this.getUserInput(),e)))}componentDidMount(){(0,d.default)(window).on("message",this.handleMessageEvent)}componentWillUnmount(){(0,d.default)(window).off("message",this.handleMessageEvent)}render(){const e={width:String(this.props.width),height:String(this.props.height)};Object.entries(e).forEach((([t,n])=>{n.endsWith("%")||n.endsWith("px")||(e[t]=n+"px")}));let t=this.props.url;if(t&&t.length&&0!==t.indexOf("http")&&(t="https://www.khanacademy.org/computer-programming/program/"+t+"/embedded?buttons=no&embed=yes&editor=no&author=no",t=g(t,"width",this.props.width),t=g(t,"height",this.props.height),t=g(t,"origin",p.default.origin)),this.props.settings){const e={};u.default.each(this.props.settings,(function(t){t.name&&t.value&&(e[t.name]=t.value)})),t=g(t,"settings",JSON.stringify(e))}let n="allow-same-origin allow-scripts";return n+=" allow-top-navigation",r.createElement("iframe",{sandbox:"allow-same-origin allow-scripts allow-top-navigation",style:e,src:t,allowFullScreen:this.props.allowFullScreen})}}(0,i.default)(m,"propTypes",(0,a.default)({},c.propTypes,{width:l.default.oneOfType([l.default.string,l.default.number]),height:l.default.oneOfType([l.default.string,l.default.number]),url:l.default.string,settings:l.default.array,status:l.default.oneOf(["incomplete","incorrect","correct"]),message:l.default.string,allowFullScreen:l.default.bool,allowTopNavigation:l.default.bool})),(0,i.default)(m,"defaultProps",{status:"incomplete",message:null,allowFullScreen:!1,allowTopNavigation:!1}),u.default.extend(m,{validate:function(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}});var y={name:"iframe",displayName:"Iframe",widget:m,hidden:!0};t.default=y}}]);
//# sourceMappingURL=../../sourcemaps/en/3oXq.742a3554a685e56338d0.js.map