(window.webpackJsonp=window.webpackJsonp||[]).push([["5OGZ"],{aVwm:function(t,e,o){"use strict";var a=o("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(o("rGVj")),n=a(o("nL9U")),s=o("4PhQ");var i=function(t,e,o){const a=function(){const t=.05;let e=0;return function(){const o=127*Math.sin(t*e-3)+128,a=127*Math.sin(t*e-1)+128,r=127*Math.sin(t*e+1)+128;return e++,"rgb("+o+","+a+","+r+")"}}();if(!t)throw new s.KAError("No element provided to Drawing",s.Errors.Internal);const i=(0,r.default)(t),h=(0,n.default)(i[0],i.width(),i.height());let l=e;const p={"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},u=h.set();let f=[[]];const d=()=>{const t=[];for(let e=0;e<u.length;e++)u[e].removed||"path"===u[e].type&&t.push({path:u[e].attr("path").toString(),stroke:u[e].attr("stroke"),type:"path"});f.push(t)},c=t=>{u.remove();for(let e=0;e<t.length;e++)"path"===t[e].type&&u.push(h.path(t[e].path).attr(p).attr({stroke:t[e].stroke,"clip-rect":[0,0,h.width,h.height]}))};let w="draw",g=null,v="",m="",y=null;const x=(t,e)=>{const o="rainbow"===l?a():l;g=h.path("M"+t+","+e).attr(p).attr({stroke:o,"clip-rect":[0,0,h.width,h.height]}),v=g.attr("path"),u.push(g),m={x:t,y:e}},k=t=>{const e=(0,r.default)(i).offset();((t,e)=>{if("draw"===w&&g)v+="Q"+m.x+","+m.y+","+(m.x+t)/2+","+(m.y+e)/2,m={x:t,y:e},g.attr("path",v);else if("erase"===w&&y){const o=Math.min(t,y.sx),a=Math.max(t,y.sx),r=Math.min(e,y.sy),n=Math.max(e,y.sy);y.attr({x:o,y:r,width:a-o,height:n-r})}})(t.pageX-e.left,t.pageY-e.top),t.preventDefault()};(0,r.default)(i).on("vmousedown",(t=>{const e=(0,r.default)(i).offset();((t,e,o)=>{t&&e&&o&&(y&&(y.remove(),y=null),"draw"===w?(d(),x(t,e)):"erase"===w&&(y=h.rect(t,e,0,0).attr({"fill-opacity":.15,"stroke-opacity":.5,fill:"#ff0000",stroke:"#ff0000"}),y.sx=t,y.sy=e))})(t.pageX-e.left,t.pageY-e.top,t),t.preventDefault(),(0,r.default)(document).on("vmousemove",k),(0,r.default)(document).one("vmouseup",(t=>{((t,e)=>{if("draw"===w&&g&&(v+="L"+t+","+e,m=null,g.attr("path",v),o&&o()),g=null,"erase"===w&&y){d();let t=!1;const e=y.getBBox();for(let o=0;o<u.length;o++)a=e,(r=u[o].getBBox()).x<a.x+a.width&&r.x+r.width>a.x&&r.y<a.y+a.height&&r.y+r.height>a.y&&(t=!0,u[o].remove());t||f.pop();const o=y;y=null,o.animate({opacity:0},100,(function(){o.remove()}))}var a,r})(t.pageX-e.left,t.pageY-e.top),t.preventDefault(),(0,r.default)(document).off("vmousemove",k)}))})),this.setErase=()=>{w="erase"},this.saveStateAndGetHistory=()=>(d(),JSON.stringify(f)),this.setContent=t=>{f=JSON.parse(t),c(f.pop())},this.undo=()=>{f.length&&c(f.pop())},this.resize=()=>{h.setSize(i.width(),i.height())},this.clear=()=>{u.remove(),f=[[]]},this.setColor=t=>{l=t,w="draw"}};e.default=i}}]);
//# sourceMappingURL=../../sourcemaps/en/5OGZ.18e196d65fec77b63306.js.map