(window.webpackJsonp=window.webpackJsonp||[]).push([["1aSa"],{Lx7c:function(e,t,o){"use strict";var s=o("284h"),r=o("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o("pVnL"));o("q1tI");var a=s(o("whzC")),i=r(o("12ks")),c=r(o("Q8Wn")),l=r(o("8Kom"));const u=a.safeLinkTo("https://classroom.google.com/share");function d(){return window.gapi}const h=["https://www.googleapis.com/auth/classroom.courses.readonly","https://www.googleapis.com/auth/classroom.rosters.readonly","https://www.googleapis.com/auth/classroom.profile.emails"],g=["https://www.googleapis.com/auth/classroom.coursework.students"];function m(){return[].concat(h)}var p={ROSTER_SCOPES:h,SHARE_SCOPES:g,_gapiPromise:void 0,_getHostname:()=>l.default.hostname.toLowerCase(),canLoadGoogleApi(){const e=this._getHostname().startsWith("static-"),t=this._getHostname().startsWith("pubcommit-"),o=this._getHostname().endsWith(".khanacademy.org");return c.default.IS_DEV_SERVER||o&&!(e||t)},allScopes:()=>m(),_preAuthorize(e){this.authorize(e,!0).catch((()=>{}))},loadGoogleAPI(e=m()){return this.canLoadGoogleApi()?(this._gapiPromise||(this._gapiPromise=new Promise((t=>{var o;if(d())return this._preAuthorize(e),t(d());window.__gapi_complete=()=>(delete window.__gapi_complete,this._preAuthorize(e),t(d()));const s=document.createElement("script");s.src="https://apis.google.com/js/client.js?onload=__gapi_complete",null==(o=document.body)||o.appendChild(s)}))),this._gapiPromise):Promise.reject("Google Classroom not enabled for user")},classroomAPI(){const e=d();return e?e.client.classroom?Promise.resolve(e.client.classroom):new Promise(((t,o)=>{e.client.load("classroom","v1",(s=>{s&&s.error&&o(s.error),t(e.client.classroom)}))})):Promise.reject("Google API needs to be loaded. Call loadGoogleAPI")},authorize(e=m(),t=!1){const o=d();if(!o)return Promise.reject("Google API needs to be loaded. Call loadGoogleAPI");function s(e){return e&&e.access_token&&e.status&&e.status.signed_in}return new Promise(((e,r)=>{const n=o.auth.getToken();if(s(n))return e(n);o.auth.authorize({client_id:c.default.IS_DEV_SERVER?"179486897809-nedb177f1iatc8dra55e9g4ei2d908mo.apps.googleusercontent.com":"179486897809-vot6i8d4ohsqvv7rui9vbjd53k6eo5mo.apps.googleusercontent.com",scope:m().join(" "),immediate:t},(t=>{if(s(t))return e(t);r(t)}))}))},_queryPagedList(e,t,o={},s=0){if(s>=10)return Promise.resolve([]);const r=(0,n.default)({},o,{pageSize:100});return new Promise(((a,i)=>{e.list(r).execute((r=>{if(!r)return i("Did not receive a response");if(r.error)return i(r.error);if(!r.nextPageToken)return a(t(r)||[]);const c=this._queryPagedList(e,t,(0,n.default)({},o,{pageToken:r.nextPageToken}),s+1).then((e=>[].concat(t(r)||[],e)));a(c)}))}))},getCourses(){return this.authorize(g).then((()=>this.classroomAPI())).then((e=>this._queryPagedList(e.courses,(e=>e.courses),{courseStates:["ACTIVE"],teacherId:"me"})))},getStudents(e){if(!e)return Promise.reject("getStudents(courseId) missing parameter!");function t(e){return!!e.profile.emailAddress}function o(e){return!!e.userId}return this.authorize(h).then((()=>this.classroomAPI())).then((t=>{function s(e){return t.userProfiles.get({userId:e.userId}).then((t=>{const o=(0,n.default)({},e,{profile:t.result,isPending:!0});return delete o.id,o}))}const r=this._queryPagedList(t.courses.students,(e=>e.students),{courseId:e}),a=this._queryPagedList(t.invitations,(e=>e.invitations),{courseId:e}).then((e=>Promise.all(e.filter(o).map(s))));return Promise.all([r,a])})).then((([e,t])=>[].concat(e,t))).then((e=>e.filter(t)))},getShareLink(e){const t=document.createElement("a");t.href=e;const o="".concat(t.protocol,"//").concat(t.host);return"".concat(o,"/gclassroom").concat(t.pathname).concat(t.search)},markSharingConversion(e){i.default.markConversion("content_shared_to_google_classroom",{shareLink:e})},shareToClassroomApi(e,t,o,s){const r=this.getShareLink(t);return this.markSharingConversion(r),this.authorize(m()).then((()=>this.classroomAPI())).then((t=>t.courses.courseWork.create({courseId:e.id,title:o,description:s,materials:[{link:{url:r}}],workType:"ASSIGNMENT",state:"PUBLISHED"}))).then((e=>e.result))},shareToClassroom(e,t,o){const s=this.getShareLink(e);let r="url=".concat(encodeURIComponent(s));r+="&title=".concat(encodeURIComponent(t)),r+="&body=".concat(encodeURIComponent(o)),this.markSharingConversion(s),window.open("".concat(u,"?").concat(r),null,"width=640, height=450,toolbar=no, scrollbars=yes")}};t.default=p},pbLn:function(e,t,o){"use strict";var s=o("284h"),r=o("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o("lSNA")),a=s(o("q1tI")),i=r(o("8Fln")),c=s(o("HEOz"));class l extends a.Component{constructor(...e){super(...e),(0,n.default)(this,"state",{selectedOption:this.props.defaultCourseId})}getOptions(){const{googleCourses:e}=this.props;if(e)return e.map((e=>({value:e.id,label:e.name,gCourse:e})))}handleOptionChange(e){const{googleCourses:t,onCourseChanged:o}=this.props;o(t.find((t=>t.id===e))),this.setState({selectedOption:e})}render(){const{isLoading:e}=this.props,{selectedOption:t}=this.state,o=this.getOptions(),s=o&&0===o.length;let r;return r=e?c._("Fetching classes from Google..."):s?c._("No Google Classes found!"):c._("Select a Class"),a.createElement(i.default,{autosize:!0,name:"google-course-selector",currentFilters:[],placeholder:r,isLoading:e,options:o,value:t,clearable:!1,onChange:({value:e})=>this.handleOptionChange(e)})}}(0,n.default)(l,"defaultProps",{googleCourses:[]});var u=l;t.default=u}}]);
//# sourceMappingURL=../../sourcemaps/en/1aSa.95b84b8da26ce9080342.js.map