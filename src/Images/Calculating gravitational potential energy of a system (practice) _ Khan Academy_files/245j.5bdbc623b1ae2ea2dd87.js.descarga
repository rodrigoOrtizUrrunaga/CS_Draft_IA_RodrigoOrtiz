(window.webpackJsonp=window.webpackJsonp||[]).push([["245j"],{thEZ:function(t,e,i){"use strict";var s=i("284h"),o=i("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=o(i("lSNA")),n=s(i("q1tI")),r=s(i("i8i4")),a=i("mR6N"),l=i("JimW"),c=o(i("hKI/")),d=i("8SBg");const p="normal",u="sticky",f="stuck",m="nativeSticky";class g extends n.Component{constructor(...t){super(...t),(0,h.default)(this,"state",{behavior:p,height:"auto"}),(0,h.default)(this,"measure",(()=>{if(!this._mounted)return;const{scrollOffset:t}=this.props,e={behavior:this.state.behavior,bottomBound:(0,d.getOffsetBottom)(this._wrapper)-t,documentHeight:(0,d.getDocumentHeight)(),height:this.state.height,topBound:(0,d.getOffsetTop)(this._wrapper)-t};"auto"===this.state.height&&(e.contentHeight=this._affixable.getBoundingClientRect().height);const i=this._wrapper.getBoundingClientRect().height;0===this.state.height&&i>0&&(e.contentHeight=i),this.setState(e,(()=>this.onScroll()))})),(0,h.default)(this,"onScroll",(()=>{if(!this._mounted)return;const{scrollOffset:t}=this.props,{bottomBound:e,contentHeight:i,topBound:s}=this.state;if(null==e||null==s||null==i)return;const o={},h=window.innerHeight,n=window.pageYOffset,r=e-(this.state.behavior===p?(0,d.getOffsetTop)(this._affixable):n),a=Math.min(Math.max(0,e-n),h-t)-Math.min(Math.max(0,s-n),h-t),l=Math.min(i,this.props.minHeight-t);n<s?(o.behavior=p,o.height=this.props.stretchToFill?a:Math.min(a,i)):r>l?(o.behavior=u,o.height=this.props.stretchToFill?a:Math.min(a,i)):(o.behavior=f,o.height=l),this._nativeStickyBehaviorEnabled&&(o.behavior=m),this.setState(o)})),(0,h.default)(this,"checkForDocumentHeightChange",(()=>{const{documentHeight:t}=this.state;null!=t&&(0,d.getDocumentHeight)()!==t&&this.measure()}))}componentDidMount(){this._mounted=!0;try{this._nativeStickyBehaviorEnabled=CSS.supports("position","sticky")||CSS.supports("position","-webkit-sticky")||CSS.supports("position","-moz-sticky")||CSS.supports("position","-ms-sticky")||CSS.supports("position","-o-sticky")}catch(t){this._nativeStickyBehaviorEnabled=!1}setTimeout((()=>this.measure()),0),this.throttledMeasure=(0,c.default)((()=>this.measure()),1e3),this.throttledScroll=(0,c.default)((()=>this.onScroll()),20),this.throttledHeightCheck=(0,c.default)((()=>this.checkForDocumentHeightChange()),1e3),window.addEventListener("resize",this.throttledMeasure),window.addEventListener("scroll",this.throttledScroll),window.addEventListener("scroll",this.throttledHeightCheck)}shouldComponentUpdate(t,e){return this.props.children!==t.children||this.props.header!==t.header||this.props.style!==t.style||this.props.scrollOffset!==t.scrollOffset||this.state.behavior!==e.behavior||this.state.height!==e.height}componentWillUnmount(){this._mounted=!1,window.removeEventListener("resize",this.throttledMeasure),window.removeEventListener("scroll",this.throttledScroll),window.removeEventListener("scroll",this.throttledHeightCheck)}render(){const{children:t,header:e,scrollOffset:i,style:s}=this.props,{behavior:o,height:h}=this.state,a={height:h};return o!==m&&o!==u||(a.top=i),n.createElement(l.View,{style:[w.wrapper,s],ref:t=>this._wrapper=r.findDOMNode(t)},n.createElement(l.View,{style:[w.affixable,o===p&&w.normal,o===u&&w.sticky,o===f&&w.stuck,o===m&&w.nativeSticky,a],ref:t=>this._affixable=r.findDOMNode(t)},n.createElement(l.View,{style:w.fixed},e),t))}}e.default=g,(0,h.default)(g,"defaultProps",{scrollOffset:0});const w=a.StyleSheet.create({wrapper:{position:"relative"},affixable:{display:"flex",flexDirection:"column",overflow:"hidden",willChange:"transform"},normal:{position:"absolute",top:0,width:"100%"},sticky:{position:"fixed"},stuck:{position:"absolute",bottom:0,width:"100%"},nativeSticky:{position:"-webkit-sticky !important; position: sticky",width:"100%"},fixed:{flex:"0 0 auto"}})}}]);
//# sourceMappingURL=../../sourcemaps/en/245j.5bdbc623b1ae2ea2dd87.js.map