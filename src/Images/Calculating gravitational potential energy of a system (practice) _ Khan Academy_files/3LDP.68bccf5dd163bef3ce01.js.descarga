(window.webpackJsonp=window.webpackJsonp||[]).push([["3LDP"],{FpvA:function(e,t,o){"use strict";var n=o("284h"),a=o("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(o("pVnL")),r=a(o("lSNA")),d=n(o("q1tI")),l=a(o("CnBM")),i=o("/MKj"),u=o("Pk2J"),c=o("4PhQ"),h=a(o("gXb0")),p=n(o("gJ6u")),m=o("1Knh"),f=a(o("Jayu")),I=o("B4xi"),g=o("hCiH"),k=o("nA/X"),v=o("bHum"),w=a(o("4Du/")),x=a(o("SfjP"));const y=(0,l.default)({loader:()=>Promise.all([o.e("corelibs"),o.e("shared"),o.e("678F"),o.e("4AQu"),o.e("3mAf"),o.e("u1O4"),o.e("7CaP"),o.e("5jrH"),o.e("5O00")]).then(o.t.bind(null,"YUJH",7)),modules:["YUJH"],webpack:()=>["YUJH"],loading:()=>null}),b=(0,l.default)({loader:()=>Promise.all([o.e("shared"),o.e("678F"),o.e("4AQu"),o.e("3mAf"),o.e("1r3U"),o.e("u1O4"),o.e("7BCH")]).then(o.t.bind(null,"Zij6",7)),modules:["Zij6"],webpack:()=>["Zij6"],loading:()=>null}),P=(0,l.default)({loader:()=>Promise.all([o.e("shared-intl"),o.e("shared"),o.e("shared-components"),o.e("uyB7"),o.e("678F"),o.e("4AQu"),o.e("3mAf"),o.e("u1O4"),o.e("5xee"),o.e("7o5w"),o.e("6Rza"),o.e("7lf4"),o.e("4q5j"),o.e("7F0K")]).then(o.t.bind(null,"k7td",7)),modules:["k7td"],webpack:()=>["k7td"],loading:()=>null}),E=(0,l.default)({loader:()=>Promise.all([o.e("corelibs"),o.e("shared-intl"),o.e("shared"),o.e("wonder-blocks"),o.e("shared-components"),o.e("6YAN"),o.e("678F"),o.e("4AQu"),o.e("3mAf"),o.e("u1O4"),o.e("7qxq"),o.e("13Vt"),o.e("7o5w"),o.e("6Rza"),o.e("4q5j"),o.e("5xlB")]).then(o.t.bind(null,"5tQq",7)),modules:["5tQq"],webpack:()=>["5tQq"],loading:()=>null}),S=e=>e&&e.currentItem||null;class A extends d.Component{constructor(...e){super(...e),(0,r.default)(this,"state",{newLevel:"unfamiliar",pointsEarned:0,correctCount:0,oldLevel:void 0,taskInfo:null}),(0,r.default)(this,"handleNext",(()=>{const{markConversion:e,dispatch:t,location:o}=this.props;e({id:"content_modal_next"}),t({type:"NextItem",location:o})})),(0,r.default)(this,"handlePrev",(()=>{const{markConversion:e,dispatch:t,location:o}=this.props;e({id:"content_modal_prev"}),t({type:"PrevItem",location:o})})),(0,r.default)(this,"closeItem",(()=>{const{history:e,location:{pathname:t,queryParams:o}}=this.props;if(!e)return p.default.dispatch({type:"CloseItem"}),void this.returnFocus();const n=!!t.match(/\/(quiz|test)\//);if(o.modal||n){const n=this.getRootPathWithoutModal(),a=null!=n?n:(0,g.stripModalFromRoute)(t,o);e.push(a)}else p.default.dispatch({type:"CloseItem"});this.returnFocus()})),(0,r.default)(this,"handleShowQuizRelatedVideo",((e,{slug:t,contentId:o})=>{const n=e.userExercises;let a=null,s=[];for(const e of n)for(const o of e.exerciseModel.relatedVideos)if(o.nodeSlug==="v/".concat(t)){a=o,s=e.exerciseModel.relatedVideos;break}a&&p.default.dispatch({type:"OpenItem",modalData:{items:s,referrer:"related_videos",currentItem:a}})})),(0,r.default)(this,"handleShowRelatedVideo",((e,{slug:t,contentId:o})=>{const n=S(this.props.modalData);if(n&&"Exercise"===n.kind){const e=n.relatedVideos.find((e=>e.slug===t));if(e){const t="related_videos";p.default.dispatch({type:"OpenItem",modalData:{items:n.relatedVideos,referrer:t,currentItem:e}}),this.props.markConversion({id:"content_modal_open",extra:(0,p.getModalItemExtra)(e,t)}),this.props.markConversion({id:"pageview_video",extra:{content_id:e.contentId,product:"library",slug:e.slug}})}}})),(0,r.default)(this,"handleUpdateProgress",(e=>t=>{"InterspersedQuiz"!==e.kind&&f.default.dispatch({type:I.UPDATE_STATUS,progressKey:e.progressKey,status:t})})),(0,r.default)(this,"handleStartExercise",(()=>{}))}componentDidUpdate(e){const{onChange:t}=this.props;t&&(!e.modalData&&this.props.modalData?t(!0):e.modalData&&!this.props.modalData&&t(!1))}getRootPathWithoutModal(){const{rootUrl:e,location:t}=this.props;if(!e)return;const[o]=e.split("?"),n=t.queryParams;delete n.modal;const a=(0,h.default)(n,!0);return"".concat(o).concat(a)}returnFocus(){const{focusId:e}=this.props,t=document.getElementById(e||"");t&&t.focus()}renderModals(){if(!this.props.modalData)return null;const{hasNextItem:e,hasPrevItem:t,hostInBody:o,isOnTask:n,modalData:a,nextItem:r}=this.props,{currentItem:l,referrer:i}=a,u={key:l.slug,onClose:this.closeItem,title:l.title,hostInBody:o,isOnTask:n,navigator:{onNext:this.handleNext,onPrev:this.handlePrev,hasNext:e,hasPrev:t},nextItem:r,visible:!0,shouldAnimate:!1,shouldBackdropDismiss:()=>!0,referrer:i,linkToContent:"sat-related-content-widget"!==i},h=this.handleUpdateProgress(l);if("InterspersedQuiz"===l.kind)return d.createElement(E,(0,s.default)({},u,{extra:u,quiz:l,onShowRelatedVideo:this.handleShowQuizRelatedVideo,onNextTask:"student-assignments-table"===i?this.handleNext:()=>{}}));if("Exercise"===l.kind){const{masteryMap:e}=f.default.getState();let t=e["e".concat(l.contentId)];t||(t="unfamiliar");const o=(e,o,{progressKey:n},a,s)=>{const r="Exercise"===l.kind&&l.masteryEnabled,d=(0,k.getNumCorrect)(e),i=e.length,u=d/i,c=s||(0,k.getNewLevel)(d,i,u);r&&this.setState({newLevel:c,oldLevel:t,pointsEarned:a,correctCount:d,taskInfo:o}),n&&(f.default.dispatch({type:I.UPDATE_BEST_SCORE,progressKey:n,bestScore:{numCorrect:d,numAttempted:i,completedDate:(new Date).toISOString()}}),f.default.dispatch({type:I.UPDATE_LATEST_SCORE,progressKey:n,latestScore:{numCorrect:d,numAttempted:i,completedDate:(new Date).toISOString()}}))};return d.createElement(P,(0,s.default)({},u,{key:l.slug,exercise:l,onTaskComplete:o,onCheckAnswer:e=>h(e),onNextTask:this.handleNext,showEditorShortcuts:this.props.showEditorShortcuts,onShowRelatedVideo:this.handleShowRelatedVideo}))}if("Video"===l.kind){const{shouldAutoplay:e}=a,t={id:l.contentId,kind:l.kind,kaUrl:l.nodeUrl,slug:l.slug,translatedTitle:l.title,translatedYoutubeId:l.translatedYoutubeId,youtubeId:l.youtubeId,recommended:l.recommended};return d.createElement(b,(0,s.default)({},u,{attribution:l.attribution,footer:"sat-related-content-widget"===i?null:void 0,shouldAutoplay:e,topicId:l.topicId,useBackIcon:!1,video:t}))}if("Article"===l.kind)return d.createElement(y,(0,s.default)({},u,{article:l,onArticleComplete:()=>h("complete"),topicId:l.topicId,hideFooter:"sat-related-content-widget"===i}));throw new c.KAError("unrecognized content kind ".concat(l.kind),c.Errors.Internal)}render(){return d.createElement("span",null,this.renderModals())}}(0,r.default)(A,"defaultProps",{inPractice:!1,showEditorShortcuts:!1});var C=(0,u.compose)(x.default,w.default,(0,i.connect)(((e,t)=>{const o=(0,m.getNextItem)(e),n=(0,m.getPrevItem)(e);return(0,s.default)({},e,{hasNextItem:()=>!!o,hasPrevItem:()=>!!n,nextItem:o})})),(0,v.withConversionContext)((e=>{const{modalData:t}=e,o=S(t);return o?(0,p.modalItemLearningTimeInfo)(o):Object.freeze({})})))(A);t.default=C}}]);
//# sourceMappingURL=../../sourcemaps/en/3LDP.68bccf5dd163bef3ce01.js.map